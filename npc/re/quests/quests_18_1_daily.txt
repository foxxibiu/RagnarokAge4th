//===== rAthena Script =======================================
//= Direction of Prayer
//===== Description: =========================================
//= [Walkthrough Conversion]
//--- Daily quest NPCs for Episode 18.1
//===== Changelogs: ==========================================
//= 1.0 First version. [Capuche]
//============================================================

//-------------------------------------------------------------------
// Quest: Investigation of Oz Labyrinth. Step 1 + 13 (final). (NPC part of the main quest).
// wolfvill,143,113,5	script	Imril#ep18_wv	4_EP18_IMRIL,{

// Quest: Investigation of Oz Labyrinth. Step 2.
oz_dun01,27,184,5	script	#ep18_sb1	4_POINT_RED,{
	switch( isbegin_quest(11725) ) {
	case 0:
		end;
	case 1:
		mes "[Imril]";
		mes "Huh It's hot!";
		mes "It used to be a cool cave";
		mes "I think I'll be sweating profusely even if I stand still.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "You'll get dizzy if you stay too long, so let's look around.";
		mes "For now, this road is ^e5555e only one road^000000, so you can keep walking.";
		completequest 11725;
		setquest 11726;
		cutin "",255;
		navigateto("oz_dun01",68,284);
		close;
	case 2:
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11725) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 3.
oz_dun01,68,284,5	script	Box#ep18_sb1	4_WOODBOX,{
	switch( isbegin_quest(11726) ) {
	case 0:
		end;
	case 1:
		mes "[Imril]";
		mes "Someone left their luggage.";
		mes "If you run into a monster or you are too tired to move things, you can hide your luggage and move it like this.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "Moving things is important, but you only have one life.";
		mes "It's close to the entrance, so it's easy to retrieve things.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Then let's retrieve this luggage later and move on.";
		changequest 11726,11727;
		cutin "",255;
		navigateto("oz_dun01",65,189);
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11726) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 4.
oz_dun01,65,189,5	script	Steep Road#ep18_sb1	4_POINT_RED,{
	switch( isbegin_quest(11727) ) {
	case 0:
		end;
	case 1:
		mes "[Imril]";
		mes "The road here is rough, so be careful.";
		mes "If you accidentally slip, your ankle bone will not be safe.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Let's go all the way down to ^e5555e^000000 from here.";
		changequest 11727,11728;
		cutin "",255;
		navigateto("oz_dun01",111,96);
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11727) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 5.
oz_dun01,111,96,5	script	Steam hole#ep18	4_POINT_RED,{
	switch( isbegin_quest(11728) ) {
	case 0:
		end;
	case 1:
		mes "[Imril]";
		mes "Whoa!";
		mes "It's hot!";
		mes "Steam is escaping from the fissure.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "Fortunately, the bottom seems to be fine, but the steam rising is a sign that the depths in the earth are hot, so lava may leak out of here soon.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "It's really a big deal that it's starting to get so hot near the road I usually go to...";
		next;
		cutin "",255;
		mes "[???]";
		mes "<FONT SIZE = 16><B>Imril!!</FONT></B>";
		changequest 11728,11729;
		navigateto("oz_dun01",100,92);
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11728) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 6 + 7 + 8.
oz_dun01,100,92,3	script	???#ep18_sb1	4_EP18_GW_MIDDLE02,{
	switch( isbegin_quest(11729) ) {
	case 0:
		break;
	case 1:
		mes "[Imril]";
		mes "Are you okay? Mr. Pauls?";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[Paul]";
		mes "Ahah...";
		mes "I was hit by hot steam while running away from a monster.";
		mes "I was careless because it was the road I always walked.";
		next;
		mes "[Paul]";
		mes "I don't even know where I spilled my luggage.";
		mes "It's unfortunate that you only get hurt and lose your luggage...";
		next;
		mes "[Imril]";
		mes "Your life is more important than your burden, so don't say that.";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[Paul]";
		mes "Yes.";
		mes "Thank you";
		next;
		mes "[Imril]";
		mes "I brought you a potion here, so drink it and go back to the village first.";
		mes "You can find your luggage later.";
		cutin "ep18_imril_01.png",2;
		next;
		cutin "",255;
		mes "[Paul]";
		mes "No, leave it alone!";
		mes "You can't waste the village's ^e5555e precious material^000000 like this.";
		next;
		mes "[Paul]";
		mes "You can rest for a while and then go back to the village and apply the ointment.";
		next;
		mes "[Paul]";
		mes "Still, I don't want to be hit by monsters while recovering, so why don't you clean up the monsters in the vicinity ^e5555e^000000?";
		changequest 11729,11730;
		close;
	}
	switch( checkquest(11730,HUNTING) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Paul]";
		mes "You can rest for a while and then go back to the village and apply the ointment.";
		next;
		mes "[Paul]";
		mes "Still, I don't want to be hit by monsters while recovering, so why don't you clean up the monsters in the vicinity ^e5555e^000000?";
		close;
	case 2:
		mes "[Paul]";
		mes "Phew~";
		mes "Thank you!";
		mes "Now I can move a little.";
		next;
		mes "[Paul]";
		mes "Then I'll go back to the village soon.";
		mes "Exploring the maze is good, but be careful.";
		next;
		mes "[Imril]";
		mes "Okay";
		mes "Be careful, Mr. Pauls.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Hmm";
		mes "Not only monsters, but also steam gushing out here and there is a big problem.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "The vendors don't often go down further, but sometimes they go the wrong way when they're being chased by monsters...";
		next;
		mes "[Imril]";
		mes "Let's go down a bit ^e5555e^000000 first.";
		changequest 11730,11731;
		cutin "",255;
		navigateto("oz_dun01",134,56);
		close;
	}
	if (isbegin_quest(11731) == 1) {
		mes "[Imril]";
		mes "Hmm";
		mes "Not only monsters, but also steam gushing out here and there is a big problem.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "The vendors don't often go down further, but sometimes they go the wrong way when they're being chased by monsters...";
		next;
		mes "[Imril]";
		mes "Let's go down a bit ^e5555e^000000 first.";
		cutin "",255;
		navigateto("oz_dun01",134,56);
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11729) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11730,HUNTING) == 2" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 9.
oz_dun01,134,56,5	script	Box#ep18_sb2	4_WOODBOX,{
	if (isbegin_quest(11731) == 1) {
		mes "[Imril]";
		mes "I have luggage here...";
		mes "Is Mr. Pauls the lost luggage?";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "For now, remember the location and retrieve it later.";
		mes "Because we still have to check ^000000 below ^e5555e.";
		mes "This way";
		changequest 11731,11732;
		cutin "",255;
		navigateto("oz_dun01",110,37);
		close;
	}
	mes "- The box is left unattended. -";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11731) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 10.
oz_dun01,110,37,5	script	#ep18_sb2	4_POINT_RED,{
	switch( isbegin_quest(11732) ) {
	case 0:
		end;
	case 1:
		mes "[Imril]";
		mes "Ugh...";
		mes "The heat is no joke already.";
		mes "It's more dangerous down here, so be careful.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Actually, unless you're a strong person like adventurer-sama, if you've come this far, it's like a dead life.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "I also came with an adventurer, so I'm going downstairs.";
		changequest 11732,11733;
		cutin "ep18_imril_01.png",2;
		navigateto("oz_dun02",152,276);
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11732) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 11.
oz_dun02,152,276,5	script	#ep18_sb3	4_POINT_RED,{
	switch( isbegin_quest(11733) ) {
	case 0:
		end;
	case 1:
		mes "[Imril]";
		mes "It's just a little further down the road ^e5555eThe shape of the monster is also slightly different^000000.";
		mes "If it's like this, it might be a little dangerous for you, right?";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "It's too dangerous here, so let's look around a bit more and return to the village.";
		changequest 11733,11734;
		cutin "",255;
		navigateto("oz_dun02",143,231);
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11733) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 12.
oz_dun02,143,231,3	script	Old#ep18_sb1	4_EP18_GW_OLD01,{
	if (isbegin_quest(11734) == 1) {
		mes "[Imril]";
		mes "<FONT SIZE = 14><B>Sir!!!!</FONT></B>";
		mes "You're safe!!!";
		cutin "ep18_imril_03.png",2;
		next;
		cutin "",255;
		mes "[Elderly Man]";
		mes "No.";
		mes "Who is this?";
		mes "Isn't that Imril?";
		mes "Why are you in such a dangerous place!";
		next;
		mes "[Imril]";
		mes "No, sir, why are you here?";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[Maze Keeper]";
		mes "The maze keeper is in the maze, then where are you?";
		next;
		mes "[Imril]";
		mes "But the monsters here are too dangerous...";
		cutin "ep18_imril_01.png",2;
		next;
		cutin "",255;
		mes "[Maze Keeper]";
		mes "Well, I'm not the only one here, so don't worry.";
		mes "The monsters these days are so noisy, I just came down to see if anyone was in danger.";
		next;
		mes "[Maze Keeper]";
		mes "Tell me that the lava has come up here ^e5555eSuad^000000, and below this point, the bottom has already melted a lot and it's become more dangerous, so don't go down.";
		next;
		mes "[Maze Keeper]";
		mes "It's too dangerous for you if it's the adventurer yangban next to you.";
		next;
		mes "[Imril]";
		mes "Okay";
		mes "You too, take care of yourself.";
		mes "Come back to town.";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[Maze Keeper]";
		mes "Uh-huh";
		mes "If the maze keeper is not in the maze, who manages the maze!";
		next;
		mes "[Imril]";
		mes "Anyway, stubbornness";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "I don't think I can stand going further down as the headmaster said, so let's go back to the village ^e5555e^000000";
		mes "I feel like my skin is still ripe.";
		changequest 11734,11735;
		cutin "",255;
		navigateto("wolfvill",143,113);
		close;
	}
	if (isbegin_quest(11735) == 1) {
		mes "[Maze Keeper]";
		mes "Uh-huh";
		mes "If the maze keeper is not in the maze, who manages the maze!";
		next;
		mes "[Imril]";
		mes "Anyway, stubbornness";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "I don't think I can stand going further down as the headmaster said, so let's go back to the village ^e5555e^000000";
		mes "I feel like my skin is still ripe.";
		cutin "",255;
		navigateto("wolfvill",143,113);
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11734) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Training Grey Wolves. Step 1 + 4 (final).
wolfvill,121,119,3	duplicate(dummy_npc)	Bowwow#wms01	EP18_GREY_GOAT
wolfvill,120,117,1	duplicate(dummy_npc)	Aisha#wms01	4_F_SHABBY
wolfvill,124,116,3	duplicate(dummy_npc)	Sheep#wms01	4_LAM
wolfvill,121,113,1	duplicate(dummy_npc)	Cookko#wms01	4_PECOPECO
wolfvill,117,113,7	duplicate(dummy_npc)	Littlecoco#wms01	4_HEN
wolfvill,123,110,5	duplicate(dummy_npc)	Guest#wms01	4_HEN
wolfvill,125,111,3	duplicate(dummy_npc)	Cute#wms01	4_HEN

wolfvill,117,119,5	script	Scania#wms01	4_EP18_GW_MAN02,5,5,{
	if (checkweight(1000405,10) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(17510) ) {
	case 0:
		mes "[Scania]";
		mes "Dog, you should learn a foreign language too...";
		npctalk "Night?", "Bowwow#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Oh my gosh, look at how he breathes. He's a genius, a genius!!";
		next;
		cloakoffnpc "Maram#wms01", getcharid(0);
		mes "[Maram]";
		mes "Hello! Scania!";
		next;
		mes "[Scania]";
		mes "Maram? When did you arrive? Did you come earlier than expected?";
		next;
		mes "[Maram]";
		mes "The adventurer helped me, so I came a little faster this time.";
		npctalk "Greetings. You are a strong and strong adventurer.", "Maram#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Are you the one who passed this time?";
		next;
		mes "[Maram]";
		mes "Is that a kid? It's not from this person. It's from a different place. You helped me with the purchase this time, so I brought it here.";
		npctalk "He was a very strong and strong adventurer.", "Maram#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Hmm... Adventurer...? So, you're a foreigner? Are you sure of your identity? If you confide everything here? Or if you say anything over there? Or if you take over our land like those settlers?";
		next;
		mes "[Maram]";
		mes "No, he!! There's nothing you can't say in front of people! You're not like that?";
		next;
		setnpcdisplay( "Baby Grey Wolf#wms01", 21324 );	// EP18_GREY_WOLF_BABY
		mes "[Scania]";
		mes "Does that person wear that on their face? Whether it's a thief or a military family remains to be seen!";
		mes "Aisha picked up some wolf cubs, Maram, are you picking up people?";
		npctalk "Pick it up! Be careful!", "Maram#wms01", bc_self;
		next;
		select( "I'm not that kind of person?" );
		mes "[Maram]";
		mes "Oh, of course, what comes out of his mouth isn't the truth, it's just the words. Words.";
		mes "Wolf cub by the way? What wolf cub?";
		next;
		mes "[Scania]";
		mes "Uh-huh! Aisha picked up a gray wolf cub from the forest a while ago! Bring it back!Even if I tell you to leave it all, I won't listen!";
		next;
		mes "[Scania]";
		mes "Do you know what it is? He's already flirting with our sheep! It's the same now, but what if it's a little bigger? It'll hurt our sheep!";
		mes "So you go and tell me! You won't listen to what I say!";
		next;
		mes "[Maram]";
		mes "Huh? That's a good suggestion. It's going to be a very progressive conversation. But what? I need to organize my luggage.";
		npctalk "What is that awkward tone?", "Scania#wms01", bc_self;
		next;
		mes "[Maram]";
		mes "Ah, yes! Adventurer! Would you like to visit this place? To take a look around here, and to stamp people's eyes.";
		mes "You have to stay here for a while anyway? Everyone here is kind and friendly like me, so I won't be harsh.";
		next;
		mes "[Maram]";
		mes "Is that right, Scania?";
		next;
		mes "[Scania]";
		mes "......";
		npctalk "What else are you looking for like that?", "Maram#wms01", bc_self;
		next;
		mes "[Maram]";
		mes "You just have to go and see if the one Aisha picked up is a real wolf pup or just a puppy that looks like a wolf.";
		npctalk "It's a wolf even if you don't check it! I've seen it all!", "Scania#wms01", bc_self;
		next;
		select( "After confirming?" );
		mes "[Maram]";
		mes "Uh... Well? I didn't even think about it that far. But wouldn't it be a problem if it was a real wolf baby? Puppies are in trouble too.";
		npctalk "Where are you in trouble?", "Scania#wms01", bc_self;
		next;
		mes "[Maram]";
		mes "To explain for the adventurer who has just arrived, there are not many animals that can be raised here because of this land.";
		next;
		mes "[Maram]";
		mes "Nearly all the goats and chickens that Scania cares for. Few cattle or pigs can adapt to places like this. That's why livestock is so precious.";
		next;
		mes "[Scania]";
		mes "But what if Aisha has a wolf cub?";
		next;
		mes "[Maram]";
		mes "The mother is coming to find her cubs!";
		next;
		mes "[Scania]";
		mes "Even if your mother doesn't come to find you?";
		next;
		mes "[Maram]";
		mes "The cubs will grow up and harm the livestock!";
		next;
		emotion ET_SWEAT, playerattached();
		mes "[Scania]";
		mes "Did you hear that?";
		next;
		select( "Where can I go?" );
		mes "[Maram]";
		mes "Where did Aisha live? She ah! This she <NAVI> [top] <INFO> wolfvill, 99,178,0,101,0 </ INFO> </ NAVI> there is Aisha's house.";
		next;
		emotion ET_SWEAT, playerattached();
		mes "[Scania]";
		mes "But there's no use talking about it? If you convince me, I'll change my mind about you.";
		npctalk "Scania, adventurers are not valued in your opinion.", "Maram#wms01", bc_self;
		npctalk "Who says what? You'll be fine.", "Scania#wms01", bc_self;
		next;
		mes "[Maram]";
		mes "Adventurer, then go! I'll go too!";
		setquest 17510;
		cloakonnpc "Maram#wms01", getcharid(0);
		close;
	case 1:
		mes "[Scania]";
		mes "<NAVI>[Aisha]<INFO>wolfvill,99,178,0,101,0</INFO></NAVI> for a hundred days won't help? If you convince me, I'll change my opinion of you.";
		close;
	case 2:
		break;
	}
	switch( isbegin_quest(17512) ) {
	case 0:
		mes "[Scania]";
		mes "<NAVI>[Aisha]<INFO>wolfvill,99,178,0,101,0</INFO></NAVI> for a hundred days won't help? If you convince me, I'll change my opinion of you.";
		close;
	case 1:
		mes "[Scania]";
		mes "Dog dog. Today's walk is over. I'm having a hard time.";
		next;
		mes "[Bowwow]";
		mes "yaaaaa---";
		next;
		mes "[Scania]";
		mes "I can't let you go alone. How can I send you alone in that dangerous place. Of course I know you can go for a walk alone, but I'm anxious.";
		next;
		setnpcdisplay( "Baby Grey Wolf#wms01", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpc "Aisha#wms01", getcharid(0);
		cloakoffnpc "Baby Grey Wolf#wms01", getcharid(0);
		npctalk "Scania!", "Aisha#wms01", bc_self;
		mes "[Scania]";
		mes "Aisha? Why are you here? Did the wolf come back?";
		next;
		npctalk "Woof!!", "Baby Grey Wolf#wms01", bc_self;
		mes "[Scania]";
		mes "Isn't it? Did you bring... a wolf? In front of the sheep? Are you insane?";
		next;
		mes "[Scania]";
		mes "Why the hell do you want a wolf? You need a dog? Then you can have a dog.";
		mes "No. I'll just be a dog. I mess up your house and sometimes bite.";
		next;
		mes "[Aisha]";
		mes "Scania, I have heard your wishes. So you sent me someone? What kind of contractor is your adventurer?";
		next;
		mes "[Aisha]";
		mes "I tried so hard, but what? This guy has already turned to me! Hahaha! Come on, show me your despairing face!!";
		next;
		mes "[Scania]";
		mes "What? Adventurer? Have you betrayed me? How can you do that? Isn't it too much to say that you betrayed me in the first place? I knew this.";
		next;
		mes "[Aisha]";
		mes "Scania, have you been to an ice cave? The blood in your veins is colder than the frozen water there? You cold-blooded!";
		npctalk "What? Was that frozen water?", "Scania#wms01", bc_self;
		npctalk "No...?", "Aisha#wms01", bc_self;
		next;
		mes "[Aisha]";
		mes "How do you send this little and fragile Boksil to that dangerous place. Even her mother died, so she can't live alone.";
		next;
		mes "[Scania]";
		mes "You lost your mother...?";
		next;
		mes "[Aisha]";
		mes "I did. I said it 100 times. You didn't hear it again? Are you believing what you want to believe?";
		next;
		mes "[Aisha]";
		mes "Whatever you do, I will never return this little, fragile young wolf back to my limbs.";
		next;
		setnpcdisplay( "Baby Grey Wolf#wms01", 21324 );	// EP18_GREY_WOLF_BABY
		mes "[Scania]";
		mes "But when the wolf is big, our sheep...";
		next;
		mes "[Aisha]";
		mes "Don't worry about that. Adventurer?";
		next;
		select( "Oh, should I talk to you?" );
		mes "[Aisha]";
		mes "Because if I tell you, you won't listen. When I talk, you don't listen, because you have to tell others to believe.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "This baby wolf will be fine as long as you train it. If you grow up together with other friends from a young age, you won't harm it and will rather protect the sheep.";
		next;
		mes "[Aisha]";
		mes "Did you hear? Where are you going to argue? Now, you clever genius Boksil! Sit down! Hands!";
		emotion ET_WRAP, getnpcid(0,"Aisha#wms01");
		npctalk "Woof!!", "Baby Grey Wolf#wms01", bc_self;
		emotion ET_ROCK, getnpcid(0,"Baby Grey Wolf#wms01");
		npctalk "Good job!!! Our smart boksil!", "Aisha#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "It's true. But... But I don't know how long it will last... I don't know if I can really hit the wild...";
		next;
		mes "[Scania]";
		mes "First of all, I don't think you're going to train that hard.";
		npctalk "What? What do you see me as! Hey, follow me.", "Aisha#wms01", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "If you're anxious, I'll help you. So that you can be perfectly trained. I also help you for a walk with both of your friends to build a bond.";
		next;
		mes "[Scania]";
		mes "But...";
		next;
		mes "[Aisha]";
		mes "You said that it's hard to follow a dog walking alone every day. Isn't that a good thing?";
		npctalk "I'm tired of feeding grass on the theme of shepherds.", "Aisha#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Really... instead of me? Is that so...? Can you take good care of our dog? There are a lot of dangerous monsters out there.";
		next;
		mes "[Aisha]";
		mes "Can't you see the calluses on the adventurer's hand? He said Maram brought him? Then he'd be trustworthy. Our Boksil is a veteran who trained in minutes too!";
		npctalk "There's nothing you can't do!", "Aisha#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Ah, so... I can't help it to come out like this.";
		next;
		mes "[Aisha]";
		mes "I like you so much as if you've been waiting for this moment. Isn't it too cold to take it?";
		next;
		mes "[Scania]";
		mes "No, you're asking so earnestly!! So I have no choice but to...";
		next;
		mes "[Aisha]";
		mes "Anyway... I have to tell the villagers about Boksil. Our Boksil is safe! Let's go, Boksil!";
		npctalk "Woof!", "Baby Grey Wolf#wms01", bc_self;
		next;
		cloakonnpc "Aisha#wms01", getcharid(0);
		cloakonnpc "Baby Grey Wolf#wms01", getcharid(0);
		mes "[Scania]";
		mes "Uh... Suddenly you have an acting shepherd...? Thank you. I have a lot of work to do. What can I do?";
		next;
		mes "[Scania]";
		mes "Oh yes! A lot of foreigners like this kind of thing. Adventurers like it too? Even if you don't like it, you can change it to something the person you like needs, so take it.";
		next;
		mes "[Scania]";
		mes "Well, I'll see you when I go for a walk.";
		mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
		mes "You are eligible to participate in the ^4d4dff conference.^000000";
		completequest 17512;
		ep18_1_reputation_exp += 100;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		setnpcdisplay("Baby Grey Wolf#wms01", 21324 );	// EP18_GREY_WOLF_BABY
		close;
	case 2:
		break;
	}

	// daily
	switch( checkquest(17516,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Scania]";
		mes "Please wait the end of the quest delay.";
		close;
	case 2:
		erasequest 17516;
		break;
	}
	if (isbegin_quest(17515) == 1) {
		mes "[Scania]";
		mes "Adventurer, you've worked hard. I think our dog is also satisfied. Did you have a good meal time? Then, please try again tomorrow!";
		erasequest 17515;
		setquest 17516;
		ep18_1_reputation_exp += 30;
		if (ep18_1_reputation_exp >= 5000)
			.@bonus = 1;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		close;
	}
	if (isbegin_quest(17514) == 1) {
		mes "[Scania]";
		mes "There are a few places the dog likes, and I will guide you. You only need to deal with dangerous monsters nearby.";
		next;
		mes "[Scania]";
		mes "It's a pain in the ass because ashrings rush in. Please take care of the surrounding ashrings. I usually catch 20 eagles a day. Then please.";
		close;
	}
	switch( isbegin_quest(17513) ) {
	case 0:
		mes "[Scania]";
		mes "Adventurer, you came just in time for a walk. But Aisha didn't come...";
		next;
		setnpcdisplay( "Baby Grey Wolf#wms01", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpc "Aisha#wms01", getcharid(0);
		cloakoffnpc "Baby Grey Wolf#wms01", getcharid(0);
		mes "[Aisha]";
		mes "Wow! We're here!";
		next;
		mes "[Baby Grey Wolf]";
		mes "Wait!!";
		next;
		mes "[Scania]";
		mes "Then please take a walk. Really.. Can I not go? Can I trust you?";
		next;
		if (select( "Okay.", "I'm a little busy today." ) == 2)
			end;
		mes "[Aisha]";
		mes "If you are anxious, follow me.";
		next;
		mes "[Scania]";
		mes "Oh no. Well then, please take care of me. Doggy. Have a good day. If you are anxious or not satisfied, talk and come home. Okay?";
		next;
		mes "[Dog]";
		mes "yaaaaaa---";
		next;
		mes "[Scania]";
		mes "There are a few places the dog likes, and I will guide you. You only need to deal with dangerous monsters nearby.";
		next;
		mes "[Scania]";
		mes "It's a pain in the ass because ashrings rush in. Please take care of the surrounding ashrings. I usually catch 20 eagles a day. Then please.";
		setquest 17513;
		close2;
		cloakonnpc "Aisha#wms01", getcharid(0);
		cloakonnpc "Baby Grey Wolf#wms01", getcharid(0);
		navigateto("gw_fild01",138,106);
		end;
	case 1:
		mes "[Scania]";
		mes "There are a few places the dog likes, and I will guide you. You only need to deal with dangerous monsters nearby.";
		next;
		mes "[Scania]";
		mes "It's a pain in the ass because ashrings rush in. Please take care of the surrounding ashrings. I usually catch 20 eagles a day. Then, please.";
		close;
	case 2:
		end;
	}
	end;

OnTouch_:
	if (isbegin_quest(17510) == 0)
		npctalk "Dog, even if you want to go for a walk, be patient.", "Scania#wms01", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17510) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17512) == 1" );
	
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17512) == 2 && isbegin_quest(17513) == 0 && isbegin_quest(17514) == 0 && (checkquest(17516,PLAYTIME) == -1 || checkquest(17516,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17512) == 2 && isbegin_quest(17515) == 1" );
	end;
}

wolfvill,120,121,3	duplicate(dummy_cloaked_npc)	Maram#wms01	4_EP18_MARAM
wolfvill,119,117,1	duplicate(dummy_cloaked_npc)	Baby Grey Wolf#wms01	EP18_GREY_WOLF_BABY

// Quest: Training Grey Wolves. Step 2.
wolfvill,99,178,5	script	Aisha#wms02	4_F_SHABBY,{
	switch( isbegin_quest(17510) ) {
	case 0:
		end;
	case 1:
		mes "[Aisha]";
		mes "Boksil, let's live with your sister for a thousand years. If someone comes to harm you, she will directly bury you in the Oz maze. Don't worry about it, Boksil, let's just trust your sister and live happily.";
		next;
		mes "[Baby Grey Wolf]";
		mes "Uh----";
		emotion ET_FRET, getnpcid(0,"Baby Grey Wolf#wms02");
		next;
		mes "[Aisha]";
		mes "No, Boksil. Calm down. Oh, what if it's still unfamiliar to you. No, I'm not saying anything to you... Let's get closer.";
		next;
		mes "[Baby Grey Wolf]";
		mes "Groooooooooooooooooooooooooooooooooooooo king!!";
		next;
		mes "[Aisha]";
		mes "Okay, okay. You need time to be alone. Actually, I am too. The world is all alone anyway. So let's each live well and live together.";
		next;
		mes "[Baby Grey Wolf]";
		mes "Rulle---";
		next;
		mes "[Aisha]";
		mes "Why? What did I do... Oh? Who are you? It's the first time I've seen him.";
		npctalk "Our Boksil was wary of strangers coming? Oh, you did well~", "Aisha#wms02", bc_self;
		npctalk "Rul--", "Baby Grey Wolf#wms02", bc_self;
		next;
		select( "Is this wolf that wolf cub?" );
		mes "[Aisha]";
		mes "Don't come close to our Boksil. Put your hands down. Turn around and disappear.";
		next;
		select( "I'm not that bad guy..." );
		mes "[Aisha]";
		mes "I don't say bad people are bad people. Anyone who tells me to get rid of my goodies is bad guys. And I have no mercy on bad guys.";
		next;
		select( "How long have you been here?" );
		mes "[Aisha]";
		mes "I can't tell you because it's personal information. Why are you asking?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "No, this little wolf. I don't think he's trained yet.";
		next;
		mes "[Aisha]";
		mes "... No, that's. It's been about a month now. I'm still a baby, so I can't train.";
		next;
		select( "Actually, I came..." );
		mes "[Aisha]";
		mes "What? I thought it would! Stay 10 steps away from Boksil. Don't come closer.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I'm not here to take you, I'm here to take a look... If you fall from the pack, you have to send it back. You have to be prepared because the mother wolf might come looking for you.";
		next;
		mes "[Aisha]";
		mes "I didn't fall out of the pack. I mean, I brought something that was dying next to a dead mother wolf.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Damn it. It seems that you are worried about living in an unfamiliar place away from your mother.";
		next;
		mes "[Aisha]";
		mes "Aren't you really here to take me? Then why are you here?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I came here to convince you after confirming that it is really a wolf cub...";
		next;
		mes "[Aisha]";
		mes "I thought so! Scania sent it? No, why are you telling me to put it in someone else's pet? We're not in danger, so go back. There's nothing else to see.";
		next;
		select( "There's nothing wrong with being careful." );
		mes "[Aisha]";
		mes "You really think so? Do you really think our Boksil will be a potential threat? He's so small and cute...?";
		npctalk "Rul--", "Baby Grey Wolf#wms02", bc_self;
		npctalk "Oh, Bok-sil hates compliments? Okay, okay.", "Aisha#wms02", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Usually I would have thought so... If there was no mother, at least there would be no reason for the wolves to come here.";
		next;
		mes "[Aisha]";
		mes "Because that's what I mean! But stupid Scania doesn't know that! People who don't know me like this know my heart so well!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Besides, this motherless wolf cub cannot survive alone.";
		next;
		mes "[Aisha]";
		mes "That's right! That cold-blooded head turned to ice.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "But Boksil needs training to live together in the village. He needs to learn how to get along without harming others.";
		next;
		mes "[Aisha]";
		mes "You're still so young...?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "You have to do it when you're young. If you train from a young age, the villagers won't be afraid.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "As long as you give them a firm tone, an immediate reaction, and enough compliments, they'll understand. Wolves are smart. What's Boksil's favorite thing?";
		next;
		mes "[Aisha]";
		mes "Um... meat? But not now. Do you have any adventurers?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Ah...! I don't have any meat for a snack, meat... I'll have to bring some meat.";
		completequest 17510;
		setquest 17511;
		close;
	case 2:
		mes "[Aisha]";
		mes "How do you train with meat? All you need is one?";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17510) == 1" );
	end;
}

// Quest: Training Grey Wolves. Step 3.
wolfvill,100,177,1	script	Baby Grey Wolf#wms02	EP18_GREY_WOLF_BABY,{
	if (checkweight(1000405,10) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	switch( isbegin_quest(17511) ) {
	case 0:
		end;
	case 1:
		if (countitem(517) < 1) {	// Meat
			emotion ET_QUESTION;
			npctalk "Mung?", "Baby Grey Wolf#wms02", bc_self;
			mes "[Aisha]";
			mes "Didn't I say you needed a piece of meat, didn't you?";
			close;
		}
		disable_items;
		.@player_name$ = strcharinfo(0);
		mes "[" + .@player_name$ + "]";
		mes "Hello~ I'm " + .@player_name$ + ". Is this Boksil? Nice to meet you. Are you worried about coming to an unfamiliar place? I know how you feel, I know everything.";
		next;
		emotion ET_FRET, getnpcid(0,"Baby Grey Wolf#wms02");
		mes "[Baby Grey Wolf]";
		mes "rumble---";
		npctalk "Are you okay? It looks uncomfortable to plant.", "Aisha#wms02", bc_self;
		next;
		mes "[" + .@player_name$ + "]";
		mes "But it's okay. Everything's okay. There's no one here to hurt Boksil. Don't worry.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Now we are all living together. Having a warm home and eating delicious food.";
		mes "To do that, we have to set some rules, okay?";
		next;
		emotion ET_QUESTION, getnpcid(0,"Baby Grey Wolf#wms02");
		mes "[Baby Grey Wolf]";
		mes "Wah?";
		next;
		mes "[Aisha]";
		mes "It sounds like you're talking to a child.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Come on, look. Meat. Does Boksil like meat? Grilled? Raw? Boiled? Have you tried grilled? It's okay. There are many opportunities to eat in the future.";
		next;
		emotion ET_THROB, getnpcid(0,"Baby Grey Wolf#wms02");
		mes "[Baby Grey Wolf]";
		mes "Wah!";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Let's do our best";
		mes "Boksil, sit down!";
		mes "Wait!";
		mes "Good job. Now, meat.";
		emotion ET_THROB, getnpcid(0,"Baby Grey Wolf#wms02");
		next;
		mes "[" + .@player_name$ + "]";
		mes "Did you see it? Please give me lots of compliments if you follow the instructions.";
		next;
		mes "[Aisha]";
		mes "Mommy, mommy. Isn't our kid a real genius?";
		mes "Our boksil did a good job!!!!";
		emotion ET_GOODBOY, getnpcid(0,"Baby Grey Wolf#wms02");
		next;
		mes "[" + .@player_name$ + "]";
		mes "You have to keep doing it until you get used to it. Repetitions are important. You just have to do it the way you are now.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Boksil, sit down.";
		mes "hand.";
		mes "Wait. Now, try it yourself.";
		next;
		mes "[Aisha]";
		mes "Boksil, sit down!";
		mes"hand!";
		mes "Wow, that's amazing.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "These canines are up to you to train. They make this place feel like a safe home, and if you bond well, they will get along.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "And if you greet other friends and stay together from childhood, you will get along without any major problems.";
		next;
		mes "[Aisha]";
		mes "Would people know that?";
		next;
		mes "[" + .@player_name$ + "]";
		mes "You just have to show them what you've done, so that Boksil is ready to live as a member of this village.";
		mes "<NAVI>[Scania]<INFO>Go to wolfvill,117,119,0,101,0</INFO></NAVI>. Go and show us our handsome and handsome Boksil.";
		delitem 517,1;	// Meat
		completequest 17511;
		setquest 17512;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		close;
	case 2:
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17511) == 1 && countitem(517) > 0" );	// Meat
	end;
}
//-------------------------------------------------------------------

// Quest: Training Grey Wolves. Daily.
gw_fild01,138,106,5	script	Grass#wms01	4_POINT_YELLOW,5,5,{
	if (isbegin_quest(17513) == 1) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "Yah ha ha?", "", bc_self;
		sleep2 2000;
		setnpcdisplay( "Baby Grey Wolf#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		erasequest 17513;
		setquest 17514;
		unittalk getcharid(3), "You've already been here. Do you like it? Ah.. There is no grass here. Let's find another place. Is there any place you want?", bc_self;
		sleep2 1500;
		npctalk "Yah ha ha!", "", bc_self;
		sleep2 1500;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpc "Dog#wms02", getcharid(0);
		cloakonnpc "Baby Grey Wolf#wms03", getcharid(0);
		setnpcdisplay( "Baby Grey Wolf#wms03", CLEAR_NPC );
		unittalk getcharid(3), "Already gone. Let's catch Ashling!!", bc_self;
		end;
	}
	if (checkquest(17514,HUNTING) == 2) {
		setpcblock PCBLOCK_NPC, true;
		setnpcdisplay( "Baby Grey Wolf#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpc "Dog#wms02", getcharid(0);
		cloakoffnpc "Baby Grey Wolf#wms03", getcharid(0);
		erasequest 17514;
		setquest 17515;
		unittalk getcharid(3), "Are you full?", bc_self;
		sleep2 1000;
		npctalk "Yah ha ha!", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "Did Boksil take good care of the dog?", bc_self;
		sleep2 1000;
		npctalk "Woof!!!", "Baby Grey Wolf#wms03", bc_self;
		sleep2 1500;
		unittalk getcharid(3), "Good job. Let's go home!!!", bc_self;
		cloakonnpc "Dog#wms02", getcharid(0);
		cloakonnpc "Baby Grey Wolf#wms03", getcharid(0);
		setnpcdisplay( "Baby Grey Wolf#wms03", CLEAR_NPC );
		setpcblock PCBLOCK_NPC, false;
		end;
	}
	end;
OnTouch:
	if (isbegin_quest(17513) == 1 || checkquest(17514,HUNTING) == 2) {
		cloakoffnpc "Dog#wms02", getcharid(0);
		cloakoffnpc "Baby Grey Wolf#wms03", getcharid(0);
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17513) == 1 || checkquest(17514,HUNTING) == 2" );
	end;
}

gw_fild01,160,104,0	script	Delicious grass#wms11	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (isbegin_quest(17513) == 1 || checkquest(17514,HUNTING) == 2) {
		cloakoffnpc "Dog#wms02", getcharid(0);
		cloakoffnpc "Baby Grey Wolf#wms03", getcharid(0);
	}
	end;
}
gw_fild01,26,101,0	duplicate(Delicious grass#wms11)	#wms01	HIDDEN_WARP_NPC,3,3

gw_fild01,138,106,3	script	Dog#wms02	EP18_GREY_GOAT,{
	if (isbegin_quest(17513) == 1) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "Yah ha ha?", "", bc_self;
		sleep2 2000;
		setnpcdisplay( "Baby Grey Wolf#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		erasequest 17513;
		setquest 17514;
		unittalk getcharid(3), "You've already been here. Do you like it? Ah.. There is no grass here. Let's find another place. Is there any place you want?", bc_self;
		sleep2 1500;
		npctalk "Yah ha ha!", "", bc_self;
		sleep2 1500;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpc "Dog#wms02", getcharid(0);
		cloakonnpc "Baby Grey Wolf#wms03", getcharid(0);
		setnpcdisplay( "Baby Grey Wolf#wms03", CLEAR_NPC );
		unittalk getcharid(3), "Already gone. Let's catch Ashling!!", bc_self;
		end;
	}
	if (checkquest(17514,HUNTING) == 2) {
		setpcblock PCBLOCK_NPC, true;
		setnpcdisplay( "Baby Grey Wolf#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpc "Dog#wms02", getcharid(0);
		cloakoffnpc "Baby Grey Wolf#wms03", getcharid(0);
		erasequest 17514;
		setquest 17515;
		unittalk getcharid(3), "Are you full?", bc_self;
		sleep2 1000;
		npctalk "Yah ha ha!", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "Did Boksil take good care of the dog?", bc_self;
		sleep2 1000;
		npctalk "Woof!!!", "Baby Grey Wolf#wms03", bc_self;
		sleep2 1500;
		unittalk getcharid(3), "Good job. Let's go home!!!", bc_self;
		cloakonnpc "Dog#wms02", getcharid(0);
		cloakonnpc "Baby Grey Wolf#wms03", getcharid(0);
		setnpcdisplay( "Baby Grey Wolf#wms03", CLEAR_NPC );
		setpcblock PCBLOCK_NPC, false;
		end;
	}
	end;

OnInit:
	cloakonnpc strnpcinfo(0);
	end;
}

gw_fild01,137,104,7	duplicate(dummy_npc)	Baby Grey Wolf#wms03	CLEAR_NPC
//-------------------------------------------------------------------



//-------------------------------------------------------------------
// Quest: Ahab's Request. Step 1 + 8 (final).
wolfvill,85,111,3	script	Zlan#ep18	4_M_RACHMAN1,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(16560) ) {
	case 0:
		mes "[Zlan]";
		mes "Ugh, we were just talking strange things at the village meeting today, man.";
		next;
		mes "[Desel]";
		mes "That man? Oh, the unnamed man?";
		next;
		mes "[Zlan]";
		mes "I can't say anything I can't say.";
		mes "Something high in Rachel, what kind of power is that in the gray wolf forest.";
		next;
		mes "[Zlan]";
		mes "The man who asks if it's Ahab or Clam!";
		mes "It's not like that in Rachel I'm meeting~ I'm wrong~";
		next;
		mes "[Zlan]";
		mes "If that's the case, why don't you stay with Rachel? Why did you come all the way here?";
		mes "I really don't understand!";
		next;
		mes "[Kayar]";
		mes "She still thinks she is in Rachel.";
		mes "Are you sleeping in the windy tent and still haven't woken up from your dream?";
		next;
		mes "[Zlan]";
		mes "If you're going to dream, you can dream alone.";
		mes "Why are you so rude to others?";
		next;
		mes "[Desel]";
		mes "...what are you, are you eavesdropping on us?";
		mes "Is it the clam uncle's stingray!";
		next;
		mes "[Kayar]";
		mes "You're not even a great person smart enough to grow something like sagebrush.";
		mes "So, who are you? Overhearing other people's gossip. Embarrassed.";
		next;
		select( "I'm just a passing traveler." );
		mes "[Zlan]";
		mes "Liar. Where is the traveler who passed through this gray wolf forest?";
		mes "Somehow related to us.";
		next;
		mes "[Desel]";
		mes "If you don't say it, you'll have no choice but to listen~";
		mes "Are you really going to tell lies?";
		next;
		mes "[Kayar]";
		mes "Calm down, Redsell. As Zlan said, I'm not a passerby. Is there anyone that we don't know but wouldn't be surprised to be here?";
		next;
		mes "[Zlan]";
		mes "Who is that?";
		setquest 16560;
		close;
	case 1:
		mes "[Zlan]";
		mes "Mr. Ahab is starting to listen a little... I don't think he's a very bad person.";
		mes "Yes, this is how adults interact.";
		next;
		mes "[Zlan]";
		mes "I'm glad we didn't say anything because we covered each other's ears and squawked, and eventually kicked them out.";
		mes "Thanks to you. Thank you.";
		close;
	case 2:
		break;
	}
	if (isbegin_quest(16566) == 1) {
		mes "[Zlan]";
		mes "Have you been here? What is clam?";
		mes "What? You said you would listen to others now?";
		next;
		mes "[Zlan]";
		mes "As expected, you haven't heard it until now.";
		next;
		mes "[Kayar]";
		mes "Suck don't make fun of me, Zlan.";
		mes "Now it's important to do it right.";
		next;
		mes "[Desel]";
		mes "Yes, yes.";
		mes "Dam no, what's wrong with Mr. Ahab?";
		mes "You must have told me well, a tall person or a wide person.";
		next;
		mes "[Desel]";
		mes "Thank you. Thanks to you, we don't even have to send people out of here.";
		mes "Even if I said yes, it was very uncomfortable.";
		next;
		mes "[Kayar]";
		mes "Representing the village meeting We are not able to attend the meeting, but we will show a little sincerity.";
		mes "It's nice to have someone like you.";
		completequest 16566;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes " ";
		mes "^4d4dff A favorable rating for you occurs.^000000";
		ep18_1_reputation_exp += 100;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		close;
	}
	mes "[Zlan]";
	mes "If you don't want to abide by the rules of this forest, please leave.";
	mes "So are you. Rules are there to keep.";
	next;
	mes "[Zlan]";
	mes "It's the same with manners. Society is a place without manners and rules? It's barbarism.";
	mes "I don't want to be wild!";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16560) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16566) == 1" );
	end;
}

// Quest: Ahab's Request. Step 2.
wolfvill,83,109,5	script	Kayar#ep18	4W_M_03,{
	switch( isbegin_quest(16560) ) {
	case 0:
		mes "[Kayar]";
		mes "Oh, I'm in trouble. I've got a troublesome problem.";
		next;
		mes "[Kayar]";
		mes "I hate talking to people I don't know because it's a relationship problem...";
		close;
	case 1:
		mes "[Kayar]";
		mes "Wouldn't it make sense to be a guest of high ranks?";
		mes "Because we can't keep up with the affairs of the leaders here.";
		next;
		mes "[Zlan]";
		mes "You, is that true?";
		mes "...well, if it's a secret from us, you won't tell us.";
		next;
		mes "[Desel]";
		mes "If you are a really tall person, listen to us.";
		mes "Isn't he a tall person? Still, he must be something important. Listen to me.";
		next;
		mes "[Desel]";
		mes "That clam..., no, that's the nickname we call each other.";
		mes "How can I help a man named Ahab?";
		next;
		mes "[Zlan]";
		mes "You're a real troublemaker, that guy!";
		mes "I'm going to die for interrupting every village meeting and talking nonsense.";
		next;
		mes "[Zlan]";
		mes "You don't listen to other people, you just say what you want to say, but that's not a useful word to hear again.";
		mes "Because he is the oldest, he insists that he be heard as a superior, but his head hurts so much.";
		next;
		mes "[Zlan]";
		mes "I heard that he was a great man who lived as a co-worker with the migrants.";
		mes "If you think that you can say this to the natives with the melodies you used back then, you are mistaken.";
		next;
		mes "[Kayar]";
		mes "If I could just kick you out, I would.";
		mes "Maybe we can gather our opinions and make a strong argument.";
		next;
		mes "[Desel]";
		mes "Hey, anyway, that's not it.";
		mes "I mean, this is a place for people who have nowhere else to go.";
		next;
		mes "[Desel]";
		mes "If you get him out of here, he'll have nowhere to go.";
		next;
		mes "[Zlan]";
		mes "But how long do we have to accept that truth?";
		mes "I have nowhere else to go but here, so can I just act my way from now on?";
		next;
		mes "[Kayar]";
		mes "If you do, the truth becomes two. I can't stand it...";
		next;
		mes "[Desel]";
		mes "Yeah, there's a high-ranking person! You're still listening, so you're interested in our work?";
		mes "It doesn't matter if you're not tall. You're a wide person!";
		completequest 16560;
		setquest 16561;
		close;
	case 2:
		break;
	}
	mes "[Kayar]";
	mes "In our village, not only high-ranking people participate in village management meetings.";
	mes "Of course, the decision itself is made by high-ranking people...";
	next;
	mes "[Kayar]";
	mes "So, no one is bothering you just because you're in a meeting.";
	mes "Except that clam uncle.";
	next;
	mes "[Kayar]";
	mes "I don't like that attitude, I really don't like it...";
	mes "The longer it goes, the worse the effect will be.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16560) == 1" );
	end;
}

// Quest: Ahab's Request. Step 3.
wolfvill,87,109,3	script	Desel#ep18	4_M_DESERT,{
	if (isbegin_quest(16562) == 1) {
		mes "[Desel]";
		mes "Make me that Ahab uncle.";
		mes "A person has to look like a person to be a person, or act like a person to become a person....";
		next;
		mes "[Desel]";
		mes "Isn't that too much slander? ...well, I admit it a little.";
		mes "But you'll find out after working with them.";
		close;
	}
	if (isbegin_quest(16561) == 1) {
		mes "[Desel]";
		mes "Did you hear about it?";
		mes "You are the only one who can solve our pain.";
		next;
		mes "[Zlan]";
		mes "Since there is no real answer, if it doesn't work, we will gather opinions and propose to leave the village.";
		next;
		mes "[Desel]";
		mes "Damn it, let's put that aside...";
		mes "But again, that would be the last solution.";
		next;
		mes "[Kayar]";
		mes "We're not the only ones with trouble, so if you propose, it will work.";
		mes "Now everyone who attends the village meeting is in trouble.";
		next;
		mes "[Desel]";
		mes "But! Let's do it last.";
		mes "Help me before the end comes, bro.";
		next;
		mes "[Kayar]";
		mes "We can't talk to him.";
		mes "Can't you go and talk to me?";
		next;
		mes "[Desel]";
		mes "Uh, wow. That would be nice. Let's talk and find out why you do that and why you can't be like that.";
		mes "It's truly a lifetime request.";
		next;
		mes "[Zlan]";
		mes "Do this as a request for the rest of your life. I've saved it and will use it when I have a lover.";
		next;
		mes "[Desel]";
		mes "Yeah, that's probably fine, because I'm not dating.";
		mes "So this is my lifelong wish. Please make me a man that Ahab uncle.";
		next;
		mes "[Kayar]";
		mes "Somehow, my wish seems to be getting bigger.";
		mes "Anyway, please take care of me. <NAVI>[Mr. Ahab] Go and talk to <INFO>wolfvill,127,155,0,101,0</INFO></NAVI>.";
		changequest 16561,16562;
		close;
	}
	mes "[Desel]";
	mes "People who don't understand words! Stupid people! People who make you say things over and over again! People who show their emotions at work!";
	next;
	mes "[Desel]";
	mes "A person who hides his mistakes and secretly reveals them when there is no way back! A person who can't take responsibility for his work!";
	next;
	mes "[Desel]";
	mes "I just hate it!";
	next;
	mes "[Desel]";
	mes "Why do so many people hate it?";
	mes "No, the person I hate the only one!";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16561) == 1" );
	end;
}

// Quest: Ahab's Request. Step 4 + 6 + 7.
wolfvill,127,155,3	script	Ahab#ep18	4_M_MIDDLE1,{
	if (isbegin_quest(16566) == 1) {
		mes "[Ahab]";
		mes "I, I am trying too.";
		mes "Then don't kick me out.";
		next;
		mes "[Ahab]";
		mes "If I get kicked out of here, I have nowhere to go.";
		mes "So I tried to do my best on my own. Everyone hates it.";
		navigateto("wolfvill",85,111);
		close;
	}
	if (isbegin_quest(16565) == 1) {
		mes "[Ahab]";
		mes "Zep, yes, where can I talk about Ahab's manners?";
		mes "I won't forgive you if you keep talking to me!";
		next;
		select( "You know what people hate Ahab?" );
		mes "[Ahab]";
		mes "Ah I know! What's wrong with that!";
		mes "Is it my fault? Young people are bullying old people!";
		next;
		select( "It's not like that.", "It's Mr. Ahab's problem." );
		mes "[Ahab]";
		mes "What's wrong with me!";
		mes "I have no problem!";
		next;
		select( "I'm even thinking of exporting it here." );
		mes "[Ahab]";
		mes "What, what? That's not okay!";
		mes "I have nowhere to go but here.";
		next;
		mes "[Ahab]";
		mes "In Rachel everything was going well";
		mes "I was proud that none of the natives was as successful as me.";
		next;
		mes "[Ahab]";
		mes "However, I accidentally hated the boss of migrants...";
		mes "I came here because I had lost all my possessions and had nowhere to go.";
		next;
		mes "[Ahab]";
		mes "Hey, hey. How can I not get kicked out of here?";
		next;
		mes "[Ahab]";
		mes "Actually I know. I have no power here.";
		mes "Huh? Now I have no power and no money. What should I do?";
		next;
		select( "I don't need power or money.", "Treat people politely." );
		mes "[Ahab]";
		mes "Ugh, I'm doing my best.";
		mes "I give advice to young people, and I go to town meetings all the time to give my opinions.";
		next;
		mes "[Ahab]";
		mes "Are you saying my efforts are wrong?";
		next;
		select("You can't think of it as a superior" );
		mes "[Ahab]";
		mes "But, I'm an adult! Is it wrong to expect a grown-up to be treated like a grown-up?";
		next;
		select( "Then you will be kicked out..." );
		mes "[Ahab]";
		mes "No, no, no... what should I do!";
		next;
		select( "Don't shout.", "Advice that doesn't know the situation is nagging.", "Listen to others.", "Try to learn about this place." );
		mes "[Ahab]";
		mes "Ah ok. ok. don't kick me out.";
		mes "Look, I've listened to you first. You're not even screaming?";
		next;
		mes "[Ahab]";
		mes "I will listen to your advice.";
		mes "So you can't kick me out of here.";
		next;
		mes "[Ahab]";
		mes "I... just wanted to get along well with young people...";
		mes "Was it so bad that it was a bit bittersweet...";
		next;
		mes "[Ahab]";
		mes "Anyway, thank you for coming to talk to me without letting me go right away.";
		mes "I'll do my best anyway <NAVI>[other people] Tell <INFO>wolfvill,85,111,0,101,0</INFO></NAVI>...";
		changequest 16565,16566;
		navigateto("wolfvill",85,111);
		close;
	}
	if (isbegin_quest(16564) == 1) {
		mes "[Ahab]";
		mes "Oh, did you get the cucumber sauce? Let's see.";
		mes "You bought it right.";
		next;
		mes "[Ahab]";
		mes "Then where would you like to eat?";
		mes "I'm really hungry because I haven't been able to eat properly in this cold place.";
		next;
		select( "Let's talk before that..." );
		mes "[Ahab]";
		mes "Hey, yo, you're a young thing with no manners!";
		mes "The old man is eating, so you have to wait politely until it's over!";
		next;
		mes "[Ahab]";
		mes "Rachel pointed at me that I couldn't learn everything if I had a guy like you!";
		next;
		select( "This is a story about courtesy of Mr. Ahab." );
		mes "[Ahab]";
		mes "Mr. Ahab? Mr. Ahab? No, you are campaigning for some errands now!";
		mes "If I run errands twice, uh, I'll be very shoulder-to-shoulder and eat my friends!";
		next;
		mes "[Ahab]";
		mes "Yes, let's hear that precious word!";
		mes "I will listen while eating!";
		changequest 16564,16565;
		close;
	}
	if (isbegin_quest(16563) == 1) {
		mes "[Ahab]";
		mes "If you don't eat it quickly, it will go bad, so buy just one bottle from <NAVI>[Mernomart]<INFO>rachel,135,64,0,101,0</INFO></NAVI>";
		mes "It tastes good when eaten fresh.";
		close2;
		navigateto("rachel",135,64);
		end;
	}
	if (isbegin_quest(16562) == 1) {
		mes "[Ahab]";
		mes "Woah, something. Someone I haven't seen. Are you a resident here?";
		mes "Heh heh heh. In the beginning, it's hard for a superior to remember all of his subordinates. You should understand.";
		next;
		mes "[Ahab]";
		mes "Yes, I'm here, so you can run my errands.";
		mes "It's not difficult. It's a simple thing that even an idiot can do.";
		next;
		mes "[Ahab]";
		mes "For a person like me, the value of available time is different for each person.";
		mes "Of course I am expensive. Ha ha ha!";
		next;
		switch( select( "I'll do an errand for you.", "I'm not here to do that." ) ) {
		case 1:
			mes "[Ahab]";
			mes "Oh, it's good to be obedient~";
			mes "Yeah. A young man should have a bit of a docile taste.";
			next;
			mes "[Ahab]";
			mes "It's no different, because I have a delicious sauce that I must accompany my meal.";
			mes "If you don't have it, you don't feel like you've eaten at all...";
			next;
			mes "[Ahab]";
			mes "So, go to Rachel and get some sauce.";
			mes "If you go to Manomart and say it's cucumber sauce, they'll understand.";
			next;
			mes "[Ahab]";
			mes "If you don't eat it quickly, it will go bad, so buy just one bottle from <NAVI>[Mernomart]<INFO>rachel,135,64,0,101,0</INFO></NAVI>";
			mes "It tastes good when eaten fresh.";
			changequest 16562,16563;
			close2;
			navigateto("rachel",135,64);
			end;
		case 2:
			end;
		}
	}
	mes "[Ahab]";
	mes "At the meeting, I try to be humble.";
	mes "Then the young men's eyes became softer...";
	next;
	mes "[Ahab]";
	mes "I think it might be a little to say that it's not a change, but an attitude, and the world is changing. There is no one who doesn't change.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16562) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16564) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16565) == 1" );
	end;
}

// Quest: Ahab's Request. Step 5.
rachel,135,64,3	script	Shop Keeper#ep18	4_M_RACHMAN2,{
	if (isbegin_quest(16563) == 1) {
		mes "[Shop Keeper]";
		mes "Welcome to the grocery store Manomart.";
		mes "What material are you looking for?";
		next;
		if (select( "Obi Lugger Sauce", "Obi Gut Sauce", "Cucumber Sauce", "Cucumber Sauce" ) != 3) {
			mes "[Shop Keeper]";
			mes "Hmm? There is no such source.";
			mes "Isn't that a sauce you've never heard of?";
			close;
		}
		mes "[Shop Keeper]";
		mes "Ah~ the cucumber sauce! Let's see... it's here.";
		mes "Cucumber and yogurt are added to this sauce, so it is very refreshing and delicious when served on bread.";
		next;
		mes "[Shop Keeper]";
		mes "How many? One? Here it is.";
		mes "Keep in a cool place and eat soon after opening the seal.";
		changequest 16563,16564;
		close;
	}
	mes "[Shop Keeper]";
	mes "Welcome. Grocery store Manomart. Rachel's best grocery store. Yes.";
	next;
	mes "[Shop Keeper]";
	mes "Because most restaurants use our ingredients.";
	mes "Take it, heat it up, cook it, and fry it, and you'll be ready to eat!";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16563) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Collecting Folklore. Step 1 + 5 (final).
wolfvill,61,170,5	script	Folklorist Gudra#ep18	4_F_SHABBY,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(16554) ) {
	case 0:
		if ((isbegin_quest(16551)+isbegin_quest(16552)+isbegin_quest(16553)) == 0) {
			select( "Scholar, what are you doing?" );
			mes "[Folklorist Gudra]";
			mes "Oh, oh.";
			mes "do I look like a scholar?";
			next;
			select( "Are you not a scholar?" );
			mes "[Folklorist Gudra]";
			mes "No! That's a scholar. I am a scholar.";
			mes "I'm glad that someone from outside sees me as a scholar right away.";
			next;
			mes "[Folklorist Gudra]";
			mes "Hmm, hmm. What are you doing?";
			mes "I'm organizing the stories I've recorded.";
			next;
			mes "[Folklorist Gudra]";
			mes "Collecting myths and oral tales handed down to us.";
			mes "It is also about safeguarding the precious cultural property of the indigenous peoples";
			next;
			mes "[Folklorist Gudra]";
			mes "These stories will not be lost, and will be published in a book so that they can be passed on to future generations.";
			next;
			mes "[Folklorist Gudra]";
			mes "You seem to be interested in listening.";
			mes "are you interested in this work?";
			next;
			switch( select( "I am interested", "I am not interested" ) ) {
			case 1:
				mes "[Folklorist Gudra]";
				mes "If you are interested, does that mean you are willing to help?";
				mes "Hands are always needed. I'd be happy to help.";
				next;
				mes "[Folklorist Gudra]";
				mes "Can you write? Good.";
				mes "Please record stories from the villagers.";
				next;
				mes "[Folklorist Gudra]";
				mes "I have made an appointment to hear from a village child, a young man, and a grandmother.";
				next;
				mes "[Folklorist Gudra]";
				mes "It's a long story, so you won't be able to hear it all in one day, so you need to help with a little bit of breathing.";
				mes "Here, I'll give you a journal for recording.";
				next;
				mes "[Folklorist Gudra]";
				mes "The child's name is Dina. The young man is a woman named Amira.";
				mes "Then go to Shani or her grandmother, listen to the story, and write it down.";
				setquest 16551;
				setquest 16552;
				setquest 16553;
				getitem 1000408,1;	// Ep18_Recording_Note
				close;
			case 2:
				end;
			}
			end;
		}
		if (countitem(1000408) < 1) {
			getitem 1000408,1;	// Ep18_Recording_Note
		}
		mes "[Folklorist Gudra]";
		mes "I have made an appointment to hear from a village child, a young man, and a grandmother.";
		next;
		mes "[Folklorist Gudra]";
		mes "It's a long story, so you won't be able to hear it all in one day, so you need to help with a little bit of breathing.";
		next;
		mes "[Folklorist Gudra]";
		mes "The child's name is Dina. The young man is a woman named Amira.";
		mes "Then go to Shanina Grandma and listen to the story and write it down.";
		close;
	case 1:
		mes "[Folklorist Gudra]";
		mes "Dina and Amira, have you been writing stories to Grandma Shanina?";
		mes "I'm excited about what kind of story it will be. Come on, show me your notebook.";
		next;
		mes "[Folklorist Gudra]";
		mes "Uhhhhhh... This is a fairy tale that I can't tell my kids right now.";
		mes "It contains discriminatory stereotypes that are unacceptable by today's standards.";
		next;
		mes "[Folklorist Gudra]";
		mes "Oh, don't get me wrong. I just can't tell the kids, but it's a great resource for me.";
		mes "Who did you hear this from?";
		next;
		mes "[Folklorist Gudra]";
		mes "Are you saying this is the story that Shanina Grandma told me?";
		mes "A story that her grandmother grew up listening to when she was young....";
		next;
		mes "[Folklorist Gudra]";
		mes "I will read this carefully and organize it.";
		mes "Please continue to receive stories from Shanina Grandma.";
		next;
		mes "[Folklorist Gudra]";
		mes "I hope you will come back tomorrow and dictate the next part of this story.";
		mes "Thank you. This is your pay for today's work.";
		delitem 1000408,1;	// Ep18_Recording_Note
		completequest 16554;
		setquest 16559;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes " ";
		mes "^4d4dff A favorable rating for you occurs.^000000";
		ep18_1_reputation_exp += 100;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		close;
	case 2:
		break;
	}
	switch( checkquest(16559,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Folklorist Gudra]";
		mes "It's like I thought, I want to hear all the stories within today.... So, adventurers and people will be exhausted.";
		next;
		mes "[Folklorist Gudra]";
		mes "Get a good rest for the rest of the day, and come back after dawn.";
		mes "I will organize and analyze the stories you have gathered.";
		close;
	case 2:
		erasequest 16559;
		break;
	}
	switch( isbegin_quest(16558) ) {
	case 0:
		if ((isbegin_quest(16555)+isbegin_quest(16556)+isbegin_quest(16557)) == 0) {
			mes "[Folklorist Gudra]";
			mes "Thank you last time";
			mes "I would like you to record the story today as well.";
			next;
			mes "[Folklorist Gudra]";
			mes "Dina and Amira, go to Grandma Shanina and listen to the story and write it down.";
			mes "I'll give you a notebook for recording here.";
			next;
			if (select( "I'll go.", "It's difficult right now." ) == 2)
				end;
			mes "[Folklorist Gudra]";
			mes "Thank you for always being willing to take on a task.";
			mes "I will repay this favor by making a good storybook.";
			next;
			mes "[Folklorist Gudra]";
			mes "Oh, of course, I'll take care of your daily chi for today.";
			mes "Isn't that also important? I know.";
			setquest 16555;
			setquest 16556;
			setquest 16557;
			getitem 1000408,1;	// Ep18_Recording_Note
			close;
		}
		if (countitem(1000408) < 1) {
			getitem 1000408,1;	// Ep18_Recording_Note
		}
		break;
	case 1:
		if (countitem(1000408) < 1) {
			getitem 1000408,1;	// Ep18_Recording_Note
		}
		mes "[Folklorist Gudra]";
		mes "Dina and Amira, have you been writing stories to Grandma Shanina?";
		mes "I'm excited about what kind of story it will be. Come on, show me your notebook.";
		next;
		mes "[Folklorist Gudra]";
		mes "Uhhhhhh... This is a fairy tale that I can't tell my kids right now.";
		mes "It contains discriminatory stereotypes that are unacceptable by today's standards.";
		next;
		mes "[Folklorist Gudra]";
		mes "But all of that is research material.";
		mes "Isn't it interesting that the past times are melted into fairy tales?";
		next;
		mes "[Folklorist Gudra]";
		mes "I will read this carefully and organize it.";
		mes "Please continue to receive stories from Shanina Grandma.";
		next;
		mes "[Folklorist Gudra]";
		mes "I hope you will come back tomorrow and dictate the next part of this story.";
		mes "Thank you. This is your pay for today's work.";
		delitem 1000408,1;	// Ep18_Recording_Note
		erasequest 16555;
		erasequest 16556;
		erasequest 16557;
		erasequest 16558;
		setquest 16559;
		ep18_1_reputation_exp += 30;
		if (ep18_1_reputation_exp >= 5000)
			.@bonus = 1;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close;
	case 2:	// shouldn't happen
		break;
	}
	mes "[Folklorist Gudra]";
	mes "I have made an appointment to hear from a village child, a young man, and a grandmother.";
	next;
	mes "[Folklorist Gudra]";
	mes "It's a long story, so you won't be able to hear it all in one day, so you need to help with a little bit of breathing.";
	next;
	mes "[Folklorist Gudra]";
	mes "The child's name is Dina. The young man is a woman named Amira.";
	mes "Then go to Shanina Grandma and listen to the story and write it down.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(16554) == 0 && isbegin_quest(16551) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16554) == 1" );

	// note: QTYPE_DAILYQUEST to take the quest, QTYPE_QUEST otherwise
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(16554) == 2 && isbegin_quest(16558) == 0 && isbegin_quest(16555) == 0 && (checkquest(16559,PLAYTIME) == -1 || checkquest(16559,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16554) == 2 && isbegin_quest(16558) == 1" );
	end;
}

// Quest: Collecting Folklore. Step 2.
wolfvill,106,224,3	script	Dina#ep18	4_F_DST_CHILD,{
	if (isbegin_quest(16551) == 1) {
		mes "[Dina]";
		mes "Are you here to hear me?";
		mes "Oh, I'm right. I promised Aunt Gudra!";
		next;
		mes "[Dina]";
		mes "Hmm, hmmm. I will only tell you once, so please write well.";
		mes "This is what I really experienced.";
		next;
		select( "Isn't this an oral story?" );
		mes "[Dina]";
		mes "What is oral tradition? Anyway, please listen carefully!";
		mes "Once upon a time, when I was still young.";
		next;
		select( "I'm still young..." );
		mes "[Dina]";
		mes "Uh-huh, you keep talking!";
		mes "Among the gray wolves I met in the gray wolf forest, there was a wolf who seemed to be the head...";
		completequest 16551;
		if (isbegin_quest(16552) == 2 && isbegin_quest(16553) == 2) {
			npctalk "I wrote down all three stories. Let's go back to Gudra.", "", bc_self;
			setquest 16554;
		}
		close;
	}
	if (isbegin_quest(16555) == 1) {
		mes "[Dina]";
		mes "You came to hear my story today too!";
		mes "Aunt Gudra said she would make a book later.";
		next;
		mes "[Dina]";
		mes "Um..., how far did you go last time?";
		mes "Dragon with sapphire eyes meeting a purple fairy, wasn't it?";
		next;
		mes "[Dina]";
		mes "The purple fairy was actually one of the most outstanding of the fairies, how did I prove this...";
		completequest 16555;
		if (isbegin_quest(16557) == 2 && isbegin_quest(16556) == 2) {
			npctalk "I wrote down all three stories. Let's go back to Gudra.", "", bc_self;
			setquest 16558;
		}
		close;
	}
	mes "[Dina]";
	mes "I love reading interesting stories.";
	mes "It's better to read and imagine the next story!";
	next;
	mes "[Dina]";
	mes "The main characters, live in my heart.";
	mes "I just have to watch the characters as if they were in a play.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16551) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16555) == 1" );
	end;
}

// Quest: Collecting Folklore. Step 3.
wolfvill,180,204,3	script	Amira#ep18	4_F_DESERT,{
	if (isbegin_quest(16552) == 1) {
		mes "[Amira]";
		mes "Are you the one who was asked by her older sister Gudra?";
		mes "Her sister made a strange request. Tell me a story from the old days you know...";
		next;
		mes "[Amira]";
		mes "Anyway, I promised to tell you the story I heard from my late grandfather before we came to the Gray Wolf Forest.";
		next;
		mes "[Amira]";
		mes "Are you ready to listen? Now, I'll speak slowly.";
		mes "There are many more gods in the world than we know...";
		completequest 16552;
		if (isbegin_quest(16551) == 2 && isbegin_quest(16553) == 2) {
			npctalk "I wrote down all three stories. Let's go back to Gudra.", "", bc_self;
			setquest 16554;
		}
		close;
	}
	if (isbegin_quest(16556) == 1) {
		mes "[Amira]";
		mes "Goudra unnie's errand came today as well.";
		mes "Where are you collecting these stories to be written?";
		next;
		mes "[Amira]";
		mes "Anyway, I'll tell you the next story.";
		mes "This is also a story my grandfather told me, but some gods still...";
		next;
		mes "[Amira]";
		mes "...so, um, what was the name. I can't remember it very well, but the important thing is...";
		completequest 16556;
		if (isbegin_quest(1655) == 2 && isbegin_quest(16557) == 2) {
			npctalk "I wrote down all three stories. Let's go back to Gudra.", "", bc_self;
			setquest 16558;
		}
		close;
	}
	mes "[Amira]";
	mes "My grandfather said it. It is important not to forget our gods.";
	mes "That's why you tell me so many stories.";
	next;
	mes "[Amira]";
	mes "I've heard so many stories, but now there are some that I forgot...";
	mes "If Gudra unnie makes a book, I won't forget it anymore.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16552) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16556) == 1" );
	end;
}

// Quest: Collecting Folklore. Step 4.
wolfvill,154,184,5	script	Shanina#ep18	4_F_DST_GRAND,{
	if (isbegin_quest(16553) == 1) {
		mes "[Shanina]";
		mes "Oh, is that Gudra's errand? Did you come to hear the old story?";
		mes "I'll tell you. It's a very old story, my grandmother told me, so it may not be your taste.";
		next;
		mes "[Shanina]";
		mes "Isn't that a nuisance? Don't worry. It's fun being a pastime.";
		next;
		mes "[Shanina]";
		mes "Well then, once upon a time, a very long time ago. There was a blacksmith living there";
		completequest 16553;
		if (isbegin_quest(16551) == 2 && isbegin_quest(16552) == 2) {
			npctalk "I wrote down all three stories. Let's go back to Gudra.", "", bc_self;
			setquest 16554;
		}
		close;
	}
	if (isbegin_quest(16557) == 1) {
		mes "[Shanina]";
		mes "You came to Gudra's errand again today. You're also diligent.";
		mes "Did you say that the story I tell you is okay?";
		next;
		mes "[Shanina]";
		mes "I'd be happy if I could help Gudra.";
		mes "How far have you been? Is it your turn to tell a new story today?";
		next;
		mes "[Shanina]";
		mes "Ah, the last story isn't over yet. I can't remember.";
		mes "Did you hear that the blacksmith rode an owl that came down from the sky and went up to the sky?";
		next;
		mes "[Shanina]";
		mes "Yes, I have a good memory.";
		mes "Then I'll tell you the next part. Stop the poor angel...";
		completequest 16557;
		if (isbegin_quest(16555) == 2 && isbegin_quest(16556) == 2) {
			npctalk "I wrote down all three stories. Let's go back to Gudra.", "", bc_self;
			setquest 16558;
		}
		close;
	}
	mes "[Shanina]";
	mes "Grandma doesn't have much fun in life anymore, but she enjoys telling little children old stories.";
	next;
	mes "[Shanina]";
	mes "Thank you very much for having a child who comes and listens. You will be blessed.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16553) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16557) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Purifying Water. Step 1 + 4 (final).
wolfvill,103,230,3	script	Budan#ep18	4_M_RACHMAN1,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8693) ) {
	case 0:
		if (isbegin_quest(8691) == 1 || isbegin_quest(8692) == 1) {
			mes "[Budan]";
			mes "If you go in front of the temple, there will probably be devotees out there for good deeds that day.";
			mes "Just say a few words and buy it.";
			mes "I beg you.";
			close;
		}
		// isbegin_quest(8691) == 0
		mes "[Budan]";
		mes "I want to hear you, so meddle in our affairs...";
		mes "They tell me how to do it easily.";
		mes "Can I help you too?";
		next;
		mes "[Budan]";
		mes "You know we can't get to Rachel easily.";
		mes "So this is something I really need your help with, adventurer.";
		next;
		mes "[Budan]";
		mes "I want you to buy me some items that can only be made in Rachel's Temple of Sethrumnir.";
		mes "As you can see, clean water is not readily available in this area because of the volcanic ash and the sand near Rachel.";
		next;
		mes "[Budan]";
		mes "That's why it was developed as a holy water for purification...";
		mes "This is it, it really absorbs the filth in the water through some mysterious magical treatment.";
		mes "Even all kinds of miscellaneous magic.";
		next;
		mes "[Budan]";
		mes "Even the sulfur spring water that contains the mysterious magic of this forest can be turned into drinking water.";
		mes "But the magic doesn't last long... you have to buy it when you need it.";
		next;
		mes "[Budan]";
		mes "You know what I mean.";
		mes "Can I ask for help?";
		mes "Anyway we go... they don't sell to us.";
		next;
		mes "[Budan]";
		mes "Looking at Rachel, pretending to be the owner, buy a sneak peek and put it in the water bottle over there.";
		mes "Then you will have completely purified, clean water.";
		mes "You can bring it to me.";
		next;
		switch( select( "It shouldn't be difficult", "It shouldn't be difficult" ) ) {
		case 1:
			mes "[Budan]";
			mes "Thank you for the short reply, which was a long talk.";
			next;
			setquest 8691;
			mes "[Budan]";
			mes "If you go in front of the temple, there will probably be devotees out there for good deeds that day.";
			mes "Just say a few words and buy it.";
			mes "I beg you.";
			close;
		case 2:
			end;
		}
	case 1:
		if (countitem(1000411) < 1) {
			mes "[Budan]";
			mes "If you go in front of the temple, there will probably be devotees out there for good deeds that day.";
			mes "Just say a few words and buy it.";
			mes "I beg you.";
			close;
		}
		delitem 1000411,1;	// Ep18_Purified_Bucket
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		completequest 8693;
		setquest 8694;
		ep18_1_reputation_exp += 100;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		mes "^4d4dff A favorable rating for you occurs.^000000";
		next;
		mes "[Budan]";
		mes "Thank you for helping me secure drinking water. Then I will boil this and prepare a meal.";
		mes "If you have time to stay here tomorrow, may I ask for another route to Rachel?";
		next;
		select( "I do", "I think I will be busy tomorrow" );
		mes "[Budan]";
		mes "Is your answer quick?";
		mes "Sorry for the long journey. But I want to feed my kids something safe. Thanks.";
		close;
	case 2:
		break;
	}

	// daily
	switch( checkquest(8694,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Budan]";
		mes "I've got plenty of drinking water for a while.";
		close;
	case 2:
		erasequest 8694;
		break;
	}
	if (isbegin_quest(8695) == 1 || isbegin_quest(8696) == 1) {
		mes "[Budan]";
		mes "If you go in front of the temple, there will probably be devotees out there for good deeds that day.";
		mes "Just say a few words and buy it.";
		mes "I beg you.";
		close;
	}
	if (isbegin_quest(8697) == 1) {
		if (countitem(1000411) < 1) {
			mes "[Budan]";
			mes "If you go in front of the temple, there will probably be devotees out there for good deeds that day.";
			mes "Just say a few words and buy it.";
			mes "I beg you.";
			close;
		}
		delitem 1000411,1;	// Ep18_Purified_Bucket
		ep18_1_reputation_exp += 30;
		if (ep18_1_reputation_exp >= 5000)
			.@bonus = 1;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		// erasequest 8695;
		// erasequest 8696;
		erasequest 8697;
		setquest 8694;
		getexp 18252408,2000000;
		mes "[Budan]";
		mes "Thank you for helping me secure drinking water. Then I will boil this and prepare a meal.";
		mes "If you have time to stay here tomorrow, may I ask for another route to Rachel?";
		next;
		select( "I do", "I think I will be busy tomorrow" );
		mes "[Budan]";
		mes "Is your answer quick?";
		mes "Sorry for the long journey. But I want to feed my kids something safe. Thanks.";
		close;
	}
	mes "[Budan]";
	mes "Adventurer, here you are again.";
	mes "Can you afford to go to Rachel?";
	next;
	mes "[Budan]";
	mes "Looking at Rachel, pretending to be the owner, buy a sneak peek and put it in the water bottle over there.";
	mes "Then you will have completely purified, clean water.";
	mes "You can bring it to me.";
	next;
	if (select( "It shouldn't be difficult", "It shouldn't be difficult" ) == 2)
		end;
	mes "[Budan]";
	mes "Thank you for the short reply, which was a long talk.";
	next;
	setquest 8695;
	mes "[Budan]";
	mes "If you go in front of the temple, there will probably be devotees out there for good deeds that day.";
	mes "Just say a few words and buy it.";
	mes "I beg you.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8691) == 0 && isbegin_quest(8692) == 0 && isbegin_quest(8693) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8693) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8693) == 2 && (checkquest(8694,PLAYTIME) == -1 || checkquest(8694,PLAYTIME) == 2) && isbegin_quest(8695) == 0 && isbegin_quest(8696) == 0 && isbegin_quest(8697) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8697) == 1" );
	end;
}

// Quest: Purifying Water. Step 2.
rachel,103,141,5	script	Hallowed Salesperson#ep18	4_M_DESERT,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (isbegin_quest(8691) == 1 || isbegin_quest(8692) == 1 && countitem(1000410) < 1) {
		mes "[Holy Relic Salesman]";
		mes "It is a holy relic for the essence of today's fish~";
		mes "Hurry up before it's sold out~";
		next;
		mes "[Holy Relic Salesman]";
		mes "Huh?";
		mes "What's going on? Alien?";
		next;
		select("Needed for purified water" );
		mes "[Holy Relic Salesman]";
		mes "Ah~ You came to hear the rumors~";
		mes "I'll explain briefly~";
		mes "It is a consecrated holy water for purification that purifies a large amount of polluted water at once~";
		mes "This is it~";
		next;
		mes "[Holy Relic Salesman]";
		mes "It's made in a temple~";
		mes "Now that the waterway is well maintained, there is not much demand for it~";
		mes "I'm making a small amount~";
		mes "The materials are also difficult~";
		next;
		mes "[Holy Relic Salesman]";
		mes "I can't buy in bulk because I have to use it within a few days~";
		mes "But~ Since there is quite a lot of water that can be purified with one use~";
		next;
		mes "[Holy Relic Salesman]";
		mes "If there is a suitable water supply point when the water runs out on the way to the destination~";
		mes "maybe better than carrying water";
		next;
		mes "[Holy Relic Salesman]";
		mes "But you have to boil it once.";
		mes "Some people say it smells~";
		next;
		mes "[Holy Relic Salesman]";
		mes "This is 550 Jenny~";
		next;
		switch( select( "Buy", "Don't buy" ) ) {
		case 1:
			if (Zeny < 550) {
				mes "[Holy Relic Salesman]";
				mes "You don't have enough Zeny.";
				close;
			}
			Zeny -= 550;
			if (isbegin_quest(8691) == 1) {
				erasequest 8691;
				setquest 8692;
			}
			getitem 1000410,1;	// Ep18_Water_Filter
			mes "[Holy Relic Salesman]";
			mes "The stuff is here~";
			mes "May Goddess Freya bless you~";
			close2;
			navigateto("wolfvill",104,234);
			end;
		case 2:
			end;
		}
	}
	if (isbegin_quest(8695) == 1 || isbegin_quest(8696) == 1 && countitem(1000410) < 1) {
		mes "[Holy Relic Salesman]";
		mes "It is a holy relic for the essence of today's fish~";
		mes "Hurry up before it's sold out~";
		next;
		mes "[Holy Relic Salesman]";
		mes "Ah, the last time you went to the top, didn't you?";
		mes "You came back sooner than expected. It seems that business is going well~";
		next;
		switch( select( "Buy a relic", "Listen to an explanation", "Cancel" ) ) {
		case 1:
			break;
		case 2:
			end;
		case 3:
			end;
		}
		mes "[Holy Relic Salesman]";
		mes "This is 550 Jenny~";
		next;
		if (select( "buy", "don't buy" ) == 2)
			end;
		if (Zeny < 550) {
			mes "[Holy Relic Salesman]";
			mes "You don't have enough Zeny.";
			close;
		}
		Zeny -= 550;
		if (isbegin_quest(8695) == 1) {
			erasequest 8695;
			setquest 8696;
		}
		getitem 1000410,1;	// Ep18_Water_Filter
		mes "[Holy Relic Salesman]";
		mes "The stuff is here~";
		mes "May Goddess Freya bless you~";
		close;
	}
	mes "[Holy Relic Salesman]";
	mes "Today's sale has run out~";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8691) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8695) == 1" );
	end;
}

// Quest: Purifying Water. Step 3.
wolfvill,104,235,0	script	Water barrel#ep1801	CLEAR_NPC,{
	if (isbegin_quest(8692) == 1 || isbegin_quest(8696) == 1) {
		if (countitem(1000410) > 0) {
			if (checkweight(1000411,1) == 0) {
				mes "- Wait a minute !! -";
				mes "- Currently you're carrying -";
				mes "- too many items with you. -";
				mes "- Please try again -";
				mes "- after you loose some weight. -";
				close;
			}
			specialeffect EF_BLUECASTING;
			specialeffect EF_STOPEFFECT;
			specialeffect EF_HEALSP;
			specialeffect EF_SMOKE;
			delitem 1000410,1;	// Ep18_Water_Filter
			getitem 1000411,1;	// Ep18_Purified_Bucket
			if (isbegin_quest(8692) == 1)
				changequest 8692,8693;
			else
				changequest 8696,8697;
			mes "I thought it was relatively clean water, but when I put a holy object in it, it emits a bright light and somehow has a sacred feeling.";
			mes "When the light goes down, the water looks clear even if you pretend.";
			next;
			mes "I'll put it in a bucket and take it to Budan.";
			close;
		}
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8692) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8696) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Transporting Goods. Step 1 + 3.
wolfvill,53,234,0	script	#ep18_wp01	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (ep18_1_main < 36)
		end;
	cloakoffnpc "Hazar#ep18_1", getcharid(0);
	cloakoffnpc "Camille#ep18_1", getcharid(0);
	cloakoffnpc "Wagon#ep18_1", getcharid(0);
	end;
}

wolfvill,50,234,6	script	Hazar#ep18_1	4_EP18_HAZAR,{
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(12532) ) {
	case 0:
		mes "^0000ffThe old man is scolding the young man^000000";
		next;
		npctalk "Did I say that I had to leave today or not?", "Hazar#ep18_1", bc_self;
		next;
		npctalk "haThank you.", "Camille#ep18_1", bc_self;
		next;
		npctalk "By the way, what's the shape of this cart? There's a crack in the wheel. Maybe you replaced it with a new one, but my eyes aren't getting old?", "Hazar#ep18_1", bc_self;
		next;
		npctalk "Sorry! I was in a hurry to find a new wheel, but I can't find a spare...", "Camille#ep18_1", bc_self;
		next;
		npctalk "There should be 30 bags of leather for the items going uphill. This is also invisible to my eyes. Is this also a problem with my eyes.", "Hazar#ep18_1", bc_self;
		next;
		emotion ET_HUK, getnpcid(0,"Camille#ep18_1");
		npctalk "Hey!", "Camille#ep18_1", bc_self;
		next;
		npctalk "Where else did Uma to pull the cart go? I'm old enough to retire. I can't see anything in front of the cart.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "Sorry, it will arrive soon!!", "Camille#ep18_1", bc_self;
		next;
		npctalk "Have you recruited someone to use as an escort? How come you don't see anyone? I'm sure you were going to lead the entire cart by yourself", "Hazar#ep18_1", bc_self;
		next;
		npctalk "That's... Master, I've been recruiting since the decision to go up, but no one volunteered.", "Camille#ep18_1", bc_self;
		next;
		npctalk "You have no intention of going up, Camille... What are you thinking?", "Hazar#ep18_1", bc_self;
		next;
		npctalk "......", "Camille#ep18_1", bc_self;
		next;
		npctalk "I'll take a serious look at the lack of preparation for the ascent later, but let's start with a realistic story first.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "The transaction date has already been set, and the ascending cart must start. We will have to look at the resolution of the cart wheel and the insufficient ascending items. How are you going to solve it?", "Hazar#ep18_1", bc_self;
		next;
		npctalk "This... First of all, I will work on matching the leather quantity! Uma has sent someone to prepare it soon", "Camille#ep18_1", bc_self;
		next;
		npctalk "What about the wheel of the cart? It looks like it will collapse after not being able to take a few steps.", "Hazar#ep18_1", bc_self;
		next;
		select( "interrupt", "ignore" );
		npctalk "Um? We've been worrying about it since a while ago, so are we going to see anything? We're in trouble because of that wheelbarrow, so don't disturb me...", "Hazar#ep18_1", bc_self;
		next;
		select("Describe the repair method" );
		npctalk "This. If you reinforce the wheel with a tough string, it will roll somehow?", "", bc_self;
		next;
		npctalk "No, this guy. The cart wheel isn't like a wooden chair... No. Could it be possible?", "Hazar#ep18_1", bc_self;
		next;
		select( "Isn't it better to try?", "It's too much" );
		npctalk "Adventurer. I am responsible for this ascent. If the adventurer solves the cart wheel, we will pay the adventurer the appropriate experience points based on the vision of our clan", "Camille#ep18_1", bc_self;
		next;
		if (select( "Transaction established!", "I can't do that" ) == 2)
			end;
		npctalk "Thank you. Could you take a look at this cart right here?", "Camille#ep18_1", bc_self;
		specialeffect 1090, AREA, "Wagon#ep18_1";
		next;
		npctalk "I would appreciate it if you could reinforce the wheels of this cart enough to use it for ascending. I will go back to check the leather used for ascending, so I will be away for a while.", "Camille#ep18_1", bc_self;
		setquest 12532;
		emotion ET_HUK, getnpcid(0,"Camille#ep18_1");
		cloakonnpc "Camille#ep18_1", getcharid(0);
		close;
	case 1:
		end;
	case 2:
		break;
	}
	switch( isbegin_quest(12533) ) {
	case 0:
		mes "^0000ffHazard looks at him with friendly eyes^000000";
		next;
		progressbar_npc "FFFF00",2;
		npctalk "Hey... you have some pretty strange talents.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "By the way, this guy Camille isn't finished yet", "Hazar#ep18_1", bc_self;
		next;
		npctalk "I have checked all the items necessary for the senior climb. Now, if I only check the cart and leave...", "Camille#ep18_1", bc_self;
		next;
		npctalk "The wheel of the cart was taken care of by the adventurers here. Let me thank you.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "Ah, thank you so much Adventurer. I'll make sure to visit you when I get back from the mountain. Could you tell me your name?", "Camille#ep18_1", bc_self;
		next;
		select( "My name is " + strcharinfo(0) + "" );
		select( "We have a long way to go, so let's start." );
		npctalk "That's right. I'll have to leave for the first time. I'll greet you after I return. " + strcharinfo(0) + ". Then I'll be back. Senior", "Camille#ep18_1", bc_self;
		next;
		cloakonnpc "Camille#ep18_1", getcharid(0);
		cloakonnpc "Wagon#ep18_1", getcharid(0);
		npctalk "Thank you so much for helping my poor successor. I'm a smart but thoughtful child, so I guess I was unintentionally ashamed.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "I can't say for sure whether that guy will finish the climb safely or not. If my body was a little better, he would have led the climb.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "" + strcharinfo(0) + " Can I call you Mr. If you can afford it, can you do one more request from this old man?", "Hazar#ep18_1", bc_self;
		next;
		select("Tell me" );
		npctalk "It's the first time that Camille conducts an ascent, so I don't think he's at ease. I wonder if he'll be able to avoid monster attacks. ", "Hazar#ep18_1", bc_self;
		next;
		npctalk "So, can you please follow him in moderation and look after him from behind? It's not a big deal, but please.", "Hazar#ep18_1", bc_self;
		next;
		if (select( "accept", "reject" ) == 2)
			end;
		npctalk "Thank you. Thank you very much" + strcharinfo(0) + " Mr.", "Hazar#ep18_1", bc_self;
		setquest 12533;
		close;
	case 1:
	case 2:
	}
	end;

OnInit:
	cloakonnpc();
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8692) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12532) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12533) == 0 && isbegin_quest(12532) == 2" );
	end;
}

// Quest: Transporting Goods. Step 2.
wolfvill,53,234,4	script	Wagon#ep18_1	4_EP18_WAGON,{
	if (ep18_1_main < 36)
		end;
	if (isbegin_quest(12532) == 1) {
		mes "^0000ffIt looks fine, but I see an old wagon wheel.^000000";
		next;
		if (select( "Try repair work", "Stop" ) == 2)
			end;
		progressbar_npc "FFFF00",2;
		if (countitem(7197) < 1) {
			mes "There is no <ITEM>[material]<INFO>7197</INFO></ITEM> to reinforce the wagon wheel.";
			close;
		}
		// note: Tough_Vines not deleted on fail
		.@r = rand(1,5);
		if (.@r == 1) {
			specialeffect EF_REFINEOK;
			mes "^0000ffRepair successful!^000000";
			delitem 7197,1;	// Tough_Vines
			removespecialeffect 1090;
			completequest 12532;
			close;
		}
		specialeffect EF_REFINEFAIL;
		mes "^0000ff It doesn't seem to have been properly reinforced yet. The material hasn't disappeared, so let's keep trying^000000";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12532) == 1" );
	end;
}

wolfvill,56,234,4	script	Camille#ep18_1	4_EP18_KAMIL,{
	mes "^0000ffHazard looks like he's getting mad at him^000000";
	close;
OnInit:
	cloakonnpc();
	end;
}

// Quest: Transporting Goods. Step 4.
gw_fild01,115,130,0	script	#ep18_wp02	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(12533) == 1)
		cloakoffnpc "Wagon#ep18_2", getcharid(0);
	end;
}

gw_fild01,115,130,4	script	Wagon#ep18_2	4_EP18_WAGON,{
	if (ep18_1_main < 36)
		end;
	if (isbegin_quest(12533) == 1) {
		mes "^0000ffIt is clear that the wagon was led by Camille. From the condition of the cargo scattered everywhere, something bad must have happened. I'll have to look for Camille^000000";
		completequest 12533;
		setquest 12534;
		close;
	}
	mes "^0000ff Looks like most of the cargo has already been lost.^000000";
	close;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12533) == 1" );
	end;
}

// Quest: Transporting Goods. Step 5.
gw_fild01,202,102,0	script	#ep18_wp03	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(12534) == 1) {
		cloakoffnpc "#ep18_2_mon", getcharid(0);
		cloakoffnpc "Camille#ep18_2", getcharid(0);
		end;
	}
	if (isbegin_quest(12534) == 2 && isbegin_quest(12535) == 0) {
		cloakoffnpc "Camille#ep18_2", getcharid(0);
		end;
	}
	end;
}

gw_fild01,205,102,4	script	#ep18_2_mon	EP18_GREY_WOLF,{
	if (ep18_1_main < 36)
		end;
	if (isbegin_quest(12534) != 1)
		end;
	.@wolf_hp = 1000;
	.@camille_hp = 1000;

	mes "^0000ffThe situation doesn't look very good^000000";
	next;
	npctalk "rumble...", "#ep18_2_mon", bc_self;
	next;
	npctalk "Damn", "Camille#ep18_2", bc_self;
	next;
	mes "^0000ff I feel like I'm going to fall. I can't even keep my eyes on where to attack, so I'm rolling my eyes relentlessly. I'll probably end up with wolf food that doesn't last even a second and melts away ^000000";
	while(1) {
		next;
		switch( select("Combat advice to Camille", "Treat the wolf yourself", "Walk by" ) ) {
		case 1:
			mes "^0000ffWhere are you going to tell Camille to attack the wolf?^000000";
			playbgm "182";
			while(1) {
				mes "Wolf Health - ^ff0000" + .@wolf_hp + "^000000";
				mes "Camille's Health - ^0000ff" + .@camille_hp + "^000000";
				next;
				switch( select( "timid attack (high probability)", "moderate attack (normal probability)", "big attack (low probability)", "converting blow (low probability)", "Make them run away" ) ) {
				case 1:
					.@wolf_chance = 65;	// 65% chance the wolf is being hit / 35% Camille
					.@wolf_damage = rand(25,50);
					.@camille_damage = rand(45,93);
					break;
				case 2:
					.@wolf_chance = 42;
					.@wolf_damage = rand(32,58);
					.@camille_damage = rand(37,72);
					break;
				case 3:
					.@wolf_chance = 30;
					.@wolf_damage = rand(45,70);
					.@camille_damage = rand(34,53);
					break;
				case 4:
					.@wolf_chance = 25;
					.@wolf_damage = rand(66,80);
					.@camille_damage = rand(26,50);
					break;
				case 5:
					mes "I'm upset, but there's no chance of winning now. Let's fix it and try again";
					close;
				}
				if (.@wolf_chance > rand(100)) {
					.@wolf_hp = .@wolf_hp - .@wolf_damage;
					npctalk "-" + .@wolf_damage, "#ep18_2_mon", bc_self;
					npctalk " ", "Camille#ep18_2", bc_self;
					specialeffect EF_ACIDDEMON, SELF, "#ep18_2_mon";
					specialeffect EF_HFLIMOON3, SELF, "#ep18_2_mon";
				}
				else {
					.@camille_hp = .@camille_hp - .@camille_damage;
					npctalk " ", "#ep18_2_mon", bc_self;
					npctalk "-" + .@camille_damage, "Camille#ep18_2", bc_self;
					specialeffect EF_ACIDDEMON, SELF, "Camille#ep18_2";
					specialeffect EF_HFLIMOON3, SELF, "Camille#ep18_2";
				}
				if (.@wolf_hp < 1) {
					mes "^0000ff You defeated the gray wolf.^000000";
					completequest 12534;
					cloakonnpc "#ep18_2_mon", getcharid(0);
					playbgm "183";
					close;
				}
			}
			break;
		case 2:
			mes "^0000ff No, it might be right to just help Camille grow up on her own....^000000";
			continue;
		case 3:
			mes "^0000ffCome back later and build Camille's grave.^000000";
			close;
		}
		end;
	}
	end;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12534) == 1" );
	end;
}

// Quest: Transporting Goods. Step 6.
gw_fild01,201,102,6	script	Camille#ep18_2	4_EP18_KAMIL,{
	if (ep18_1_main < 36)
		end;
	if (isbegin_quest(12534) == 2 && isbegin_quest(12535) == 0) {
		mes "^0000ff Camille's body is trembling with excitement after the battle.^000000";
		npctalk "Uhhhhhhhh...", "Camille#ep18_2", bc_self;
		next;
		select( "It was a pretty good move", "It wasn't good. Don't hold a knife in the future" );
		npctalk "No" + strcharinfo(0) + "If it wasn't for your instructions, I'd be stuck.", "Camille#ep18_2", bc_self;
		next;
		select( "Why did you leave the cart here?" );
		npctalk "It happened while chasing those who were scattered all over the place with trade goods. I didn't recover all of them, but I did get some.", "Camille#ep18_2", bc_self;
		next;
		npctalk "First, we need to move the ascending cart back to the village. We need to pack up the rest of our luggage and make a claim.", "Camille#ep18_2", bc_self;
		next;
		select( "Isn't it just an accident? It's enough to ask for a crime..." );
		npctalk "They were trade goods to be exchanged for food and daily necessities to support the village's several months' livelihood. Perhaps the crime is not light.", "Camille#ep18_2", bc_self;
		next;
		select( "You're too harsh on the trade officer" );
		npctalk "Master stopped me from the beginning, but I ended up insisting that I want to lead the way. It's not forcing me to take it, so it's my responsibility.", "Camille#ep18_2", bc_self;
		next;
		npctalk "If I died here or if I ran away, Master would be held responsible. That's absolutely not going to happen.", "Camille#ep18_2", bc_self;
		next;
		if (select( "Yes, it's your job, so do it yourself.", "How about running away like this?" ) == 2)
			end;
		npctalk "Thanks again for your help. Now I have to clear the procession and come back again. I hope to see you again if fate guides you...", "Camille#ep18_2", bc_self;
		setquest 12535;
		navigateto("wolfvill",79,211);
		cloakonnpc "Camille#ep18_2", getcharid(0);
		close;
	}
	mes "^0000ff It seems that you cannot hear the story properly^000000";
	close;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12534) == 2 && isbegin_quest(12535) == 0" );
	end;
}

wolfvill,76,210,0	script	#ep18_wp03_	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch_:
	if (isbegin_quest(12531) == 1 || isbegin_quest(12535) == 1) {
		cloakoffnpc "Hazar#ep18_3", getcharid(0);
		cloakoffnpc "Camille#ep18_3", getcharid(0);
		cloakoffnpc "Villager#ep18_31", getcharid(0);
		cloakoffnpc "Villager#ep18_32", getcharid(0);
		cloakoffnpc "Villager#ep18_33", getcharid(0);
	}
	end;
}

// Quest: Transporting Goods. Step 7 + 12 (final).
wolfvill,75,214,4	script	Hazar#ep18_3	4_EP18_HAZAR,{
	if (ep18_1_main < 36)
		end;
	if (!checkweight(1000405,20)) {
		mes "^ff0000 I think the weight of the items I have is too much. Please organize Tori once.^000000";
		close;
	}
	if (isbegin_quest(12535) == 1) {
		mes "^0000ff A meeting between the head of the wolf village and the owners of the wolf village is being held.^000000";
		next;
		npctalk "I feel sorry for everyone. I couldn't get enough disciples because I didn't have enough.", "Hazar#ep18_3", bc_self;
		next;
		npctalk "It's not your problem, Hazard. It's probably Camille's problem, who was too greedy for going uphill.", "Villager#ep18_31", bc_self;
		next;
		npctalk "No, I was the one who forced my disciple to experience ascending.", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Is that real, Camille? Is it true that your master was forcing your back?", "Villager#ep18_33", bc_self;
		next;
		npctalk "I'm really sorry to everyone. And Master didn't pat me on the back, I was stubborn.", "Camille#ep18_3", bc_self;
		next;
		npctalk "I knew this was going to happen. For some reason, something strange happened when Hazard suddenly felt uncomfortable.", "Villager#ep18_32", bc_self;
		next;
		npctalk "Camille, you bastard! What are you doing now!", "Hazar#ep18_3", bc_self;
		next;
		npctalk "I'm stubborn with my master. I couldn't even get the job done properly. It's all my fault.", "Camille#ep18_3", bc_self;
		next;
		npctalk "Hmmm... Hmmm", "Villager#ep18_31", bc_self;
		npctalk "Eing~", "Villager#ep18_32", bc_self;
		npctalk "ttttttt.", "Villager#ep18_33", bc_self;
		next;
		npctalk "Well, I think I got a rough idea of ??what happened. Then, should we discuss the post-processing now?", "Villager#ep18_33", bc_self;
		next;
		npctalk "Hey guys! How can you make such a hasty decision!", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Actually, we've been watching Camille since childhood. I want to take care of the situation.", "Villager#ep18_32", bc_self;
		next;
		npctalk "It's a matter of the circumstances, but there are rules for the top, right?", "Villager#ep18_33", bc_self;
		next;
		emotion ET_HUK, getnpcid(0, "Villager#ep18_31");
		npctalk "This person! If you follow the rules above, you should give up your head! It's not a rude thing to talk about!", "Villager#ep18_31", bc_self;
		next;
		npctalk "No, that's right... Ha, how do I do this?", "Villager#ep18_33", bc_self;
		next;
		npctalk "I will follow the rules. I did it myself, so I guess that's right.", "Camille#ep18_3", bc_self;
		next;
		npctalk "Uh-huh! Camille, you bastard! You're not in a position to speak up!", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Calm down. Speaking of the rules above. Let's examine the grounds for Camille's disposition first.", "Villager#ep18_31", bc_self;
		next;
		npctalk "The loss of 800kg of clothing/leather for winter budget. And the failure to purchase food materials due to the loss.", "Villager#ep18_33", bc_self;
		next;
		npctalk "Ummm... Can't we just pack up the upper search team and find our luggage?", "Villager#ep18_31", bc_self;
		next;
		npctalk "I do, but Camille's mistake will be officially sanctioned once the top has resolved the situation.", "Villager#ep18_33", bc_self;
		next;
		npctalk "Yeah, now, the villagers and the top executives don't know this yet. Camille's guilt is confirmed as soon as the search is sent.", "Villager#ep18_32", bc_self;
		next;
		select( "Try another advice" );
		npctalk "What happens if the top outsider unofficially retrieves and returns the cargo?", "", bc_self;
		next;
		npctalk "No, you are " + strcharinfo(0) + "Are you not Mr.", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Ah, that's a good opinion. If an outsider solves it without anyone knowing, then this case would never have happened.", "Villager#ep18_33", bc_self;
		next;
		npctalk "You can't punish something without the above rules.", "Villager#ep18_31", bc_self;
		next;
		npctalk "" + strcharinfo(0) + "Mr. Could it be that... can I take that as saying that we will find lost items on our behalf?", "Hazar#ep18_3", bc_self;
		next;
		if (select( "I'll give it a try", "What are you kidding me?" ) == 2)
			end;
		npctalk "Thank you " + strcharinfo(0) + "Sir. I will lead the way.", "Camille#ep18_3", bc_self;
		next;
		npctalk "No, that shouldn't be happening. This should be a non-event. Camille, you shouldn't step in.", "Villager#ep18_33", bc_self;
		next;
		npctalk "" + strcharinfo(0) + "Did you say nim? I'll thank you for coming out for our ugly Camille.", "Villager#ep18_31", bc_self;
		next;
		npctalk "I'd like to thank you too. Even if he's a bit shy, he's a talented person who shouldn't lose his life because of this.", "Villager#ep18_32", bc_self;
		next;
		npctalk "I'm so grateful that I can't say anything. What are you doing, I'll tell you about Camille's approximate location.", "Hazar#ep18_3", bc_self;
		next;
		emotion ET_HUK, getnpcid(0, "Villager#ep18_31");
		sleep2 400;
		npctalk "Yes! I see", "Camille#ep18_3", bc_self;
		next;
		mes "^ff0000We have obtained a rough idea of ??where the cargo looted from Camille was headed^000000";
		completequest 12535;
		setquest 12536;
		setquest 12537;
		setquest 12538;
		setquest 12539;
		next;
		npctalk "Then " + strcharinfo(0) + "I'll bet everything on Mr.", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Well, this was a meeting that didn't exist. Let's disband quickly", "Villager#ep18_31", bc_self;
		next;
		emotion ET_HUK, getnpcid(0, "Villager#ep18_31");
		npctalk "That's right. I'm also busy with work.", "Villager#ep18_33", bc_self;
		next;
		cloakonnpc "Hazar#ep18_3", getcharid(0);
		cloakonnpc "Camille#ep18_3", getcharid(0);
		cloakonnpc "Villager#ep18_31", getcharid(0);
		cloakonnpc "Villager#ep18_32", getcharid(0);
		cloakonnpc "Villager#ep18_33", getcharid(0);
		close;
	}
	if (isbegin_quest(12531) == 1) {
		mes "^0000ff A meeting between the head of the wolf village and the owners of the wolf village is being held.^000000";
		next;
		npctalk "Lost cargo has been collected as shown. Let's check the quantity.", "", bc_self;
		next;
		npctalk "Oh. So fast?", "Villager#ep18_31", bc_self;
		next;
		npctalk "I feel like I have already been owed to you twice. No, I was also owed to you in Camille's battle, so three times?", "Hazar#ep18_3", bc_self;
		next;
		npctalk "I'm sorry. I really... thank you.", "Camille#ep18_3", bc_self;
		next;
		npctalk "Let's see, leather 500, cloth processing 280. Ummm... the cloth is a bit lacking...", "Villager#ep18_32", bc_self;
		next;
		npctalk "That's about the level of a typical defective product. ", "Villager#ep18_33", bc_self;
		next;
		npctalk "Yeah, it's not within the allowable range. If that's the case, huh... I think we can reschedule the meeting agenda", "Villager#ep18_31", bc_self;
		next;
		select( "What will change to?" );
		npctalk "The original agenda was a meeting about the loss of trade goods. Now it has been changed to the agenda for delaying the top departure. Isn't it, General?", "Villager#ep18_33", bc_self;
		next;
		npctalk "Uh...hmmmm. That's right. We started two days later than the original schedule", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Master... that's", "Camille#ep18_3", bc_self;
		next;
		npctalk "Shut up, Camille. Well, let's come to a conclusion quickly. What's the punishment for being delayed?", "Hazar#ep18_3", bc_self;
		next;
		npctalk "This is a probationary sentence within 3 months. I am reflecting on my work as an upper-level administrator", "Villager#ep18_33", bc_self;
		next;
		emotion ET_CRY, getnpcid(0, "Villager#ep18_31");
		npctalk "I have no objection", "Villager#ep18_31", bc_self;
		next;
		npctalk "I have no objection, either.", "Villager#ep18_32", bc_self;
		next;
		npctalk "That's right, Camille. You've never had a sore throat.", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Thank you, Master. Thank you also to the upper-level Lords", "Camille#ep18_3", bc_self;
		next;
		npctalk "Uhhhhhh, what are you doing? The climb has been delayed, so hurry up and get ready to start again.", "Villager#ep18_31", bc_self;
		next;
		npctalk "Yes, I have to be punished from today, so it will end sooner than a day.", "Villager#ep18_32", bc_self;
		next;
		npctalk "Then the important issue is over, so let's wrap this up." + strcharinfo(0) + "Thank you again Mr.", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Thank you so much " + strcharinfo(0) + "Sir. You are my lifesaver. Here is a small but small token of my gratitude.", "Camille#ep18_3", bc_self;
		emotion ET_CRY, getnpcid(0, "Villager#ep18_31");
		completequest 12531;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		ep18_1_reputation_exp += 100;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		close2;
		cloakonnpc "Hazar#ep18_3", getcharid(0);
		cloakonnpc "Camille#ep18_3", getcharid(0);
		cloakonnpc "Villager#ep18_31", getcharid(0);
		cloakonnpc "Villager#ep18_32", getcharid(0);
		cloakonnpc "Villager#ep18_33", getcharid(0);
		end;
	}
	end;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12535) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12531) == 1" );
	end;
}

wolfvill,79,213,3	duplicate(dummy_cloaked_npc)	Camille#ep18_3	4_EP18_KAMIL

wolfvill,77,207,8	script	Villager#ep18_33	4_M_RACHMAN1,{
	mes "[Villager]";
	mes "Hmmmm, let's talk about private things later.";
	close;
OnInit:
	cloakonnpc strnpcinfo(0);
	end;
}

wolfvill,74,208,8	script	Villager#ep18_32	4_M_MIDDLE1,{
	mes "[Villager]";
	mes "No time to chat";
	close;
OnInit:
	cloakonnpc strnpcinfo(0);
	end;
}

wolfvill,72,209,8	script	Villager#ep18_31	4_M_MIDDLE,{
	mes "[Villager]";
	mes "It is forbidden to chat during the upper meeting.";
	close;
OnInit:
	cloakonnpc strnpcinfo(0);
	end;
}

// Quest: Transporting Goods. Step 8 + 9 + 10 + 11.
gw_fild01,242,325,4	script	#ep18_12536	4_POINT_RED,5,5,{
	if (isnpccloaked(strnpcinfo(0)) == true)
		end;
	.@quest_id = atoi( replacestr(strnpcinfo(2), "ep18_", "") );
	.@state = isbegin_quest(.@quest_id);
	if (.@state == 1) {
		specialeffect EF_BIG_PORTAL, SELF; // 561
		progressbar_npc "FFFF00",2;
		completequest .@quest_id;
		removespecialeffect 561;
		specialeffect EF_ICECRASH, SELF; // 135

		if (isbegin_quest(12536) == 2 && isbegin_quest(12537) == 2 && isbegin_quest(12538) == 2 && isbegin_quest(12539) == 2)
			setquest 12531;
		cloakonnpc strnpcinfo(0), getcharid(0);
	}
	end;

OnTouch:
	end;

OnInit:
	.@quest_id = atoi( replacestr(strnpcinfo(2), "ep18_", "") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(" + .@quest_id + ") == 1" );
	end;
}
gw_fild01,89,211,4	duplicate(#ep18_12536)	#ep18_12537	4_POINT_RED,5,5
gw_fild01,347,194,4	duplicate(#ep18_12536)	#ep18_12538	4_POINT_RED,5,5
gw_fild01,230,52,4	duplicate(#ep18_12536)	#ep18_12539	4_POINT_RED,5,5

gw_fild01,242,325,0	script	#wp12536	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch_:
	.@quest_id = atoi( replacestr(strnpcinfo(2), "wp", "") );
	if (isbegin_quest(.@quest_id) == 1)
		cloakoffnpc "#ep18_" + .@quest_id, getcharid(0);
	end;
}
gw_fild01,89,211,0	duplicate(#wp12536)	#wp12537	HIDDEN_WARP_NPC,5,5
gw_fild01,347,194,0	duplicate(#wp12536)	#wp12538	HIDDEN_WARP_NPC,5,5
gw_fild01,230,52,0	duplicate(#wp12536)	#wp12539	HIDDEN_WARP_NPC,5,5
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Clinic Construction. Step 1 + 3 + 4 + 5 (final).
wolfvill,171,253,5	script	Ezekiel#hms01	4_M_RACHMAN2,5,5,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(17507) ) {
	case 0:
		if (isbegin_quest(17506) == 1) {
			if (countitem(999) < 3) {
				mes "[Ezekiel]";
				mes "Anything you can get here, but not just steel. It's difficult to import, and you need a lot of facilities to make steel. I'd like a little favor. Only about three...";
				close;
			}
			mes "[Ezekiel]";
			mes "Steel!! When is steel coming! ... is here. You're here, Adventurer. Is it heavy? Please come here. You are precious, but I can't keep you holding it for one second. Thank you. Thank you for your hard work.";
			next;
			mes "[Ezekiel]";
			mes "When this clinic is completed, we will engraved the name of the adventurer on the cornerstone so that the name of the adventurer will be widely known to newborn babies in the future.";
			next;
			emotion ET_SWEAT, playerattached();
			mes "[Ezekiel]";
			mes "Even if the building disappears over the years, the will of the adventurer will remain forever.";
			next;
			select( "No, it's not necessary..." );
			mes "[Ezekiel]";
			mes "With this steel I will now build a clinic like steel. It won't budge even in the wind and rain.";
			next;
			cloakoffnpc "Old man#hms01", getcharid(0);
			cloakoffnpc "Old man#hms02", getcharid(0);
			cloakoffnpc "Old man#hms03", getcharid(0);
			mes "[Old man]";
			mes "No, what are you doing now?";
			npctalk "Didn't I explain it so you could understand?", "Old man#hms03", bc_self;
			next;
			mes "[Old man]";
			mes "Are you planning to build this clinic? Now?";
			next;
			select( "Old people calm their excitement..." );
			mes "[Old man]";
			mes "What and when were we excited? We're talking with the most ice-cold reason, now!";
			npctalk "We don't have the energy to spend like this!", "Old man#hms02", bc_self;
			next;
			mes "[Ezekiel]";
			mes "Why the hell are you doing this? Are you territorial with new immigrants?";
			next;
			mes "[Old man]";
			mes "Oh, we're not like that.";
			npctalk "What? What?", "Old man#hms03", bc_self;
			next;
			mes "[Ezekiel]";
			mes "Then why are you so opposed?";
			next;
			mes "[Old man]";
			mes "The comfortable life you desire is a trap. The foreign, the comfortable. Those things will ruin us.";
			next;
			mes "[Ezekiel]";
			mes "Comfortable living spaces, decent schools, clean clinics. What can we not enjoy? We have been avoiding discrimination, not convenience.";
			next;
			mes "[Ezekiel]";
			mes "What's wrong with living here anyway, having better facilities?";
			next;
			mes "[Old man]";
			mes "No, well, that's what the migrants want?";
			npctalk "Yes!", "Old man#hms01", bc_self;
			next;
			mes "[Old man]";
			mes "To accustom the body to comfort and to make an uncomfortable life intolerable. Live contentedly in the minimum life they provide.";
			mes "They say that if you protest, they will even take it away.";
			next;
			mes "[Old man]";
			mes "How long do you think we will live here? We have no intention of reclaiming our land!";
			npctalk "I mean!", "Old man#hms03", bc_self;
			next;
			mes "[Old man]";
			mes "What I have now is enough, what more do you need?";
			next;
			mes "[Ezekiel]";
			mes "I'm not doing this out of envy. I'm not bringing it here because it's a migrant style. It's a technology and facility that has developed over time, but you don't understand it!";
			next;
			cloakoffnpc "Maram#hms01", getcharid(0);
			cloakoffnpc "Villager#hms01", getcharid(0);
			cloakoffnpc "Injured#hms01", getcharid(0);
			mes "[Joel]";
			mes "Oh, I'm dying. I'm dying...";
			npctalk "Someone beckons from afar...", "Injured#hms01", bc_self;
			next;
			mes "[Maram]";
			mes "Ezekiel!!! It's a big deal!";
			next;
			mes "[Ezekiel]";
			mes "Maram? Why? What's going on?";
			next;
			mes "[Joel]";
			mes "If I die... my fortune I've saved up...! Take me on a ride. How did you collect it! It's unfair! Maram, you keep an eye on it! Don't let a single stone be stolen!";
			emotion ET_CRY, getnpcid(0,"Injured#hms01");
			next;
			mes "[Maram]";
			mes "No, you won't die. Don't say anything sinister.";
			next;
			mes "[Old man]";
			mes "Why is Joel like this?";
			next;
			mes "[Maram]";
			mes "There was an accident while moving the luggage. I think we need to deal with it quickly. Is it possible, Ezekiel?";
			next;
			mes "[Old man]";
			mes "Oh my gosh, why? One leg is completely disabled.";
			next;
			mes "[Old man]";
			mes "Let's see. Hmm...";
			next;
			mes "[Old man]";
			mes "Move to my house immediately. I can't use my legs, but I'll have to put some medicine on it so it doesn't rot.";
			npctalk "What? My leg is rotting??", "Injured#hms01", bc_self;
			npctalk "Can I have the plaster?", "Maram#hms01", bc_self;
			next;
			mes "[Joel]";
			mes "Me, me, do I have to cut off my legs like the old poplar? That's not okay...! I'm so excited I bought a new work boot...!";
			next;
			mes "[Old man]";
			mes "Are the boots a problem now?";
			next;
			mes "[Joel]";
			mes "...Yes, Maram. I have a favor. Can you find someone who doesn't have a left leg but has a strong right leg? I'm going to sell my right boot to him.";
			mes "Senior, please be as smooth as possible.";
			npctalk "size doesn't matter", "Injured#hms01", bc_self;
			next;
			mes "[Ezekiel]";
			mes "I don't cut my leg. I can cure it.";
			next;
			mes "[Old man]";
			mes "What? Are your legs that shape?";
			next;
			mes "[Old man]";
			mes"How can you fix a leg like that...! Hurry up and cut it off and apply some medicine to prevent infection! Don't waste your time holding on to it...!";
			next;
			mes "[Ezekiel]";
			mes "I'm saying you can do it because you can do it. Everyone please get out of the way.";
			next;
			mes "[Maram]";
			mes "Elderly people, trust me first. Ezekiel may look a little out of place in the eyes of the elderly, but he's pretty good, isn't he?";
			npctalk "I didn't take it for nothing.", "Maram#hms01", bc_self;
			next;
			mes "[Old man]";
			mes "No, time is...!";
			next;
			specialeffect EF_HEALSP, AREA, "Injured#hms01";
			mes "[Ezekiel]";
			mes "Ah... if the equipment was right... I could do it faster... I can't help it.";
			next;
			specialeffect EF_REPAIRWEAPON, AREA, "Injured#hms01";
			mes "[Joel]";
			mes "Aaaaaaaaaaaaaaa I'm dying!!!";
			npctalk "Damn!!!", "Old man#hms01", bc_self;
			npctalk "Isn't that how you catch people?", "Old man#hms02", bc_self;
			npctalk "You must stop these people!!!!", "Old man#hms03", bc_self;
			delitem 999,3;	// Steel
			changequest 17506,17507;
			close;
		}
		if (isbegin_quest(17505) == 1) {
			mes "[Ezekiel]";
			mes "Adventurer, how is it? Can I start the construction?";
			next;
			select( "I told you..." );
			mes "[Ezekiel]";
			mes "Ah, is that so? Still, I'm building it on the outskirts so that it doesn't affect other places as much as possible, but I don't think that's possible either.";
			next;
			mes "[Ezekiel]";
			mes "Still, I can't give up. I'll have to gather like-minded people and prepare to persuade me to come back and talk to them.";
			next;
			mes "[Ezekiel]";
			mes "I thought about doing what they said, but I can't. I don't know anything else, but this is absolutely necessary.";
			next;
			mes "[Ezekiel]";
			mes "So, adventurer, I have a favor.";
			next;
			select( "What's going on?" );
			mes "[Ezekiel]";
			mes "Anything you can get here, but not just steel. It's difficult to import, and you need a lot of facilities to make steel. I'd like a little favor. Only about three...";
			next;
			select( "I'll bring you" );
			mes "[Ezekiel]";
			mes "Thank you for willingly accepting. Until you agree with my work and help me... Then I will be preparing for the construction.";
			changequest 17505,17506;
			close3;
		}
		if (isbegin_quest(17504) == 1) {
			mes "[Ezekiel]";
			mes "<NAVI>Convince the [Old man]<INFO>wolfvill,176,111,0,101,0</INFO></NAVI>. It's a necessary facility.";
			close;
		}
		mes "[Ezekiel]";
		mes "Ezekiel, what wealth and glory did you come here to enjoy. What the hell did you do!";
		next;
		mes "[Ezekiel]";
		mes "No. But living here as me is really living life. Am I a permanent stranger there?";
		next;
		cloakoffnpc "Maram#hms01", getcharid(0);
		select( "Who is that...?" );
		mes "[Maram]";
		mes "Shh- wait a minute. Listen to what they have to say. I think you're saying something funny.";
		next;
		mes "[Ezekiel]";
		mes "No, by the way, you are treated like an outsider here as well? Isn't it the same here or there? Then, wouldn't it be better to be more comfortable?";
		mes "Should I just give up and go back?";
		next;
		mes "[Ezekiel]";
		mes "No, but there is something I was aiming for in the beginning. After all, finding my roots...";
		next;
		mes "[Maram]";
		mes "Ezekiel! How are you? What are you muttering to yourself?";
		next;
		mes "[Ezekiel]";
		mes "Maram? Maram?? All right. You know. Listen to me. Busy? Busy, listen to me. Who am I going to tell this to? I don't even have close friends yet. So, listen.";
		npctalk "Okay, okay. I'll listen, so calm down.", "Maram#hms01", bc_self;
		next;
		mes "[Ezekiel]";
		mes "I told you I was going to build a clinic here. I came here and there is no such thing as a decent clinic, so I said I would build one.";
		next;
		mes "[Maram]";
		mes "That's right. That's why I've been looking for a lot of stuff to put in it this time.";
		npctalk "Okay? We'll see about that later. Listen first.", "Ezekiel#hms01", bc_self;
		next;
		mes "[Ezekiel]";
		mes "But, as soon as you open the shovel, the elders here dry you up. They see me as a destroyer of the environment, saying that I have to live in harmony with nature as I did until now. Am I that kind of person?";
		next;
		mes "[Ezekiel]";
		mes "Just building a more sanitary and more modern clinic is such an act of destroying nature and the environment? Can we respond more quickly in case of emergency?";
		next;
		mes "[Maram]";
		mes "No. You're never like that. Everyone else is, but you're never alone.";
		next;
		mes "[Ezekiel]";
		mes "Is that right? But you drove me like that... Am I really trash? I can't do anything right now.";
		next;
		mes "[Maram]";
		mes "If that's the case, talk to Suad. It's too much. It's about wanting everyone to live well together. The clinic isn't against nature. It's true.";
		next;
		mes "[Ezekiel]";
		mes "That's... I've talked to Suad... He said he can't help it and he can't do it on his own.";
		next;
		mes "[Ezekiel]";
		mes "It is necessary to have a clinic, but the opinions of the elderly who have lived here for a long time are that they can't just push it, so they have no choice but to persuade them.";
		next;
		mes "[Maram]";
		mes "I heard that he is too. In any case, you can't ignore the opinions of the elders. It's not like Suad's personality is wielding as much as he wants, ignoring them.";
		next;
		mes "[Ezekiel]";
		mes "So... I... go back to Rachel... what do you think?";
		next;
		mes "[Maram]";
		mes "What? You came all the way here to go back?";
		next;
		mes "[Ezekiel]";
		mes "No, I didn't intend to go back... That's what people are. I came here to live a better life, but if it's the same here or there, wouldn't you want to be more comfortable...";
		next;
		mes "[Ezekiel]";
		mes "So I mean... you're thinking. When did I say I was going to cut it off and go back? Will you not listen to me?";
		next;
		mes "[Maram]";
		mes "Hmm... But I think the clinic is absolutely necessary. How can I persuade you well...";
		next;
		mes "[Maram]";
		mes "Yes! I think an adventurer can help you? Hey, this adventurer is very good at talking? Doesn't it make you believe just by looking at his face? It's just an award that adults will like.";
		next;
		mes "[Maram]";
		mes "He was kind and helped us from purchasing materials to transporting them.";
		next;
		mes "[Ezekiel]";
		mes "You are a good person. You are a good person. You are, but...";
		next;
		mes "[Ezekiel]";
		mes "...really such a person is liked by adults? Very... those... stubborn people.";
		npctalk "You wrap up the word stubbornness well.", "Maram#hms01", bc_self;
		next;
		mes "[Maram]";
		mes "It's only the bottom line. Even if you can't convince you, there's nothing more than listening to a nag? Is that adventurer going to listen to you instead?";
		npctalk "Oh, that's nice?", "Ezekiel#hms01", bc_self;
		next;
		mes "[Ezekiel]";
		mes "Then... Shall I ask you a favor?";
		mes "Adventurer, I have a favor. We need a state-of-the-art clinic here, though not as big as Rachel.";
		next;
		mes "[Ezekiel]";
		mes "Now, if you get hurt or get sick, you have no choice but to rely on folk remedies from ancient times.";
		npctalk "Ah, I know what it is! He put some mysterious plaster on the wound!", "Maram#hms01", bc_self;
		next;
		mes "[Ezekiel]";
		mes "There are medicines and medical tools that Rachel brings in little by little, but they are not enough. There is no suitable environment to use them.";
		next;
		mes "[Ezekiel]";
		mes "However, there is no way for me to convince those who oppose it. So, <NAVI>[Old man]<INFO>wolfvill,176,111,0,101,0</INFO></NAVI> ask an adventurer called the Freepass Award I'll give it to you.";
		next;
		mes "[Maram]";
		mes "Please, please. In the meantime, I will also meet other people.";
		setquest 17504;
		cloakonnpc "Maram#hms01", getcharid(0);
		navigateto("wolfvill",176,111);
		close;
	case 1:
		specialeffect EF_PHARMACY_OK, AREA, "Injured#hms01";
		specialeffect EF_HEALSP, AREA, "Injured#hms01";
		mes "[Ezekiel]";
		mes "How do you feel? If you don't overdo it for a while, eat good food, and take a good rest while thinking good thoughts, you will be able to walk or do a light run.";
		next;
		mes "[Joel]";
		mes "Am I alive?? Did I buy?? Is my leg okay??";
		next;
		mes "[Maram]";
		mes "Uh, that's why you're saying that, right?";
		next;
		mes "[Joel]";
		mes "Thank you so much!! You protected my boots! What's your name? I'll take good care of you in the future. You are my benefactor. Yoel will never forget my benefactor. Forever.";
		next;
		mes "[Old man]";
		mes "Hey, how did you save a broken leg?";
		next;
		mes "[Ezekiel]";
		mes "Because that's what I learned. If the clinic had been properly equipped, it would have been a more complete treatment and a faster recovery.";
		next;
		mes "[Old man]";
		mes "Ho... Is everyone doing that these days?";
		next;
		mes "[Ezekiel]";
		mes "That's right. It doesn't damage your legs. As long as you do it properly.";
		next;
		mes "[Old man]";
		mes "You mean you can do that faster and more appropriately if you have a clinic?";
		next;
		mes "[Ezekiel]";
		mes "Yes...? Is it...?";
		next;
		mes "[Old man]";
		mes "Hmm... that's the way it is these days? Adventurers there, really?";
		next;
		select( "Everything is like this these days." );
		mes "[Ezekiel]";
		mes "As I said, it is not the technology of migrants, but the technology and facilities of the advanced age.";
		next;
		mes "[Old man]";
		mes "Hang on, I don't think it's something that you're just going to oppose.";
		npctalk "Looks very useful.", "Old man#hms01", bc_self;
		next;
		mes "[Old man]";
		mes "Is that right? I think so. It's about saving people. If we do it our way, we can save the dead.";
		npctalk "If only the poplar house did this...", "The old man#hms02", bc_self;
		next;
		mes "[Old man]";
		mes "Hmm... that clinic, how long will it take to build it?";
		next;
		mes "[Ezekiel]";
		mes "Yes...? It is, it depends on manpower and capital.";
		next;
		mes "[Old man]";
		mes "We will support you as much as possible. Build it once.";
		npctalk "I'll give it to you anyway.", "Old man#hms03", bc_self;
		next;
		mes "[Old man]";
		mes "Instead, it should fit into the way of life here, to the mood of the place.";
		npctalk "Because old people here have a hard time adapting to new things.", "Old man#hms02", bc_self;
		next;
		mes "[Ezekiel]";
		mes "That's it... I see.";
		next;
		mes "[Maram]";
		mes "Hey, you've taken good care of the elders. This is really necessary. I'm thankful for everything.";
		next;
		mes "[Old man]";
		mes "Is there anything else you need here?";
		next;
		mes "[Old man]";
		mes "What? Will you accept more than a clinic?";
		next;
		mes "[Old man]";
		mes "Can't you feel anything while watching that? As time goes by, you have to live according to the way it flows. You can't be stubborn forever.";
		next;
		mes "[Old man]";
		mes "Well, even if we get back to our homeland, we're not going to live the way we are now. We're already living the way we used to.";
		next;
		mes "[Old man]";
		mes "Hey, young man. If you have anything else important or necessary, tell me. We'll think about it.";
		next;
		mes "[Ezekiel]";
		mes "I will. I will build the clinic as much as possible according to the elders' advice.";
		next;
		mes "[Old man]";
		mes "Yes. You know how long we won't be living here?";
		next;
		mes "[Ezekiel]";
		mes "Yes! I think so.";
		next;
		mes "[Old man]";
		mes "Well then, we can go. You've worked hard today.";
		next;
		cloakonnpc "Old man#hms01", getcharid(0);
		cloakonnpc "Old man#hms02", getcharid(0);
		cloakonnpc "Old man#hms03", getcharid(0);
		mes "[Maram]";
		mes "Take a look!!!";
		mes "Whoa- I'm really happy, right?";
		next;
		mes "[Ezekiel]";
		mes "That's it.. isn't it? But it's so sudden that it's embarrassing??";
		next;
		mes "[Maram]";
		mes "Even the elders have changed their minds after seeing them with their own eyes. I think it's good. Now, then, should we build what we built now?";
		next;
		mes "[Ezekiel]";
		mes "Yeah. But before that, I think we need to change the design to suit this place first.";
		next;
		mes "[Maram]";
		mes "The adventurer will help you, right?";
		next;
		select( "Yeah... that's right..." );
		mes "[Maram]";
		mes "If you have any equipment or tools you need, tell me in advance. I'll bring it to you next time.";
		mes "Joel, let's go and get some rest.";
		next;
		mes "[Joel]";
		mes "Goodbye, my benefactor. I'll be back soon!";
		emotion ET_THROB, getnpcid(0,"Injured#hms01");
		next;
		cloakonnpc "Maram#hms01", getcharid(0);
		cloakonnpc "Villager#hms01", getcharid(0);
		cloakonnpc "Injured#hms01", getcharid(0);
		mes "[Ezekiel]";
		mes "Adventurer, thank you very much for your help. This is what I got while I settled here, I don't need anything... I'll give it to the adventurer. As a sign of wishing you well in the future.";
		next;
		mes "[Ezekiel]";
		mes "Well then, see you next time. Maybe I can ask you a favor, so please stop by often!";
		completequest 17507;
		mes "^4d4dff A favorable rating for you occurs.^000000";
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		ep18_1_reputation_exp += 100;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		close;
	case 2:
		break;
	}
	// daily
	switch( checkquest(17509,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Ezekiel]";
		mes "Ugh, it's hard. Adventurer, what's going on here. The thing you brought me is under construction... It's dangerous if you're here, so come back after dawn.";
		close;
	case 2:
		erasequest 17509;
		break;
	}
	switch( isbegin_quest(17508) ) {
	case 0:
		mes "[Ezekiel]";
		mes "Hello, adventurer.";
		next;
		select("Is the construction going well?");
		mes "[Ezekiel]";
		mes "Of course. But still we are short of some supplies, such as steel or berry crystals.";
		next;
		mes "[Ezekiel]";
		mes "A lot of crystals are used here. It's very hard, so it's good to use everywhere.";
		next;
		if (select( "I'll save you", "I want to save you..." ) == 2)
			end;
		mes "[Ezekiel]";
		mes "Wow, thank you so much!";
		next;
		mes "[Ezekiel]";
		mes "I would like 1 steel and 10 berry tandan crystals, please. You can get berry tandan crystals from the gray wolf.";
		mes "I'll wait!";
		setquest 17508;
		close;
	case 1:
		if (countitem(999) < 1 || countitem(1000406) < 10) {
			mes "[Ezekiel]";
			mes "I would like 1 steel and 10 berry tandan crystals, please. You can get berry tandan crystals from the gray wolf.";
			mes "I'll wait!";
			close;
		}
		mes "[Ezekiel]";
		mes "Adventurer, you've worked hard. I'm always grateful. I'll take a break today and see you again after dawn!";
		delitem 999,1;	// Steel
		delitem 1000406,10;	// Ep18_Very_Ddan_Crystal
		erasequest 17508;
		setquest 17509;
		ep18_1_reputation_exp += 30;
		if (ep18_1_reputation_exp >= 5000)
			.@bonus = 1;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close;
	case 2:	// impossible
		end;
	}
	end;

OnTouch:
	if (isbegin_quest(17504) == 0 && isbegin_quest(17505) == 0 && isbegin_quest(17506) == 0 && isbegin_quest(17507) == 0)
		npctalk "What wealth and glory did you come here to enjoy. What did you do?", "Ezekiel#hms01", bc_self;
	else if (isbegin_quest(17507) == 1) {
		cloakoffnpc "Old man#hms01", getcharid(0);
		cloakoffnpc "Old man#hms02", getcharid(0);
		cloakoffnpc "Old man#hms03", getcharid(0);
		cloakoffnpc "Maram#hms01", getcharid(0);
		cloakoffnpc "Villager#hms01", getcharid(0);
		cloakoffnpc "Injured#hms01", getcharid(0);
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(17504) == 0 && isbegin_quest(17505) == 0 && isbegin_quest(17506) == 0 && isbegin_quest(17507) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17505) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17506) == 1 && countitem(999) >= 2" );	// Steel
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17507) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17507) == 2 && isbegin_quest(17508) == 0 && (checkquest(17509,PLAYTIME) == -1 || checkquest(17509,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17508) == 1 && countitem(999) > 0 && countitem(1000406) > 9" );
	end;
}

wolfvill,174,252,3	duplicate(dummy_cloaked_npc)	Maram#hms01	4_EP18_MARAM
wolfvill,175,249,1	duplicate(dummy_cloaked_npc)	Old man#hms01	4_EP18_GW_OLD01
wolfvill,173,247,1	duplicate(dummy_cloaked_npc)	Old man#hms02	4_EP18_GW_OLD02
wolfvill,170,248,7	duplicate(dummy_cloaked_npc)	Old man#hms03	4_EP18_GW_MIDDLE01
wolfvill,170,251,5	duplicate(dummy_cloaked_npc)	Villager#hms01	4_M_RACHMAN1
wolfvill,172,250,1	duplicate(dummy_cloaked_npc)	Injured#hms01	4_M_DIEMAN

// Quest: Clinic Construction. Step 2.
wolfvill,174,111,5	script	Old man#hms05	4_EP18_GW_OLD02,{
	mes "[Old man]";
	mes "If you have any difficulties in life, tell me.";
	close;
}

wolfvill,178,110,3	script	Old man#hms06	4_EP18_GW_MIDDLE01,{
	mes "[Old man]";
	mes "Do you have any questions?";
	close;
}

wolfvill,176,111,3	script	Old man#hms04	4_EP18_GW_OLD01,{
	if (ep18_1_main < 36)
		end;
	if (isbegin_quest(17504) == 1) {
		mes "[Old man]";
		mes "The people who came in this time must also adapt well.";
		next;
		mes "[Old man]";
		mes "We should take another look.";
		next;
		mes "[Old man]";
		mes "I hate it when I visit you too often. Do you think it's the same as ours?";
		next;
		mes "[Old man]";
		mes "Now, if you want to live here in the future, you have to agree. If you follow the rules here, we can all live in harmony. Cancer.";
		next;
		mes "[Old man]";
		mes "Whether it's the same as ours or not, it's easy to get used to if we talk more than once.";
		npctalk "All my peers have adapted like that.", "Old man#hms05", bc_self;
		next;
		select( "I..." );
		mes "[Old man]";
		mes "Who are you? It's a face you haven't seen before?";
		npctalk "Are you new here?", "Old man#hms05", bc_self;
		npctalk "Isn't that right? I don't remember?", "Old man#hms06", bc_self;
		next;
		mes "[Old man]";
		mes "Oh, you've been here again? Haven't you been here recently? Are you able to come often now?";
		next;
		mes "[Old man]";
		mes "Welcome, welcome. If there is anything difficult, please ask.";
		next;
		mes "[Old man]";
		mes "Everyone here doesn't bother with that, so feel free to ask.";
		next;
		select( "I came to the clinic for a problem..." );
		mes "[Old man]";
		mes "What? Clinic? It's probably not the same clinic you used to do, right?";
		npctalk "That's right. Anything other than that.", "Old man#hms05", bc_self;
		next;
		mes "[Old man]";
		mes "I think I spoke well to everyone at the time. You don't need to build a clinic, don't build it.";
		next;
		mes "[Old man]";
		mes "It is enough to treat now, and you can do it in an existing place like now.";
		next;
		mes "[Old man]";
		mes "Isn't everyone living like this without them?";
		next;
		select( "Because medical facilities are important" );
		mes "[Old man]";
		mes "No, what? So it's because we don't care? Are we short?";
		npctalk "We're not being grumpy for no reason.", "Old man#hms06", bc_self;
		next;
		mes "[Old man]";
		mes "We know that it's good. It's comfortable and it's good. But it's because you don't have to get used to it.";
		next;
		mes "[Old man]";
		mes "Once we become accustomed to the lives of migrants, we end up getting immersed in them and later we will not be able to live without their convenience.";
		npctalk "That's what those who occupy our land want.", "Old man#hms05", bc_self;
		next;
		mes "[Old man]";
		mes "Cancer. Just being here is enough, you shouldn't lean on it. That's losing.";
		next;
		select( "But it's a necessary facility." );
		mes "[Old man]";
		mes "Well, so far we haven't had enough. If it wasn't enough, we wouldn't have survived here for so long.";
		next;
		mes "[Old man]";
		mes "I think that's the case. I didn't understand you even though you talked well.";
		next;
		mes "[Old man]";
		mes "If you're going to live here from now on, you'd better forget all the life over there as soon as possible.";
		next;
		mes "[Old man]";
		mes "The sooner you adjust to life here, the better off you are.";
		next;
		select( "I'm not... I'm not here..." );
		mes "[Old man]";
		mes "What? It's not even from here? How can a foreigner be meddling like this?";
		next;
		mes "[Old man]";
		mes "Calm down. It can be. You helped the kids, so don't be angry.";
		next;
		mes "[Old man]";
		mes "As for the clinic case, we'll go to <NAVI>[he]<INFO>wolfvill,171,253,0,101,0</INFO></NAVI> and talk to him one more time, so I hope outsiders get out of this business. ";
		erasequest 17504;
		setquest 17505;
		navigateto("wolfvill",171,253);
		close;
	}
	mes "[Old man]";
	mes "I'll have to go to the newcomers.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17504) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Checking Traps for Food. Step 1 + 3 (final).
wolfvill,197,170,5	script	Larama#ep18	4_M_DESERT,{
	if (rand(2))
		mes "He is busy sharpening his knife, so I call, but there is no answer.";
	else {
		mes "[Larama]";
		mes "Ah~ I'm busy right now. I'll talk later.";
	}
	close;
}

wolfvill,202,166,3	script	Eruin#ep18	4_F_SHABBY,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8688) ) {
	case 0:
		mes "[Eruin]";
		mes "...they said an adventurer came.";
		mes "Looking around, looking for something to do?";
		next;
		if (select( "yes", "no" ) == 2)
			end;
		mes "[Eruin]";
		mes "I am in charge of livestock and wildlife observation with Larama and her family over there.";
		mes "It's my job to maintain knives and other cutlery.";
		npctalk "Take care of Grandma Eruin~!", "Larama#ep18", bc_self;
		next;
		mes "[Eruin]";
		mes "...Hehehe.";
		npctalk "Hehehe.", "Larama#ep18", bc_self;
		next;
		mes "[Eruin]";
		mes "Any job worth entrusting to an outsider is just checking out the traps we've set up this morning.";
		mes "Can you do it?";
		next;
		select("It's not that difficult" );
		mes "[Eruin]";
		mes "It's good that the answer is quick.";
		mes "...";
		next;
		setquest 8688;
		mes "[Eruin]";
		mes "<NAVI>[Grey Wolf Forest]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI> If you look here and there, you will find several traps.";
		mes "If there is something hanging, please collect about 5.";
		mes "If you leave the remaining bait alone, it will catch something again, so you'll have to wait and see.";
		next;
		mes "[Eruin]";
		mes "Please do your best.";
		close;
	case 1:
		.@trap01 = countitem(1000412);
		.@trap02 = countitem(1000413);
		.@trap03 = countitem(1000414);
		if ((.@trap01 + .@trap02 + .@trap03) < 5) {
			mes "[Eruin]";
			mes "<NAVI>[Grey Wolf Forest]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI> I'd like to collect 5 or so of the traps.";
			close;
		}
		if (.@trap01 > 0)
			delitem 1000412, .@trap01;
		if (.@trap02 > 0)
			delitem 1000413, .@trap02;
		if (.@trap03 > 0)
			delitem 1000414, .@trap03;

		completequest 8688;
		setquest 8689;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes "^4d4dff A favorable rating for you occurs.^000000";
		ep18_1_reputation_exp += 100;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		next;
		mes "[Eruin]";
		mes "...Okay. Good job.";
		mes "If you are free enough to be here tomorrow as well, can I ask you again?";
		next;
		if (select( "Okay", "I think I'll be busy tomorrow" ) == 2)
			end;
		mes "[Eruin]";
		mes "That's good.";
		mes "He does not refuse help. Thank you.";
		close;
	case 2:
		break;
	}

	// daily
	switch( checkquest(8689,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Eruin]";
		mes "Go back and rest today.";
		close;
	case 2:
		erasequest 8689;
		break;
	}
	switch( isbegin_quest(8690) ) {
	case 0:
		mes "[Eruin]";
		mes "Are you here? It looks like you're taking a break from looking around again.";
		next;
		switch( select( "go to investigate the trap", "talk", "stop" ) ) {
		case 1:
			break;
		case 2:
			end;
		case 3:
			end;
		}
		mes "[Eruin]";
		mes "If you help me, I have a lot of other things to do, so I'd appreciate it.";
		mes "<NAVI>[Grey Wolf Forest]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI> If you look here and there, you will find several traps.";
		mes "If there is something hanging, please bring back 5 of them.";
		next;
		if (select( "accept", "reject" ) == 2)
			end;
		setquest 8690;
		mes "[Eruin]";
		mes "If you leave the remaining bait alone, it will catch something again, so you'll have to wait and see.";
		mes "Please do your best.";
		close;
	case 1:
		.@trap01 = countitem(1000412);
		.@trap02 = countitem(1000413);
		.@trap03 = countitem(1000414);
		if ((.@trap01 + .@trap02 + .@trap03) < 5) {
			mes "[Eruin]";
			mes "<NAVI>[Grey Wolf Forest]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI> I'd like to collect 5 or so of the traps.";
			close;
		}
		if (.@trap01 > 0)
			delitem 1000412, .@trap01;
		if (.@trap02 > 0)
			delitem 1000413, .@trap02;
		if (.@trap03 > 0)
			delitem 1000414, .@trap03;

		erasequest 8690;
		setquest 8689;
		ep18_1_reputation_exp += 30;
		if (ep18_1_reputation_exp >= 5000)
			.@bonus = 1;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		mes "[Eruin]";
		mes "...Okay. Good job.";
		mes "If you are free enough to be here tomorrow as well, can I ask you again?";
		next;
		if (select( "Okay", "I think I'll be busy tomorrow" ) == 2)
			end;
		mes "[Eruin]";
		mes "That's good.";
		mes "He does not refuse help. Thank you.";
		close;
	case 2:	// impossible
		end;
	}
	end;

OnInit:
	// note: the questinfo on official is never removed except by PLAYTIME == 1
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(8688) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8688) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8688) == 2 && isbegin_quest(8690) == 0 && (checkquest(8689,PLAYTIME) == -1 || checkquest(8689,PLAYTIME) == 2)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8690) == 1" );
	
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(8688) == 0" );
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8688) == 1 && (countitem(1000412)+countitem(1000413)+countitem(1000414)) > 4" );
	// questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8688) == 2 && isbegin_quest(8690) == 0 && (checkquest(8689,PLAYTIME) == -1 || checkquest(8689,PLAYTIME) == 2)" );
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8690) == 1 && (countitem(1000412)+countitem(1000413)+countitem(1000414)) > 4" );
	end;
}

// Quest: Checking Traps for Food. Step 2.
gw_fild01,24,122,0	script	Installed trap#01	CLEAR_NPC,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_1_main < 36)
		end;
	if (isbegin_quest(8688) == 1 || isbegin_quest(8690) == 1) {
		.@amount = countitem(1000412) + countitem(1000413) + countitem(1000414);
		if (.@amount >= 5) {
			mes "Today we have recovered enough of the traps.";
			mes "Let's bring it to <NAVI>[Eruin]<INFO>wolfvill,202,166,0,101,0</INFO></NAVI>";
			close;
		}
		specialeffect2 EF_STEAL;
		progressbar "FFFF00",10;
		.@r = rand(1,5);
		if (.@r == 1)
			getitem 1000412,1;	// Ep18_Trapped01
		else if (.@r == 2)
			getitem 1000413,1;	// Ep18_Trapped02
		else if (.@r == 3)
			getitem 1000414,1;	// Ep18_Trapped03
		else
			mes "I didn't get anything...";
		disablenpc strnpcinfo(0);
		initnpctimer;
		end;
	}
	end;
OnTimer60000:
	enablenpc strnpcinfo(0);
	stopnpctimer;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(8688) == 1" );
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(8690) == 1" );
	end;
}
gw_fild01,93,113,0	duplicate(Installed trap#01)	Installed trap#02	CLEAR_NPC
gw_fild01,106,126,0	duplicate(Installed trap#01)	Installed trap#03	CLEAR_NPC
gw_fild01,213,130,0	duplicate(Installed trap#01)	Installed trap#04	CLEAR_NPC
gw_fild01,267,156,0	duplicate(Installed trap#01)	Installed trap#05	CLEAR_NPC
gw_fild01,229,205,0	duplicate(Installed trap#01)	Installed trap#06	CLEAR_NPC
gw_fild01,192,210,0	duplicate(Installed trap#01)	Installed trap#07	CLEAR_NPC
gw_fild01,153,212,0	duplicate(Installed trap#01)	Installed trap#08	CLEAR_NPC
gw_fild01,121,245,0	duplicate(Installed trap#01)	Installed trap#09	CLEAR_NPC
gw_fild01,86,327,0	duplicate(Installed trap#01)	Installed trap#10	CLEAR_NPC
gw_fild01,126,356,0	duplicate(Installed trap#01)	Installed trap#11	CLEAR_NPC
gw_fild01,175,339,0	duplicate(Installed trap#01)	Installed trap#12	CLEAR_NPC
gw_fild01,192,361,0	duplicate(Installed trap#01)	Installed trap#13	CLEAR_NPC
gw_fild01,232,319,0	duplicate(Installed trap#01)	Installed trap#14	CLEAR_NPC
gw_fild01,257,297,0	duplicate(Installed trap#01)	Installed trap#15	CLEAR_NPC
gw_fild01,249,245,0	duplicate(Installed trap#01)	Installed trap#16	CLEAR_NPC
gw_fild01,303,276,0	duplicate(Installed trap#01)	Installed trap#17	CLEAR_NPC
gw_fild01,325,254,0	duplicate(Installed trap#01)	Installed trap#18	CLEAR_NPC
gw_fild01,335,241,0	duplicate(Installed trap#01)	Installed trap#19	CLEAR_NPC
gw_fild01,308,318,0	duplicate(Installed trap#01)	Installed trap#20	CLEAR_NPC
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Firewind Kites. Step 1 + 2 + 3 (final).
wolfvill,147,97,5	script	Ahir#ep18	4_M_DST_CHILD,3,3,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_1_main < 36)
		end;
	if (isbegin_quest(16548) != 2) {
		switch( checkquest(16548,HUNTING) ) {
		case -1:
			mes "[Ahir]";
			mes "Ha-am... Huh? Someone I haven't seen. Are you a new member of the Gray Wolf Village?";
			mes "Ahhh...";
			next;
			select( "Did you not sleep well at night?" );
			mes "[Ahir]";
			mes "Yes, I haven't slept.";
			mes "Ha-a-am in the forest of gray wolves, when you lie down to sleep, you can hear all kinds of noises.";
			next;
			mes "[Ahir]";
			mes "The sound of bugs, the sound of adults talking, the sound of animals...";
			mes "The most disturbing thing is the sounds of all kinds of monsters.";
			next;
			mes "[Ahir]";
			mes "Huam Among them, the sound of a kite chirping is the scariest.";
			mes "Even adults are worried about when the fire will come and burn the whole village.";
			next;
			mes "[Ahir]";
			mes "It's really scary to cry with a suppressed voice with an embers in your mouth...";
			mes "Ugh, my body is shaking just thinking about it.";
			next;
			select( "I'm an adventurer, would you like me to hunt?" );
			mes "[Ahir]";
			mes "Wow! Were you an adventurer?";
			mes "Then I'll be sure to ask!";
			next;
			mes "[Ahir]";
			mes "Can't you just catch 30 " + strmobinfo(1,21306) + "?";
			mes "If you hunt a herd, the " + strmobinfo(1,21306) + " may be holding their breath tonight.";
			next;
			switch( select( "Leave it to me!", "Oops, I'm in trouble now." ) ) {
			case 1:
				mes "[Ahir]";
				mes "wow, thank you. Adventurer!";
				mes "30 fire and wind kites. I'll be sure to ask for it.";
				next;
				mes "[Ahir]";
				mes "If you come back from hunting and tell me, I will prepare even a small reward!";
				setquest 16548;
				close;
			case 2:
				end;
			}
		case 0:
		case 1:
			mes "[Ahir]";
			mes "Thank you. Adventurer! Thirty " + strmobinfo(1,21306) + ". I'll be sure to ask for it.";
			close;
		case 2:
			mes "[Ahir]";
			mes "Thank you! The chirping sound of the windstorm kite has definitely been reduced!";
			mes "I can sleep comfortably tonight.";
			next;
			mes "[Ahir]";
			mes "Okay, it probably won't last long.";
			mes "It will increase again tomorrow, but I hope you will come again after dawn and catch a " + strmobinfo(1,21306) + ".";
			next;
			mes "[Ahir]";
			mes "This is a thank you for letting me sleep well tonight.";
			mes "Please accept even a small heart, adventurer.";
			completequest 16548;
			setquest 16550;
			getitem 1000405,20;	// Ep18_Amethyst_Fragment
			getexp 7769124,3000000;
			mes " ";
			mes "^4d4dff A favorable rating for you occurs.^000000";
			ep18_1_reputation_exp += 100;
			if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
				ep18_1_main = 37;
				setquest 18082;
				mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
				mes "You are eligible to participate in the ^4d4dff conference.^000000";
			}
			close;
		}
	}
	switch( checkquest(16550,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Ahir]";
		mes "It looks like the " + strmobinfo(1,21306) + " is still lurking.";
		mes "If you provoke me now, it might be more noisy because of evil.";
		next;
		mes "[Ahir]";
		mes "Will you come back after dawn and catch a " + strmobinfo(1,21306) + "?";
		mes "I beg you, Adventurer.";
		close;
	case 2:
		erasequest 16550;
		break;
	}
	switch( checkquest(16549,HUNTING) ) {
	case -1:
		mes "[Ahir]";
		mes "Ha-am, I'm so sleepy today.";
		mes "Adventurer, won't you just catch 30 " + strmobinfo(1,21306) + "?";
		next;
		mes "[Ahir]";
		mes "If you hunt a pack, the " + strmobinfo(1,21306) + " will be holding their breath tonight.";
		next;
		switch( select( "Hold it", "Do not grab it" ) ) {
		case 1:
			mes "[Ahir]";
			mes "Wow, thank you. Adventurer!";
			mes "30 " + strmobinfo(1,21306) + ". I'll be sure to ask for it.";
			next;
			mes "[Ahir]";
			mes "If you come back from hunting and tell me, I will prepare even a small reward!";
			setquest 16549;
			close;
		case 2:
			end;
		}
		end;
	case 0:
	case 1:
		mes "[Ahir]";
		mes "Thank you. Adventurer! Thirty " + strmobinfo(1,21306) + ". I'll be sure to ask for it.";
		close;
	case 2:
		mes "[Ahir]";
		mes "Thank you! The chirping sound of the windstorm kite has definitely been reduced!";
		mes "I can sleep comfortably tonight.";
		next;
		mes "[Ahir]";
		mes "Okay, it probably won't last long.";
		mes "It will increase again tomorrow, but I hope you will come again after dawn and catch a " + strmobinfo(1,21306) + ".";
		next;
		mes "[Ahir]";
		mes "This is a thank you for letting me sleep well tonight.";
		mes "Please accept even a small heart, adventurer.";
		erasequest 16549;
		setquest 16550;
		ep18_1_reputation_exp += 30;
		if (ep18_1_reputation_exp >= 5000)
			.@bonus = 1;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 10318080,3000000;
		close;
	}
	end;

OnTouch_:
	npctalk "Ahir: I'm sleepy... so tired.", "", bc_self;
	end;

OnInit:
	// first completion
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16548,HUNTING) == -1 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16548,HUNTING) == 2" );

	// daily
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(16548) == 2 && checkquest(16549,HUNTING) == -1 && (checkquest(16550,PLAYTIME) == -1 || checkquest(16550,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16549,HUNTING) == 2" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Childhood Friends. Step 1.
wolfvill,182,82,5	script	Alber#ep18	4_M_RACHMAN1,{
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8718) ) {
	case 0:
		mes "[Alber]";
		mes "If you ever want to go back to Rachel, won't you do one thing for me?";
		next;
		mes "[Alber]";
		mes "To be honest... I have a friend of mine who worked as a waitress at Rachel's hotel.";
		mes "If you haven't come here yet, you're probably still working there.";
		next;
		mes "[Alber]";
		mes "Me and my friend... Horim has lived next door since childhood.";
		mes "I used to live in Rachel. But, I just couldn't stand it...";
		next;
		mes "[Alber]";
		mes "Their family and my family decided to knit Rachel.";
		mes "But Horimman said he would stay with Rachel.";
		mes "We couldn't delay any longer, so we left him and moved here.";
		next;
		mes "[Alber]";
		mes "Rachel is a big city, but now she is alone.";
		mes "...";
		mes "If it's okay with you, can you stop by and see how you live?";
		next;
		switch( select( "I do", "I don't have time to go" ) ) {
		case 1:
			mes "[Alber]";
			mes "Thank you";
			mes "Just... stop by. You don't have to report to me.";
			setquest 8718;
			navigateto("ra_in01",388,59);
			close;
		case 2:
			end;
		}
		end;
	case 1:
		mes "[Alber]";
		mes "You don't have to report to me.";
		mes "You only need to check that Horim is doing well.";
		close;
	case 2:
		mes "[Alber]";
		mes "Has he met the boy?";
		mes "Yes.";
		mes "...yes.";
		mes "I said everything I couldn't say when I left.";
		mes "Now I have no regrets left.";
		next;
		mes "[Alber]";
		mes "It feels like a gray forest is shining.";
		mes "I can't.";
		mes "All adventurers, thanks to you.";
		mes "Thank you.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8718) == 0 && isbegin_quest(11724) == 2" );
	end;
}

// Quest: Childhood Friends. Step 2.
ra_in01,386,44,0	script	#ep18w01_	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (isbegin_quest(8718) == 1) {
		cloakoffnpc "Employee#ep1800", getcharid(0);
		cloakoffnpc "Employee#ep1801", getcharid(0);
	}
	end;
}	

ra_in01,388,59,5	script	Employee#ep1800	4_M_RACHMAN2,{
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8718) ) {
	case 0:
		end;
	case 1:
		mes "[Employee]";
		mes "...!";
		mes "Adventurer, you smell of volcanic ash.";
		mes "Thor Volcano... No.";
		next;
		mes "The employee looked around for a moment and spoke in a low voice.";
		next;
		mes "[Employee]";
		mes "Maybe the road to the gray wolf forest...";
		next;
		switch( select( "I know", "I don't know" ) ) {
		case 1:
			mes "[Employee]";
			mes "...can you guide me there?";
			mes "Really... I really want to go there.";
			next;
			mes "[Employee]";
			mes "I know it's a dangerous road. I'm not an adventurer...";
			mes "But I really have no way to get there.";
			next;
			mes "[Employee]";
			mes "My friends and family said they were leaving, so I told them to hold on a bit longer...";
			mes "I thought I was going to get in the way, so they all ran away one night.";
			mes "Then, of course, the news was cut off...";
			next;
			mes "[Employee]";
			mes "Please take me there";
			mes "I don't have anyone anymore";
			next;
			select( "Something went wrong?" );
			mes "He smiled bitterly, not yet finished introducing himself.";
			next;
			mes "[Employee]";
			mes "That's right, what am I talking about to someone I've never met?";
			mes "My name is Horim.";
			mes "The Adventurer is...";
			mes "" + strcharinfo(0) + "Your name?";
			next;
			mes "[Horim]";
			mes "So... " + strcharinfo(0) + "Sir.";
			mes "Once you've been there, it means that you know the current situation <B>we</B> are in.";
			next;
			mes "[Horim]";
			mes "It was better than now until my family left.";
			mes "It doesn't look any different now and then...";
			next;
			mes "[Horim]";
			mes "Now... it looks fine on the outside. There are various policies. But inside, it's stinky...";
			mes "When I go out on the street, it's hard to even hear laughter. It's like someone is cursing me or us.";
			mes "I can't stand it anymore...";
			next;
			select( "Once started..." );
			mes "[" + strcharinfo(0) + "]";
			mes "Started once, twice or three times the same.";
			next;
			mes "[Horim]";
			mes "...Thank you. Thank you so much...";
			next;
			mes "Horim barely squeezed a word of thanks and sighed in relief.";
			next;
			npctalk "Employee: Yes~", "Employee#ep1801", bc_self;
			mes "[Horim]";
			mes "...I'm sorry. I'm a little busy right now, so I guess I'll have to go.";
			next;
			mes "[Horim]";
			mes "See you later, outside Rachel's West Gate.";
			completequest 8718;
			setquest 8698;
			cloakonnpc "Employee#ep1800", getcharid(0);
			cloakonnpc "Employee#ep1801", getcharid(0);
			close;
		case 2:
			end;
		}
	}
	end;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8718) == 1" );
	end;
}

ra_in01,388,63,5	duplicate(dummy_cloaked_npc)	Employee#ep1801	4_M_03

// Quest: Childhood Friends. Step 3.
ra_fild11,355,226,0	script	#ep18w02__	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8698) == 1)
		cloakoffnpc "Horim#ep1810", getcharid(0);
	end;
}

ra_fild11,350,236,0	script	#Horim01	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8698) == 1)
		cloakoffnpc "Horim#ep1810", getcharid(0);
	end;
}

ra_fild11,350,236,3	script	Horim#ep1810	4_M_RACHMAN2,{
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8698) ) {
	case 0:
		end;
	case 1:
		mes "[Horim]";
		mes "...Oh, adventurer.";
		mes "Actually I've never been farther from the city than here.";
		next;
		mes "[Horim]";
		mes "Then where is my hometown?";
		mes "Is it Rachel?";
		next;
		mes "[Horim]";
		mes "If you have never felt comfortable wherever you are...";
		mes "Is it right to leave Rachel...?";
		next;
		mes "[Horim]";
		mes "...that was too long.";
		mes "Which direction is it from here?";
		mes "I will follow you wherever you go.";
		navigateto("ra_fild10",375,293);
		changequest 8698,8699;
		cloakonnpc "Horim#ep1810", getcharid(0);
		next;
		mes "Let's head back to the gray wolf forest.";
		navigateto("ra_fild10",375,293);
		close;
	case 2:
		end;
	}
	end;
OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8698) == 1" );
	end;
}

// Quest: Childhood Friends. Step 4.
ra_fild10,375,293,0	script	#Horim02	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (isbegin_quest(8699) == 1)
		cloakoffnpc "Horim#ep1811", getcharid(0);
	end;
}

ra_fild10,379,282,0	script	#Horim03	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (isbegin_quest(8699) == 1)
		cloakoffnpc "Horim#ep1811", getcharid(0);
	end;
}

ra_fild10,375,293,5	script	Horim#ep1811	4_M_RACHMAN2,5,5,{
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8699) ) {
	case 0:
		end;
	case 1:
		mes "[Horim]";
		mes "Adventurer, wait a minute.";
		mes "Where are you here?";
		next;
		mes "[Horim]";
		mes "I looked back and Rachel... I saw the wall too far away.";
		mes "How much more do I have to go?";
		next;
		mes "[Horim]";
		mes "...";
		mes "Is this not even halfway here?";
		next;
		mes "[Horim]";
		mes "Is the road rough?";
		mes "Is your family doing well?";
		next;
		mes "[Horim]";
		mes "Are your friends doing well?";
		mes "Is it okay if I go?";
		navigateto("oz_dun01",285,170);
		changequest 8699,8700;
		cloakonnpc "Horim#ep1811", getcharid(0);
		next;
		mes "Let's head back to the gray wolf forest.";
		close;
	case 2:
		end;
	}
	end;

OnTouch:
	end;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8699) == 1" );
	end;
}

// Quest: Childhood Friends. Step 5.
oz_dun01,285,169,0	script	#ep18w04	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8700) == 1)
		cloakoffnpc "Horim#ep1812", getcharid(0);
	end;
}

oz_dun01,285,170,5	script	Horim#ep1812	4_M_RACHMAN2,{
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8700) ) {
	case 0:
		end;
	case 1:
		mes "[Horim]";
		mes "I've never seen a landscape like this.";
		next;
		mes "[Horim]";
		mes "You must have always seen something like this.";
		next;
		mes "[Horim]";
		mes "What kind of landscape is that place?";
		mes "I heard rumors that life was not so comfortable.";
		next;
		mes "[Horim]";
		mes "But...";
		next;
		mes "[Horim]";
		mes "This road is nice";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "This way?";
		next;
		mes "[Horim]";
		mes "There are a lot of monsters, so I can't come alone...";
		mes "Isn't it strange that Adventurer-nim has traveled so much now?";
		next;
		mes "[Horim]";
		mes "It's okay, I'm confident in my chores.";
		mes "Because it was my job to work hard.";
		next;
		mes "[Horim]";
		mes "Let's go";
		navigateto("gw_fild01",272,342);
		changequest 8700,8701;
		cloakonnpc "Horim#ep1812", getcharid(0);
		next;
		mes "Let's head back to the gray wolf forest.";
		close;
	case 2:
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8700) == 1" );
	end;
}

// Quest: Childhood Friends. Step 6.
gw_fild01,272,342,0	script	#Horim04	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (isbegin_quest(8701) == 1) {
		cloakoffnpc "Horim#ep1813", getcharid(0);
		navigateto("ra_fild11",358,229);
	}
	end;
}
gw_fild01,275,338,0	duplicate(#Horim04)	#ep18w04_	HIDDEN_WARP_NPC,4,4

gw_fild01,272,342,5	script	Horim#ep1813	4_M_RACHMAN2,{
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8701) ) {
	case 0:
		end;
	case 1:
		mes "[Horim]";
		mes "The ash smell has changed.";
		next;
		mes "[Horim]";
		mes "Do you remember what I said when I first met Adventurer?";
		mes "Thor Volcano and Volcanic Ash smell different.";
		next;
		mes "[Horim]";
		mes "That's... I've never been outside, but sometimes the guests who come to my work smell it.";
		mes "Obviously they came from Thor Volcano who hid some weapon...";
		next;
		mes "[Horim]";
		mes "How did you know you hid the weapon?";
		mes "They don't see our employees anyway.";
		next;
		mes "[Horim]";
		mes "Sometimes at dinner, we talk about some sort of secret as if we really can't see it.";
		mes "Even if you don't listen, you can hear a word or two.";
		next;
		mes "[Horim]";
		mes "Of course, it's a really important story, but I won't say it in such a place.";
		next;
		mes "[Horim]";
		mes "But there are people who have a slightly different smell of ash.";
		mes "People like me... people.";
		next;
		mes "[Horim]";
		mes "Can I smell that too?";
		mes "...";
		next;
		mes "[Horim]";
		mes "...let's go";
		navigateto("gw_fild01",36,99);
		changequest 8701,8702;
		cloakonnpc "Horim#ep1813", getcharid(0);
		next;
		mes "Let's head back to the gray wolf village.";
		close;
	case 2:
		end;
	}
	end;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8701) == 1" );
	end;
}

// Quest: Childhood Friends. Step 7.
gw_fild01,36,99,0	script	#HorimF	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8702) == 1) {
		cloakoffnpc "Horim#ep1814", getcharid(0);
		navigateto("ra_fild11",358,229);
	}
	end;
}

gw_fild01,36,99,5	script	Horim#ep1814	4_M_RACHMAN2,{
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8702) ) {
	case 0:
		end;
	case 1:
		mes "[Horim]";
		mes "Let's take a break here...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Where?";
		next;
		mes "[Horim]";
		mes "There are logs...";
		next;
		mes "[Gatekeeper]";
		mes "Hello?";
		next;
		mes "[Horim]";
		mes "Hello...";
		next;
		mes "[Horim]";
		mes "Does it seem difficult to live there?";
		next;
		select( "Don't worry too much" );
		mes "[" + strcharinfo(0) + "]";
		mes "I don't think you need to worry too much.";
		next;
		mes "[Horim]";
		mes "I will.";
		mes "Already I...";
		mes "I left Rachel.";
		next;
		mes "[Horim]";
		mes "...";
		next;
		select( "Reason for leaving" );
		mes "[" + strcharinfo(0) + "]";
		mes "You said that all your friends and family went away and followed you?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Then why do I need to think again?";
		next;
		mes "[Horim]";
		mes "The Adventurer is...";
		mes "That's right. Is there a place you must go back to?";
		mes "Once upon a time, many adventurers who came to my place of work did not.";
		next;
		mes "[Horim]";
		mes "But I need a place to return to.";
		mes "A place to go to sleep after telling everyone to sleep well.";
		next;
		mes "[Horim]";
		mes "Not because I'm lonely...";
		mes "...";
		next;
		mes "Horim swallowed while trying to say something.";
		next;
		mes "[Horim]";
		mes "There are those kinds of people.";
		next;
		mes "[Horim]";
		mes "...let's go";
		next;
		mes "[Gatekeeper]";
		mes "Are you coming to town?";
		next;
		mes "[Horim]";
		mes "?";
		next;
		mes "[Gatekeeper]";
		mes "I've heard of it. If you're the one who brought it here, you'd believe it. Go inside.";
		next;
		mes "[Horim]";
		mes "Yes?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "This is the entrance.";
		mes "Go in.";
		changequest 8702,8703;
		close2;
		warp "wolfvill",270,26;
		end;
	case 2:
		end;
	}
	end;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8702) == 1" );
	end;
}

// Quest: Childhood Friends. Step 8 (final).
wolfvill,271,26,0	script	#HorimG	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch_:
	if (isbegin_quest(8703) == 1)
		cloakoffnpc "Horim#ep1815", getcharid(0);
	end;
}

wolfvill,266,26,5	script	Horim#ep1815	4_M_RACHMAN2,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_1_main < 36)
		end;
	switch( isbegin_quest(8703) ) {
	case 0:
		end;
	case 1:
		mes "[" + strcharinfo(0) + "]";
		mes "Here.";
		next;
		mes "[Horim]";
		mes "...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Are you disappointed?";
		next;
		mes "[Horim]";
		mes "No.";
		next;
		mes "[Horim]";
		mes "...I will find my family.";
		mes "Somewhere here?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I'm glad I didn't forsake you.";
		mes "You'll be welcome because you're good at doing your best.";
		next;
		mes "[Horim]";
		mes "Whoops...";
		next;
		mes "[Horim]";
		mes "Thank you";
		next;
		mes "[Horim]";
		mes "Thank you so much!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Now then, can I go?";
		next;
		mes "[Horim]";
		mes "Yes.";
		mes "Tonight... after a long time I can tell everyone good night.";
		next;
		mes "[Horim]";
		mes "Blessed be the adventurer's journey ahead...";
		completequest 8703;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes "^4d4dff A favorable rating for you occurs.^000000";
		ep18_1_reputation_exp += 100;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		next;
		close2;
		cloakonnpc "Horim#ep1815", getcharid(0);
		end;
	case 2:
		end;
	}
	end;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8703) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Helping the Children. Step 1.
rachel,38,44,3	script	Samaritan#ep18	4_M_CHILD1,{
	if (isbegin_quest(16581) == 0) {
		mes "[Samaritan]";
		mes "Niman, I'm thirsty. Can you get me some water? Your house is the closest here.";
		next;
		mes "[Kar]";
		mes "Do you have anything to eat at home? If not, buy me some dried fruits.";
		mes "Only me, you're nice.";
		next;
		mes "[Naiman]";
		mes "I don't have anything to eat";
		mes "I have no money.";
		next;
		mes "[Lucky]";
		mes "Hey, where's the house without food?";
		mes "It's because we don't want to give it to you.";
		next;
		mes "[Samaritan]";
		mes "It's a disappointment, only my age.";
		mes "I thought you were a good boy";
		next;
		mes "[Naiman]";
		mes "Oh no!";
		mes "There is water, so go and get some water.";
		next;
		mes "[Samaritan]";
		mes "Okay. Water must be scarce. Where can we get something?";
		mes "You pay money to buy water, but you say you don't have money in your house.";
		setquest 16581;
		close;
	}
	mes "[Samaritan]";
	mes "Oh, I'm hungry and thirsty after playing.";
	mes "I wish I could sit somewhere cool and eat iced tea and dried fruits.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16581) == 0" );
	end;
}

// Quest: Helping the Children. Step 2.
rachel,37,42,7	script	Kar#ep18	4_M_RACHMAN1,{
	if (isbegin_quest(16581) == 1) {
		mes "[Kar]";
		mes "Why don't you have no money? Your father is Lucky and works at a cloth shop.";
		mes "You mean you're lucky, your mom didn't give your dad any money?";
		next;
		mes "[Lucky]";
		mes "My mom gives your dad money, but you don't want to buy us a piece of dried fruit, do you?";
		next;
		mes "[Samaritan]";
		mes "Hey, okay, stop it. You're pitiful~ Let's stop because we don't have money.";
		next;
		mes "[Naiman]";
		mes "No!!! I'm not sorry...";
		mes "I'm not sorry...!!";
		next;
		mes "[Samaritan]";
		mes "Uh, sorry~ I'm joking.";
		mes "Why do you get angry because you're sober. It's scary.";
		next;
		mes "[Samaritan]";
		mes "I heard that the natives are a little hot-tempered, but it's a little bit irritating, right?";
		mes "Isn't it?";
		next;
		mes "[Kar]";
		mes "That's right. You have to be able to be patient when you're angry so we can play together.";
		mes "Thank you for playing with a kid like you.";
		completequest 16581;
		setquest 16582;
		close;
	}
	mes "[Kar]";
	mes "I want to drink sweet tea with lots of ice.";
	mes "After that, I think it will be more fun to play!";
	next;
	mes "[Kar]";
	mes "It's too hot and I'm thirsty right now.";
	mes "I don't want to go home though.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16581) == 1" );
	end;
}

// Quest: Helping the Children. Step 3.
rachel,40,45,3	script	Lucky#ep18	4_M_DST_CHILD,{
	if (isbegin_quest(16582) == 1) {
		mes "[Lucky]";
		mes "That's right, thank you!";
		next;
		select( "I can't see you", "Stop bullying me." );
		mes "[Lucky]";
		mes "Um? Who is that? Do you join us in our game?";
		mes "I don't think you're a human here... Why are you meddling?";
		next;
		select( "Is that playing?", "Playing, teasing me." );
		mes "[Samaritan]";
		mes "It is unavoidable that we are different only in our age~";
		mes "He's a native here, we're all migrants.";
		next;
		mes "[Samaritan]";
		mes "Everyone knows that the natives are a little less than the migrants, right?";
		mes "But we play together like this.";
		next;
		mes "[Naiman]";
		mes "No! Who is it? What is the difference between natives and migrants!";
		next;
		mes "[Kar]";
		mes "Scream again";
		mes "You are proving that the natives are more hot-blooded.";
		next;
		select( "You can't help but be angry", "Of course you'll get angry if you say that." );
		mes "[Samaritan]";
		mes "But is it true?";
		mes "Naiman's dad works at Lucky's cloth shop, but Lucky's mom always does.";
		next;
		mes "[Samaritan]";
		mes "Indigenous people are late to teachLearned and hot-blooded.";
		mes "It's great to have an aunt who hires and pays such natives.";
		erasequest 16582;
		setquest 16583;
		close;
	}
	mes "[Lucky]";
	mes "When we go to my house, we have cool tea and snacks!";
	mes "But it's too far... Isn't Naiman's house the closest here?";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16582) == 1" );
	end;
}

// Quest: Helping the Children. Step 4 (final).
rachel,36,45,5	script	Naiman#ep18	4_F_DST_CHILD,{
	if (isbegin_quest(16583) == 1) {
		if (checkweight(1000405,10) == 0) {
			mes "- Wait a minute !! -";
			mes "- Currently you're carrying -";
			mes "- too many items with you. -";
			mes "- Please try again -";
			mes "- after you loose some weight. -";
			close;
		}
		mes "[Naiman]";
		mes ".";
		next;
		select("Why do you hang out with them?");
		mes "[Naiman]";
		mes "Yes, yes?";
		next;
		select("Why are you being treated like this?");
		mes "[Naiman]";
		mes "Yeah... they're friends.";
		mes "There is no one else to play with except them.";
		next;
		mes "[Samaritan]";
		mes "Look. You're just old enough to play with us.";
		mes "If we really bothered him, we just wouldn't have played with us.";
		next;
		mes "[Lucky]";
		mes "I've heard that strangers are meddling, but...";
		mes "Don't meddle in things you don't even know.";
		next;
		mes "[Naiman]";
		mes "I... go home and fetch water.";
		mes "And... I'm sorry for being rude for nothing.";
		next;
		cloakonnpc "Naiman#ep18", getcharid(0);
		mes "[Samaritan]";
		mes "Well, it might be like playing together, isn't it?";
		mes "Don't worry too much.";
		next;
		cloakonnpc "Samaritan#ep18", getcharid(0);
		mes "[Lucky]";
		mes "Now let's go play somewhere else.";
		mes "Leave the meddling stranger here.";
		next;
		cloakonnpc "Lucky#ep18", getcharid(0);
		mes "[Kar]";
		mes "Yes, then.";
		mes "Goodbye, stranger adventurer!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "...I feel like I have accumulated some life experience.";
		mes "It's not a very good feeling...";
		cloakonnpc "Kar#ep18", getcharid(0);
		erasequest 16583;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		close;
	}
	mes "[Naiman]";
	mes "It's hot... I want to go home.";
	mes "But because everyone wants to play more...";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16583) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Price of Labor. Step 1 + 3 (final).
rachel,181,51,3	script	Amodipine#ep18	4_M_MIDDLE,{
	if (checkweight(1000405,10) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (isbegin_quest(16584) == 0) {
		mes "[Amodipine]";
		mes "You can't get your paycheck today. It's already been delayed for three months...";
		mes "I would like to quit this store right away, but if I do, there will be no way to get a delayed salary.";
		next;
		mes "[Amodipine]";
		mes "Besides, if the rumors spread that they ran out like that, Native Americans like me won't be able to work in other stores.";
		mes "Ah, what should I do...";
		next;
		mes "[Amodipine]";
		mes "Hey, did you hear me?";
		mes "Looking at your outfit, you look like an adventurer. It's good. A life of free adventure....";
		next;
		mes "[Amodipine]";
		mes "I, I have a favor to ask of the adventurer.";
		mes "My boss pretends to listen to me, but I think he'll listen to what a famous adventurer says.";
		next;
		mes "[Amodipine]";
		mes "Can't you go to my boss's shop and ask for a paycheck?";
		mes "I can't even buy a meal tomorrow at this rate.";
		next;
		if (select( "I'll help you", "Why would you do that?" ) == 2)
			end;
		mes "[Amodipine]";
		mes "Thank you, thank you!";
		mes "Our boss's shop is <NAVI>[here]<INFO>rachel,136,95,0,101,0</INFO></NAVI>";
		setquest 16584;
		close;
	}
	if (isbegin_quest(16585) == 1) {
		mes "[Amodipine]";
		mes "Are you here. Any good news?";
		next;
		select("Tell me what you shared");
		mes "[Amodipine]";
		mes "I'm going to pay my late salary tomorrow! Oh, thanks. Thank you so much.";
		mes "Now I can buy food and clothes for the children.";
		next;
		mes "[Amodipine]";
		mes "If you go tomorrow, you'll hear a bit of nagging, but I'm actually more happy that you got your paycheck.";
		mes "You're nagging me, it's not like it's a day or two.";
		next;
		mes "[Amodipine]";
		mes "Aren't you mad? That's mad.";
		mes "But how can I say I'm angry. It's wrong to be born aboriginal.";
		next;
		mes "[Amodipine]";
		mes "You can't run away and live.";
		mes "I've heard rumors that there is a village on the Baines side of the fugitive Aboriginal people, but I'm sure it's true.";
		next;
		mes "[Amodipine]";
		mes "But I don't even have the courage to live there. Oh my, you talked too much.";
		mes "Sorry for holding on to you when you're busy. Thank you so much!";
		completequest 16585;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		close;
	}
	mes "[Amodipine]";
	mes "Every day I worry about my meals, I worry about my children, I don't sleep well.";
	mes "Why do I have to suffer because I was born as an indigenous person?";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16584) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16585) == 1" );
	end;
}

// Quest: Price of Labor. Step 2.
rachel,136,95,3	script	Dahill#ep18	4_M_RACHMAN2,{
	if (isbegin_quest(16584) == 1) {
		mes "[Dahil]";
		mes "Welcome, this is Dahill Sanghoe.";
		mes "Nice to meet you. You look like you're an adventurer!";
		next;
		mes "[Dahil]";
		mes "I love adventurers!";
		mes "I once dreamed of being an adventurer. Then I got shot in the knee by an arrow, and now I'm stuck in the city.";
		next;
		mes "[Dahil]";
		mes "If it's okay with you, please take a look at the items and tell me about your adventures.";
		next;
		select("I'm here to tell you another story");
		mes "[Dahil]";
		mes "A different story?";
		mes "Ummm, you mean Amodipine's salary? Did Amodipine ask for it?";
		next;
		mes "[Dahil]";
		mes "Uhm, I know Amodipine, of course, but things are not going well in the store.";
		mes "I said that I would give it all at once next month, but you're using my favorite adventurer.";
		next;
		mes "[Dahil]";
		mes "Should I say that it is native to hide behind others cowardly?";
		mes "So far, I have hired them because they seem to be doing well, but should I think about hiring indigenous people again?";
		next;
		select("What do you mean by that?");
		mes "[Dahil]";
		mes "Oh, adventurer, don't worry. It's like an old ritual problem of the natives.";
		mes "I am weak and like to hide behind others.";
		next;
		select( "It's still wrong to pay arrears", "Isn't that discrimination" );
		mes "[Dahil]";
		mes "It's because someone doesn't know. It's because they don't have money to know.";
		mes "Well, the pay to Amodipine was the latest. But it can't be helped.";
		next;
		mes "[Dahil]";
		mes "It's not like Aboriginal discrimination.";
		mes "It's just that the order was reversed because the employee was the last to arrive.";
		next;
		mes "[Dahil]";
		mes "Hey, I don't know why you have to talk like this with Adventurer-nim.";
		mes "Tell Amodipine to stop working like this, I'll give you a paycheck tomorrow.";
		next;
		mes "[Dahil]";
		mes "I won't scold you for this, so please tell <NAVI>[Amodipine]<INFO>rachel,181,51,0,101,0</INFO></NAVI> to go to work and work properly.";
		mes "I'm not a racist, but Aboriginal people are irresponsible, so if you scold me, I might quit.";
		completequest 16584;
		setquest 16585;
		close;
	}
	mes "[Dahil]";
	mes "Now I run a business, but I love adventurers!";
	mes "I once dreamed of being an adventurer. Then I got hit by an arrow in the knee and I'm stuck in the city.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16584) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Gather Opinions in Rachel. Step 1 + 2 (final).
rachel,155,236,3	script	Junok#atm	4_M_TRAINEE,{
	if (checkweight(1000405,10) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	switch( checkquest(3504,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Junok]";
		mes "I got enough information today. If you can help again tomorrow, please come back.";
		close;
	case 2:
		break;
	}
	switch( isbegin_quest(3503) ) {
	case 0:
		mes "[Junok]";
		mes "Hello, my name is Priest Junok.";
		next;
		mes "[Junok]";
		mes "This village is at some point in a state of confrontation with two factions, the natives and the migrants.";
		next;
		mes "[Junok]";
		mes "Efforts to resolve the conflict between the two factions continue, but no clear results have been achieved.";
		next;
		mes "[Junok]";
		mes "That's why I want you to personally approach them and find out what the problem is.";
		next;
		mes "[Junok]";
		mes "Can the adventurer come and talk to them instead of me? It's hard for me to leave.";
		next;
		if (select( "Do it", "Do it next" ) == 2)
			end;
		setquest 3503;

		setarray .@quest_id[0],3493,3494,3495,3496,3497,3498,3499,3500,3501,3502;
		.@size = getarraysize(.@quest_id);

		for ( .@i = 0; .@i < 6; ++.@i ) {
			.@r = rand(.@size);
			setquest .@quest_id[.@r];
			deletearray .@quest_id[.@r],1;
			.@size--;
		}
		mes "[Junok]";
		mes "You can come after talking to the 3 natives and 3 immigrants you have designated.";
		next;
		mes "[Junok]";
		mes "For a list of people to talk to, please refer to the quest window or the minimap.";
		close;
	case 1:
		break;
	case 2:
		end;
	}
	switch( isbegin_quest(3505) ) {
	case 0:
		mes "[Junok]";
		mes "You can come after talking to the 3 natives and 3 immigrants you have designated.";
		next;
		mes "[Junok]";
		mes "For a list of people to talk to, please refer to the quest window or the minimap.";
		close;
	case 1:
		switch( checkquest(3504,PLAYTIME) ) {
		case -1:	// first time
			mes "[Junok]";
			mes "Is that so...";
			next;
			mes "[Junok]";
			mes "It seems that there is still a lot of sediment between each other.";
			next;
			mes "[Junok]";
			mes "It's worse than I expected, hmm... I don't know if I should mess with it.";
			next;
			getitem 1000405,10;	// Ep18_Amethyst_Fragment
			getexp 7769124,3000000;	// dummy value
			break;
		case 0:
		case 1:
			mes "[Junok]";
			mes "I got enough information today. If you can help again tomorrow, please come back.";
			close;
		case 2:
			mes "[Junok]";
			mes "Well, I see. It seems things are starting to get better.";
			next;
			mes "[Junok]";
			mes "It seems that the effort is worthwhile.";
			next;
			mes "[Junok]";
			mes "The future will be more important.";
			next;
			getitem 1000405,3;	// Ep18_Amethyst_Fragment
			getexp 18252408,2000000;
			break;
		}
		for ( .@i = 3493; .@i < 3506; ++.@i ) {
			if (isbegin_quest(.@i) > 0)
				erasequest .@i;
		}
		setquest 3504;
		mes "[Junok]";
		mes "It was a good reference.";
		next;
		mes "[Junok]";
		mes "Thank you for your help. If you can help again tomorrow, please come back.";
		close;
	case 2:
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(3503) == 0 && (checkquest(3504,PLAYTIME) == -1 || checkquest(3504,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3505) == 1" );
	end;
}

rachel,69,234,3	script	Jarad#atm1	4_M_CHILD1,2,2,{
	if (isbegin_quest(3493) == 1) {
		mes "[Jarad]";
		mes "Hello";
		next;
		mes "[Jarad]";
		mes "As a native, I was in a position to accept whatever treatment was given to us.";
		next;
		mes "[Jarad]";
		mes "If it is impossible to change your surroundings by your own efforts, give up change and live a life of conformity.";
		next;
		mes "[Jarad]";
		mes "It's something I've felt in my short life, although it has created a rather indifferent attitude...";
		next;
		mes "[Jarad]";
		mes "But now it seems that something is really starting to change.";
		next;
		mes "[Jarad]";
		mes "It is said that there are institutional arrangements for us, so I'll try to believe it.";
		next;
		completequest 3493;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;	// setquest here to prevent bug
		mes "[Jarad]";
		mes "Have a nice day then.";
		next;
		mes " - End of conversation with Jarad. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			// setquest 3505;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3493) == 1" );
	end;
}

rachel,100,72,3	script	Rohi#atm2	4_F_SHABBY,2,2,{
	if (isbegin_quest(3494) == 1) {
		mes "[Rohi]";
		mes "Hello, how have you been?";
		next;
		mes "[Rohi]";
		mes "Gina finally agreed.";
		next;
		mes "[Rohi]";
		mes "Finally, I am able to receive a proper salary from Gina-sama.";
		next;
		mes "[Rohi]";
		mes "It was difficult for me to do on my own, I am really grateful to Maram and the priests.";
		next;
		mes "[Rohi]";
		mes "It's great to hear that other people who were in a similar position to me also had improvements.";
		next;
		mes "[Rohi]";
		mes "Now that I can sleep a little more comfortably, I would also like to thank the adventurer.";
		next;
		completequest 3494;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Rohi]";
		mes "Then I hope you have a good day as well.";
		next;
		mes " - Finished the conversation with Rohi. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3494) == 1" );
	end;
}

rachel,258,207,3	script	Lord#atm3	4_F_RACHOLD,2,2,{
	if (isbegin_quest(3495) == 1) {
		mes "[Lord]";
		mes "Hello, how are you?";
		next;
		mes "[Lord]";
		mes "If the priests had been a little late, they would have sold the building.";
		next;
		mes "[Lord]";
		mes "Isn't that the measure to ensure that indigenous peoples and migrants have equal rights in business?";
		next;
		mes "[Lord]";
		mes "I am amazed and grateful that the settlers accept it...";
		next;
		mes "[Lord]";
		mes "Anyway, I think the time has come to spur my business.";
		next;
		mes "[Lord]";
		mes "I want you to support me as well.";
		next;
		completequest 3495;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Lord]";
		mes "Have a nice day then.";
		next;
		mes " - End of conversation with Lord. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3495) == 1" );
	end;
}

rachel,159,173,3	script	Squain#atm4	4_M_LGTPOOR,2,2,{
	if (isbegin_quest(3496) == 1) {
		mes "[Squain]";
		mes "Hello~~";
		next;
		mes "[Squain]";
		mes "Thank you so much for the job.";
		next;
		mes "[Squain]";
		mes "You don't have to depend on others anymore!";
		next;
		mes "[Squain]";
		mes "If I get paid, I'd like to change the clothes I'm wearing first.";
		next;
		mes "[Squain]";
		mes "There have been many people's help...";
		next;
		mes "[Squain]";
		mes "Now I will become a person who can help others.";
		next;
		completequest 3496;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Squain]";
		mes "Then enter carefully.";
		next;
		mes " - Finished the conversation with Squain. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3496) == 1" );
	end;
}

rachel,190,30,5	script	Senado#atm5	4_F_MONK,2,2,{
	if (isbegin_quest(3497) == 1) {
		mes "[Senado]";
		mes "Hello, I'm Senado.";
		next;
		mes "[Senado]";
		mes "Not long ago, a strong challenger appeared and came to a conclusion.";
		next;
		mes "[Senado]";
		mes "The challenger was a fighter from immigrants, so it was quite a hot topic.";
		next;
		mes "[Senado]";
		mes "On behalf of the indigenous people, you can never lose!! It wasn't prepared enough, but...";
		next;
		mes "[Senado]";
		mes "It was more important for me to be able to adjust the rental fee according to the changed policy.";
		next;
		mes "[Senado]";
		mes "Oh, and Dalian ended with my victory.";
		next;
		mes "[Senado]";
		mes "You also feel unusual martial arts... It would be good to fight with me once in a while.";
		next;
		completequest 3497;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Senado]";
		mes "Then I'll see you next time.";
		next;
		mes " - Finished the conversation with Senado. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3497) == 1" );
	end;
}

rachel,210,52,5	script	Japer#atm6	1_ETC_01,2,2,{
	if (isbegin_quest(3498) == 1) {
		mes "[Japer]";
		mes "Hello, my name is Merchant Japer.";
		next;
		mes "[Japer]";
		mes "Some of the items I own are exclusive to quite a few.";
		next;
		mes "[Japer]";
		mes "It is true that this has made it difficult for indigenous merchants to compete.";
		next;
		mes "[Japer]";
		mes "So there is a system that prevents one merchant from buying all of a certain item.";
		next;
		mes "[Japer]";
		mes "Besides, I think it should be done in the direction of raising the wages of the indigenous people I hire.";
		next;
		mes "[Japer]";
		mes "It's true that it's a huge loss right now, but the commercial district itself will become more active, so I'll have to look at it for a long time now that it's like this.";
		next;
		mes "[Japer]";
		mes "It seems that I've been too stubborn, so I'm a little concerned.";
		next;
		completequest 3498;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Japer]";
		mes "Then see you next time.";
		next;
		mes " - End of conversation with Japer. - ";
		if (.@total == 12) {
			next;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3498) == 1" );
	end;
}

rachel,40,73,7	script	Shiroan#atm7	1_F_02,2,2,{
	if (isbegin_quest(3499) == 1) {
		mes "[Shiroan]";
		mes "Hello, this is Jafer's disciple Siroan.";
		next;
		mes "[Shiroan]";
		mes "Have you ever heard of a man struck by lightning by the natives?";
		next;
		mes "[Shiroan]";
		mes "Yes, that person is me...";
		next;
		mes "[Shiroan]";
		mes "It's a matter of negotiating with Jafer.";
		next;
		mes "[Shiroan]";
		mes "It's difficult to approach Jafer, who has a tight stomach, so that must have been the case with me, who is more sympathetic...";
		next;
		mes "[Shiroan]";
		mes "But now that our interests are aligned to some extent, I think we can move around with confidence.";
		next;
		mes "[Shiroan]";
		mes "Good job";
		next;
		completequest 3499;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Shiroan]";
		mes "Then I hope you have a peaceful day.";
		next;
		mes " - Conversation with Shiroan is over. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3499) == 1" );
	end;
}

rachel,88,151,3	script	Ishira#atm8	1_F_03,2,2,{
	if (isbegin_quest(3500) == 1) {
		mes "[Ishira]";
		mes "Hello, how are you?";
		next;
		mes "[Ishira]";
		mes "The atmosphere of the village is changing little by little due to the intervention of the priests.";
		next;
		mes "[Ishira]";
		mes "If you change your position, you can feel that you have been treated unfairly enough.";
		next;
		mes "[Ishira]";
		mes "I think they had good reason to be outraged in a speech that was given a while ago.";
		next;
		mes "[Ishira]";
		mes "But it's true that it was too much. At least not with violence!";
		next;
		mes "[Ishira]";
		mes "In any case, I hope that the relationship between the natives and the migrants will improve little by little.";
		next;
		completequest 3500;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Ishira]";
		mes "Then have a peaceful day.";
		next;
		mes " - Finished the conversation with Ishira. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3500) == 1" );
	end;
}

rachel,240,182,5	script	Gina#atm9	1_F_04,2,2,{
	if (isbegin_quest(3501) == 1) {
		mes "[Gina]";
		mes "Hello, how are you?";
		next;
		mes "[Gina]";
		mes "I didn't get along very well.";
		next;
		mes "[Gina]";
		mes "We were able to expand our business by purchasing additional buildings, but it ended in failure.";
		next;
		mes "[Gina]";
		mes "But now that I think about it, even if we had succeeded in purchasing additional buildings, problems would have arisen.";
		next;
		mes "[Gina]";
		mes "So I just decided to accept this state for now.";
		next;
		mes "[Gina]";
		mes "These days, I think we need to stop thinking negatively and have a positive mindset.";
		next;
		completequest 3501;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Gina]";
		mes "Then I hope you have a nice day.";
		next;
		mes " - Finished the conversation with Gina. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3501) == 1" );
	end;
}

rachel,212,52,3	script	Hari#atm10	1_F_MERCHANT_02,2,2,{
	if (isbegin_quest(3502) == 1) {
		mes "[Hari]";
		mes "Hello, this is Jafer's wife Hari.";
		next;
		mes "[Hari]";
		mes "Because of his fiery nature, sometimes when an accident occurs, I take care of the rearrangement.a person who does.";
		next;
		mes "[Hari]";
		mes "I suffered a lot because there was no compromise on the wage increase for the natives.";
		next;
		mes "[Hari]";
		mes "Actually, I didn't think there was any need for a raise, but I hated fighting with my husband more.";
		next;
		mes "[Hari]";
		mes "Anyway, I'm glad there seems to be some compromise.";
		next;
		mes "[Hari]";
		mes "I want you to be quiet now.";
		next;
		completequest 3502;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Hari]";
		mes "Then just go inside~";
		next;
		mes " - Conversation with Hari is over. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - I have finished talking to all 6 people. Let's go back to Junok. -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3502) == 1" );
	end;
}
//-------------------------------------------------------------------



//-------------------------------------------------------------------
// Quest: Picking Half Flowers. Step 1.
rachel,169,79,0	script	#Warp for flower	WARPNPC,{
	end;
OnInit:
	cloakonnpc();
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5932) == 0" );
	end;
}

rachel,170,80,6	duplicate(dummy_cloaked_npc)	Greedy man#E18_1	4_M_RASWORD
rachel,172,80,4	duplicate(dummy_cloaked_npc)	Abused child#E18_2	4_M_DST_CHILD
rachel,175,80,4	duplicate(dummy_cloaked_npc)	Abused child#E18_3	4_M_DST_CHILD
	
rachel,176,80,0	script	#Hoesopflowerstart	HIDDEN_WARP_NPC,10,10,{
	end;
OnTouch:
	switch( isbegin_quest(5932) ) {
	case 0:
		cloakoffnpc "#Warp for flower", getcharid(0);	// weird but official
		cloakoffnpc "Greedy man#E18_1", getcharid(0);
		cloakoffnpc "Abused child#E18_2", getcharid(0);

		mes "- a man who looks greedy";
		mes "- You are abusing a child.";
		next;
		if (select( "Listen to what's going on", "Ignore" ) == 2)
			end;
		emotion ET_FRET, getnpcid(0,"Greedy man#E18_1");
		sleep2 300;
		npctalk "Man: Feeding and putting a native kid who doesn't come and goes, is that the only reward you get?", "Greedy man#E18_1", bc_self;
		emotion ET_SURPRISE, playerattached();
		unittalk getcharid(3), "" + strcharinfo(0) + " : ??", bc_self;
		next;
		emotion ET_ANGER, getnpcid(0,"Greedy man#E18_1");
		sleep2 300;
		npctalk "Man: Ha?! That's not even funny. How dare you touch a customer's wallet?", "Greedy man#E18_1", bc_self;
		next;
		emotion ET_FRET, getnpcid(0,"Greedy man#E18_1");
		sleep2 300;
		npctalk "Man: Eying - I was listening to the advice of people around me not to have any dealings with the natives.", "Greedy man#E18_1", bc_self;
		next;
		npctalk "Man: I lost my mind for a while. I'll look at you this time, so disappear from my eyes right now.", "Greedy man#E18_1", bc_self;
		sleep2 300;
		specialeffect EF_HIT1, AREA, "Abused child#E18_2";
		npctalk "Child: Aww!", "Abused child#E18_2", bc_self;
		emotion ET_PROFUSELY_SWAT, getnpcid(0,"Abused child#E18_2");
		cloakonnpc "Abused child#E18_2", getcharid(0);
		cloakoffnpc "Abused child#E18_3", getcharid(0);
		next;
		emotion ET_STARE, getnpcid(0,"Greedy man#E18_1");
		sleep2 300;
		npctalk "Man: Can't you be quiet? Are you screaming and fussing in the neighborhood?!", "Greedy man#E18_1", bc_self;
		next;
		emotion ET_CRY, getnpcid(0,"Abused child#E18_3");
		sleep2 300;
		npctalk "Child: I didn't. I've never seen a guest wallet.", "Abused child#E18_3", bc_self;
		next;
		npctalk "Man: This.. This..", "Greedy man#E18_1", bc_self;
		next;
		npctalk "Man: I don't know if this kid can't beg, but where does he get the full answer?", "Greedy man#E18_1", bc_self;
		next;
		npctalk "Man: The last time you tried to be nice and gracious, are you even lying now?", "Greedy man#E18_1", bc_self;
		next;
		emotion ET_BLABLA, getnpcid(0,"Greedy man#E18_1");
		sleep2 300;
		npctalk "Man: I don't need a cheeky little bastard like you! Get fired right now!", "Gaudy Man#E18_1", bc_self;
		next;
		cloakonnpc "Abused child#E18_3", getcharid(0);
		sleep2 300;
		cloakoffnpc "Abused child#E18_2", getcharid(0);
		emotion ET_CRY, getnpcid(0,"Abused child#E18_2");
		npctalk "Child: The boss was wrong", "Abused child#E18_2", bc_self;
		next;
		npctalk "Child: Please, just get fired. I have to pay for my father's medicine.", "Abused child#E18_2", bc_self;
		next;
		emotion ET_FRET, getnpcid(0,"Greedy man#E18_1");
		sleep2 300;
		npctalk "Man: ?! What's the drug?", "Greedy man#E18_1", bc_self;
		next;
		npctalk "Man: That's your guy. Should I take care of that too?", "Greedy man#E18_1", bc_self;
		next;
		npctalk "Child: Boss, then even the money I worked so far...", "Abused child#E18_2", bc_self;
		next;
		emotion ET_QUESTION, getnpcid(0,"Greedy man#E18_1");
		sleep2 300;
		npctalk "Man: What? Worked Money?", "Gravish Man#E18_1", bc_self;
		next;
		npctalk "Man: Huh, how long have I lived? I hear all sorts of bullshit, blatantly asking for money on the subject of stealing?", "Greedy man#E18_1", bc_self;
		next;
		emotion ET_QUESTION, getnpcid(0,"Greedy man#E18_1");
		sleep2 300;
		npctalk "Man: It's okay to claim compensation for a stolen wallet, but what? Money? You sat there laughing.", "Greedy man#E18_1", bc_self;
		next;
		emotion ET_CRY, getnpcid(0,"Abused child#E18_2");
		sleep2 300;
		specialeffect EF_HIT1, AREA, "Abused child#E18_2";
		npctalk "Child: Aww!", "Abused child#E18_2", bc_self;
		cloakonnpc "Abused child#E18_2", getcharid(0);
		cloakoffnpc "Abused child#E18_4", getcharid(0);
		next;
		npctalk "Man: Icy! It's loud!", "Greedy man#E18_1", bc_self;
		next;
		npctalk "Man: Little boy, you'd better be prepared if you catch my eye while you're around here again.", "Greedy man#E18_1", bc_self;
		next;
		setquest 5932;
		emotion ET_FRET, getnpcid(0,"Greedy man#E18_1");
		npctalk "Man: Awkwardly.", "Greedy man#E18_1", bc_self;
		cloakonnpc "#Warp for flower", getcharid(0);
		cloakonnpc "Greedy man#E18_1", getcharid(0);
		close;
	case 1:
		cloakonnpc "#Warp for flower", getcharid(0);
		cloakonnpc "Greedy man#E18_1", getcharid(0);
		cloakoffnpc "Abused child#E18_4", getcharid(0);
		end;
	case 2:
		end;
	}
}

rachel,180,80,4	script	Abused child#E18_4	4_M_DST_CHILD,{
	if (isbegin_quest(5932) == 1) {
		mes "[child]";
		mes "Ah.. that's bad luck, it's the Aboriginal people who are very happy.";
		next;
		mes "[child]";
		mes "Ah.. I gave money freely, but I did not cut it freely, so I liked it quite a bit, but I thought it would last a long time.";
		next;
		select("Are you okay?");
		mes "[child]";
		mes "What are you doing?";
		next;
		mes "[child]";
		mes "You look like a foreigner, but if you are a clumsy sympathizer, please stop. This kind of treatment is common among indigenous people.";
		next;
		mes "[child]";
		mes "Then you keep going the way you went. It wasn't nice to meet you, but let's not meet again~";
		next;
		emotion ET_STARE_ABOUT, getnpcid(0,"Abused child#E18_4");
		mes "[child]";
		mes "Ha.. I thought I was caught.";
		next;
		emotion ET_KIK, getnpcid(0,"Abused child#E18_4");
		mes "[child]";
		mes "Even the boss is stupid, but I didn't steal the customer's wallet.";
		next;
		mes "[child]";
		mes "Ah! But who else stole the customer's wallet? It's less embarrassing if I stole it too.";
		next;
		mes "[child]";
		mes "Let's see, how much did you hear?";
		next;
		emotion ET_MONEY, getnpcid(0,"Abused child#E18_4");
		mes "[child]";
		mes "one. two.. ginseng, raccoon dog, squid, yukgaejang, childogi, palpuni, serpent, cross driver";
		next;
		mes "[child]";
		mes "Hey, it's salty. It's salty.";
		next;
		emotion ET_THINK, getnpcid(0,"Abused child#E18_4");
		sleep2 3000;
		emotion ET_SWEAT, getnpcid(0,"Abused child#E18_4");
		mes "[child]";
		mes "Haha? Mister.. haven't you gone yet? Have you seen all the money counting? Are you going to braid to the boss?";
		next;
		select("It won't come, so why not return it?");
		mes "[child]";
		mes "Ha.. this uncle! People are saying nice things again, haven't you seen them before?";
		next;
		mes "[child]";
		mes "Did I not get my paycheck after working hard for months?";
		next;
		mes "[child]";
		mes "Even if you can't, you need to take care of your boss' wallet so that even a small consolation fee will be satisfied.";
		next;
		mes "[child]";
		mes "Oh, I don't know! If you want to brag, say braid. Now, my father is healthy enough to be able to move on his own.";
		next;
		mes "[child]";
		mes "Because I was about to open the business by gathering roughly all of my business funds.";
		next;
		select("What business? Isn't it illegal?");
		mes "[child]";
		mes "Heh heh.. This uncle! He's going to make a big deal out of it. ";
		next;
		mes "[child]";
		mes "Where are you trying to steal someone else's business idea?";
		next;
		mes "[child]";
		mes "Well, it's a difficult task for me to do alone, and I don't think I'm an adult with a bad personality, so I'll give you a special offer.";
		next;
		mes "[child]";
		mes "I'll give you a map of the places I've been looking for business. If you're really interested in my business, let me know.";
		next;
		completequest 5932;
		setquest 5933;
		mes "[child]";
		mes "Oh! And my name is Mejay. See you again.";
		close2;
		cloakonnpc "Abused child#E18_4", getcharid(0);
		end;
	}
	end;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5932) == 1" );
	end;
}

// Quest: Picking Half Flowers. Step 2.
rachel,70,135,4	script	Mejai#E18_5	4_M_DST_CHILD,{
	if (checkweight(1000405,10) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (isbegin_quest(5933) == 1) {
		mes "[Mejai]";
		mes "Oh my God, this guy is really here. Does that mean he's interested in my business?";
		next;
		mes "[Mejai]";
		mes "Hmm.. what should I do..";
		next;
		mes "[Mejai]";
		mes "Hiding this isn't my aptitude, I'll just be honest.";
		next;
		mes "[Mejai]";
		mes "There were a few people who came to hear about my business plan, and as soon as they heard it, they all just left.";
		next;
		if (select( "What the hell are you doing?", "I'm not interested?" ) == 2)
			end;
		mes "[Mejai]";
		mes "Heh! Don't be surprised to hear that, I'm selling flowers in this desert.";
		next;
		emotion ET_QUESTION, playerattached();
		sleep2 3000;
		emotion ET_THINK, playerattached();
		mes "[Mejai]";
		mes "Why? What? Look, this. Foreigners shouldn't be like this. Do you know how precious flowers are in the desert?";
		next;
		mes "[Mejai]";
		mes "Did you see the flower shop in Rachel, Mister?";
		next;
		emotion ET_OK, playerattached();
		mes "[Mejai]";
		mes "Well, of course, you must have seen it, doesn't Rachel not have a flower shop?";
		next;
		mes "[Mejai]";
		mes "If a florist selling only artificial flowers, not living flowers, could be called a florist.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "By the way, where to get flowers?";
		next;
		mes "[Mejai]";
		mes "Yeah, that's the problem. You're pretty sharp? I like it.";
		next;
		mes "[Mejai]";
		mes "It's not that you can't find fresh flowers around here. It's rare, but there are ways to get them.";
		next;
		mes "[Mejai]";
		mes "You know it's a Half Flower? Maybe outsiders don't know. Do the natives here know?";
		next;
		mes "[Mejai]";
		mes "It is a beautiful and mysterious flower that only blooms in the gray wolf forest. It is said that when my father proposed to my mother, I cut it and proposed it.";
		next;
		mes "[Mejai]";
		mes "And since her mother died, her father only drank alcohol, and he taught me how to gather Half Flowers.";
		next;
		mes "[Mejai]";
		mes "What if the place where the Half Flower blooms is under a tree... What if it's under a stone... What if it's by the grass...";
		next;
		mes "[Mejai]";
		mes "Considering the humidity around the flower, the direction of cutting should be at an angle of 10 degrees, 20 degrees, or 30 degrees..";
		next;
		emotion ET_THINK, getnpcid(0,"Mejai#E18_5");
		mes "[Mejai]";
		mes "Ah.. I was excited for a moment. Every time my dad told me this, it was stressful...";
		next;
		mes "[Mejai]";
		mes "Well, after all, I ended up doing business with it, so it was all nagging that turned into blood and flesh...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "So what can I do to help?";
		next;
		mes "[Mejai]";
		mes "I think it's important to keep a sufficient supply of Half Flowers in order for the business we're planning to run stably.";
		next;
		mes "[Mejai]";
		mes "So I'm planning to sign a contract with a lot of adventurers. Of course you'll be one of them too, right?";
		next;
		mes "[Mejai]";
		mes "I'm going to go to the old Gray Wolf Forest and collect Half Flowers.";
		next;
		mes "[Mejai]";
		mes "Of course, there are other projects we want to do when this business is stable, but we'll talk about it after things are really stable.";
		next;
		mes "[Mejai]";
		mes "How about working with me, Mister?";
		next;
		if (select( "Okay.", "I'm having a hard time right now." ) == 2)
			end;
		mes "[Mejai]";
		mes "Okay. I think mutual respect between the boss and employees is important. You can guess why I say this.";
		next;
		mes "[Mejai]";
		mes "Now that we are working together, please call me President Mejai from now on. I will respect you as well as the staff.";
		next;
		mes "[Mejai]";
		mes "I'm not going to treat you badly. I'm tired of that kind of thing...";
		next;
		mes "[Mejai]";
		mes "First of all, I would like to educate you on the most important task, how to gather Half Flowers.";
		next;
		erasequest 5933;
		setquest 5934;
		mes "[Mejai]";
		mes "Talk to me when you're ready.";
		close;
	}
	if (isbegin_quest(5934) == 1) {
		mes "[Mejai]";
		mes "I'm thinking of starting a Half Flower gathering training, are you ready?";
		next;
		if (select( "Sir, let's start.", "Wait a minute." ) == 2)
			end;
		mes "[Mejai]";
		mes "Welcome to the Half Flower collection training.";
		next;
		mes "[Mejai]";
		mes "Collecting Half Flowers is divided into four stages. First, cut the stems.";
		next;
		mes "[Mejai]";
		mes "And remove the leaves from the second cut stem...";
		next;
		mes "[Mejai]";
		mes "Thirdly, put water and secret powder in a small container for soaking the tip of the stem and mix well.";
		next;
		mes "[Mejai]";
		mes "Put the tip of the stem in the fourth and last small barrel and wrap it well to avoid damaging the flower.";
		next;
		mes "[Mejai]";
		mes "Isn't it difficult to simply look at the method?";
		next;
		mes "[Mejai]";
		mes "Due to the deepening process, depending on where the Half Flower is blooming, the angle at which the stem is cut, the number of leaves to be removed, the amount of water and secret powder in the barrel, etc. will vary...";
		next;
		mes "[Mejai]";
		mes "Don't worry. I'll write it down in detail when you get the job so that you never forget it.";
		next;
		mes "[Mejai]";
		mes "Can you see the Half Flower I made for practice next to you?";
		next;
		mes "[Mejai]";
		mes "I think I invested half of the money I had to make this practice Half Flower when I started.";
		next;
		mes "[Mejai]";
		mes "Well, I don't regret it because it's become easier to train employees. Then let's practice like a real one?";
		next;
		erasequest 5934;
		setquest 5935;
		mes "[Mejai]";
		mes "What would be good? Let's practice for practice, assuming that the Half Flower is blooming under the tree.";
		close;
	}
	if (isbegin_quest(5935) == 1) {
		mes "[Mejai]";
		mes "Please pay attention to the Half Flower for practice beside me, not me.";
		close;
	}
	if (isbegin_quest(5936) == 1) {
		// if (rentalcountitem(1000407) < 1)
		mes "[Mejai]";
		mes "Thank you for your hard work. The next Half Flower collection will be carried out in the same way.";
		next;
		mes "[Mejai]";
		mes "All you have to do is deliver the collected flowers to me.";
		next;
		mes "[map]";
		mes "Unlike me, the employee is a person who does many different things at the same time..";
		next;
		mes "[Mejai]";
		mes "I would appreciate it if you could bring me the Half Flower before it withers while you work.";
		next;
		mes "[Mejai]";
		mes "Ah! One tip, the more you collect the same as I told you, the longer the flowers will last.";
		next;
		select("When will the work start?");
		mes "[Mejai]";
		mes "Today, I'm also preparing to open the store. I'm busy, so why not start tomorrow?";
		next;
		select("Okay. See you tomorrow.");
		mes "[Mejai]";
		mes "Oops, I have to give this to you.";
		next;
		mes "[Mejai]";
		mes "I've been doing a lot of work for two days, but it can't be that unsightly to do one thing and another on the pretext of the training period while doing the job one by one.";
		next;
		if (rentalcountitem(1000407) > 0)
			delitem 1000407,1;	// Ep18_Half_Flower
		completequest 5936;
		setquest 5937;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;	// dummy value
		mes "[Mejai]";
		mes "What I'm giving you now is a reward for today's education. Take a good rest and see you tomorrow.";
		close;
	}
	mes "[Mejai]";
	mes "Are you here? Eunha Cho. Not yet";
	mes "La open, I sat down. It's the first day, so it's right to prepare something.";
	next;
	mes "[Mejai]";
	mes "It will be open soon, so see.";
	close;

OnInit:
	cloakonnpc();
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5933) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5934) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5936) == 1" );
	end;
}

// Quest: Picking Half Flowers. Step 3 (final).
rachel,72,133,4	script	Half Flower#E18_6	4_EP18_HALFFLOWER,{
	if (checkweight(1000407,1) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (isbegin_quest(5935) == 1) {
		setarray .@good_answer[0],2,2,2,3;
		.@time = 86400;
		mes "This is a practice Half Flower.";
		next;
		npctalk "Mejai: Let's start by assuming that a Half Flower blooms under a purple tree.", "Mejai#E18_5", bc_self;
		next;
		npctalk "Mejai: Shall we cut the stem of the Half Flower first?", "Mejai#E18_5", bc_self;
		next;
		if (select("Cut to 10", "Cut to 20", "Cut to 30", "Cut to 40" ) != .@good_answer[0])
			.@time /= 2;
		progressbar "FFFF00",1;
		npctalk "Mejai: Well done. First you cut the stems.", "Mejay#E18_5", bc_self;
		next;
		npctalk "Mejai: Next, I'll remove the leaves. Leave only as much as I can and remove the rest.", "Mejai#E18_5", bc_self;
		next;
		if (select("Leave 2 cards", "Leave 4 cards", "Leave 6 cards", "Leave 8 cards" ) != .@good_answer[1])
			.@time /= 2;
		progressbar "FFFF00",1;
		npctalk "Mejay: Well done. Next I'll prepare a bottle for the stem tip.", "Mejay#E18_5", bc_self;
		next;
		npctalk "Mejai: First fill the small bottle with water.", "Mejai#E18_5", bc_self;
		next;
		if (select("Contains 20 ml", "Contains 30 ml", "Contains 40 ml", "Contains 50 ml" ) != .@good_answer[2])
			.@time /= 2;
		progressbar "FFFF00",1;
		npctalk "Mejai: I'm going to add my secret powder to the water and mix it.", "Mejai#E18_5", bc_self;
		next;
		npctalk "Mejay: Mix it properly.", "Mejay#E18_5", bc_self;
		next;
		if (select( "put 2 gC.", "Add 4 g.", "Add 6 g.", "Add 8 g." ) != .@good_answer[3])
			.@time /= 2;
		npctalk "Mejai: Now finally", "Mejai#E18_5", bc_self;
		next;
		npctalk "Mejai: Just put the cut stem ends in a bucket of water and secret powder and wrap!", "Mejai#E18_5", bc_self;
		next;
		progressbar "FFFF00",1;
		// note: the timer decreases according to the answer but no idea of the ratio
		rentitem 1000407,.@time;	// Ep18_Half_Flower
		erasequest 5935;
		setquest 5936;
		cloakonnpc "Half Flower#E18_6", getcharid(0);
		npctalk "Mejai: Complete! Then will you bring me the Half Flower you just collected?", "Mejai#E18_5", bc_self;
		close;
	}
	end;

OnInit:
	cloakonnpc();
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5935) == 1" );
	end;
}

// daily quest
rachel,70,135,4	script	Mejai#E18_7	4_M_DST_CHILD,{
	if (checkweight(1000405,3) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	setpcblock PCBLOCK_NPC, true;
	if (checkquest(5937,PLAYTIME) != 2)
		npctalk "Mejai: Hello. Let's do our best today.", "", bc_self;
	else {
		npctalk "Mejai: Oh, are you here? Let's start today, shall we?", "", bc_self;
		sleep2 1000;
		npctalk "Mejai: Hello. It's Saturday, so why don't you try to work with a relaxed mind?", "", bc_self;
	}
	sleep2 1000;
	setpcblock PCBLOCK_NPC, false;
	switch( select( "I'm busy right now..", "Gathering Half Flowers", "Shipping Half Flowers" ) ) {
	case 1:
		npctalk "Mejai: Are you busy? Find me when you are comfortable.", "", bc_self;
		end;
	case 2:
		for ( .@id = 5938; .@id < 5942; .@id++ ) {
			if (isbegin_quest(.@id) == 1) {
				.@quest_id = .@id;
				break;
			}
		}
		if (.@quest_id == 0)
			.@quest_id = rand(5938,5941);

		switch( isbegin_quest(.@quest_id) ) {
		case 0:
			npctalk "Mejai: Are you going to go gather Half Flowers?", "", bc_self;
			if (select( "I'll collect it.", "I'll skip today." ) == 2) {
				end;
			}
			switch( checkquest(5937,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				npctalk "Mejai: Oh! Do you?", "", bc_self;
				sleep2 1000;
				npctalk "Mejai: It's not over yet, so if today's work is done early, please help with the Flower Room.", "", bc_self;
				end;
			case 2:
				break;
			}
			setquest .@quest_id;
			npctalk "Mejai: Pay attention to the Half Flower that blooms on the flatland today.", "", bc_self;
			sleep2 1000;
			npctalk "Mejai: Alright! Fighting today! Please do your best to bring fresh Half Flowers.", "", bc_self;
			end;
		case 1:
			if (rentalcountitem(1000407) < 1) {
				npctalk "Mejai: Pay attention to the Half Flower that blooms on the flatland today.", "", bc_self;
				sleep2 1000;
				npctalk "Mejai: Alright! Fighting today! Please do your best to bring fresh Half Flowers.", "", bc_self;
				end;
			}
			delitem 1000407,1;	// Ep18_Half_Flower
			erasequest .@quest_id;
			if (checkquest(5937,PLAYTIME) == 2)
				erasequest 5937;
			setquest 5937;
			getitem 1000405,3;	// Ep18_Amethyst_Fragment
			getexp 18252408,2000000;
			npctalk "Mejai: You worked hard today. Leave the rest to me.", "", bc_self;
			end;
		case 2:
			end;	// impossible
		}
		end;
	case 3:
		npctalk "Mejai: It's a service I'm still thinking about. Won't it start when the business is a little more stable?", "", bc_self;
		sleep2 1000;
		npctalk "Mejai: Please take care of me when that time comes.", "", bc_self;
		end;
	}
	end;

OnInit:
	cloakonnpc();
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5936) == 2 && isbegin_quest(5938) == 0 && isbegin_quest(5939) == 0 && isbegin_quest(5940) == 0 && isbegin_quest(5941) == 0 && checkquest(5937,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5936) == 2 && rentalcountitem(1000407) > 0" );
	end;
}

gw_fild01,325,376,1	script	Half Flower#EP18_R01	4_EP18_HALFFLOWER,7,7,{
	if (checkweight(1000407,1) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	for ( .@id = 5938; .@id < 5942; .@id++ ) {
		if (isbegin_quest(.@id) == 1) {
			.@quest_id = .@id;
			break;
		}
	}
	if (.@quest_id == 0) {
		unittalk getcharid(3), "Half flower is blooming", bc_self;
		end;
	}
	// player interacts with the npc according to the quest ID
	// 5938 requires EP18_R (flower near a Rock)
	// 5939 requires EP18_L (?)
	// 5940 requires EP18_T (Tree)
	// 5941 requires EP18_W (Water)
	switch( .@quest_id ) {
	case 5938:
		.@string$ = "EP18_R";
		setarray .@good_answer[0],4,1,4,1;
		break;
	case 5939:
		.@string$ = "EP18_L";
		setarray .@good_answer[0],3,2,3,2;
		break;
	case 5940:
		.@string$ = "EP18_T";
		setarray .@good_answer[0],2,2,2,3;
		break;
	case 5941:
		.@string$ = "EP18_W";
		setarray .@good_answer[0],1,4,1,4;
		break;
	}
	if (compare(strnpcinfo(2), .@string$) == false) {
		cloakonnpc strnpcinfo(0), getcharid(0);
		end;
	}
	if (rentalcountitem(1000407) > 0) {
		mes "- the Half Flower is more";
		mes "- not necessary, before wither";
		mes "- Bring it to Mejai.";
		close;
	}
	.@time = 86400;
	mes "- the half-flower is blooming. Mejaiga";
	mes "- Necessary for the Gathering Tool you gave me";
	mes "- Let's find and gather materials.";
	next;
	unittalk getcharid(3), "" + strcharinfo(0) + " : How do I cut the stem at an angle?", bc_self;
	next;
	if (select("Cut to 10", "Cut to 20", "Cut to 30", "Cut to 40" ) != .@good_answer[0])
		.@time /= 2;
	progressbar "FFFF00",1;
	unittalk getcharid(3), "" + strcharinfo(0) + " : how many leaves to leave?", bc_self;
	next;
	if (select("Leave 2 cards", "Leave 4 cards", "Leave 6 cards", "Leave 8 cards" ) != .@good_answer[1])
		.@time /= 2;
	progressbar "FFFF00",1;
	unittalk getcharid(3), "" + strcharinfo(0) + " : How many ml of water will a small bottle hold?", bc_self;
	next;
	if (select("Contains 20 ml", "Contains 30 ml", "Contains 40 ml", "Contains 50 ml" ) != .@good_answer[2])
		.@time /= 2;
	progressbar "FFFF00",1;
	unittalk getcharid(3), "" + strcharinfo(0) + " : How many grams of secret powder should you put in?", bc_self;
	next;
	if (select( "Add 2 g", "Put 4 g", "Put 6 g", "Put 8 g" ) != .@good_answer[3])
		.@time /= 2;
	progressbar "FFFF00",1;
	cloakonnpc strnpcinfo(0), getcharid(0);
	// note: the timer decreases according to the answer but no idea of the ratio
	rentitem 1000407, .@time;	// Ep18_Half_Flower
	mes "- I have collected Half Flowers";
	mes "- Bring it to Mejai before it withers.";
	close;

OnTouch:
	for ( .@id = 5938; .@id < 5942; .@id++ ) {
		if (isbegin_quest(.@id) == 1) {
			.@quest_id = .@id;
			break;
		}
	}
	if (.@quest_id == 0)
		end;
	setarray .@string$[5938], "EP18_R", "EP18_L", "EP18_T", "EP18_W";
	if (compare(strnpcinfo(2), .@string$[.@quest_id]) == false) {
		cloakonnpc strnpcinfo(0), getcharid(0);
		end;
	}
	end;
}
gw_fild01,280,106,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R02	4_EP18_HALFFLOWER,7,7
gw_fild01,382,271,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R03	4_EP18_HALFFLOWER,7,7
gw_fild02,291,248,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R04	4_EP18_HALFFLOWER,7,7
gw_fild02,119,93,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R05	4_EP18_HALFFLOWER,7,7
gw_fild02,287,321,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R06	4_EP18_HALFFLOWER,7,7

gw_fild01,297,310,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L01	4_EP18_HALFFLOWER,7,7
gw_fild01,219,211,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L02	4_EP18_HALFFLOWER,7,7
gw_fild01,316,150,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L03	4_EP18_HALFFLOWER,7,7
gw_fild02,104,338,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L04	4_EP18_HALFFLOWER,7,7
gw_fild02,207,101,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L05	4_EP18_HALFFLOWER,7,7
gw_fild02,268,262,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L06	4_EP18_HALFFLOWER,7,7
gw_fild02,144,94,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L07	4_EP18_HALFFLOWER,7,7
wolfvill,212,86,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L08	4_EP18_HALFFLOWER,7,7
wolfvill,143,43,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L09	4_EP18_HALFFLOWER,7,7
wolfvill,58,113,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L10	4_EP18_HALFFLOWER,7,7

gw_fild01,157,92,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T01	4_EP18_HALFFLOWER,7,7
gw_fild01,189,183,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T02	4_EP18_HALFFLOWER,7,7
gw_fild01,202,358,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T03	4_EP18_HALFFLOWER,7,7
gw_fild01,279,64,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T04	4_EP18_HALFFLOWER,7,7
gw_fild01,159,206,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T05	4_EP18_HALFFLOWER,7,7
gw_fild02,125,367,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T06	4_EP18_HALFFLOWER,7,7
gw_fild02,114,355,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T07	4_EP18_HALFFLOWER,7,7
gw_fild02,248,288,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T08	4_EP18_HALFFLOWER,7,7
wolfvill,258,226,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T09	4_EP18_HALFFLOWER,7,7
wolfvill,130,203,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T10	4_EP18_HALFFLOWER,7,7

gw_fild01,48,83,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W01	4_EP18_HALFFLOWER,7,7
wolfvill,88,57,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W02	4_EP18_HALFFLOWER,7,7
wolfvill,65,95,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W03	4_EP18_HALFFLOWER,7,7
wolfvill,78,222,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W04	4_EP18_HALFFLOWER,7,7
wolfvill,193,238,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W05	4_EP18_HALFFLOWER,7,7
wolfvill,208,245,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W06	4_EP18_HALFFLOWER,7,7
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Others daily
gw_fild01,32,101,3	script	Camper#to_wolfvill	4_M_SITDOWN,{
	if (ep18_1_main < 35)
		end;
	if (checkweight(1000405,4) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (checkquest(18086,HUNTING) == 2) {
		mes "[Gatekeeper]";
		mes "Oh, I heard you said it was peaceful, so you did my favor.";
		mes "Thank you.";
		mes "Come on, I'll give you what I have.";
		erasequest 18086;
		setquest 18087;
		ep18_1_reputation_exp += 30;
		if (ep18_1_reputation_exp >= 5000)
			.@bonus = 1;
		if (ep18_1_reputation_exp >= 1000 && ep18_1_main == 36) {
			ep18_1_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 9956480,2000000;
		next;
	}
	mes "[Gatekeeper]";
	mes "Are you going into town?";
	next;
	switch( select( "To the gray wolf village", "Do not go", "What is it?", "Secure the gray wolf forest" ) ) {
	case 1:
		mes "[Gate]";
		mes "Okay. You have to go through the trees here.";
		mes "Follow me.";
		close2;
		warp "wolfvill",270,26;
		end;
	case 2:
		end;
	case 3:
		end;
	case 4:
		switch( checkquest(18087,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Gatekeeper]";
			mes "Um... it'll be fine for a while.";
			mes "It's been a threat to some extent, so if they think about it, they won't attack.";
			close;
		case 2:
			erasequest 18087;
			break;
		}
		switch( checkquest(18086,HUNTING) ) {
		case -1:
			mes "[Gatekeeper]";
			mes "As you can see, I'm guarding the entrance from here, right?";
			mes "Sometimes even though I'm tired, monsters come all the way here and torment me.";
			next;
			mes "[Gatekeeper]";
			mes "Can you kill only 30 monsters in the forest near here, of any kind?";
			mes "I have a piece of amethyst I picked up because it's beautiful, I'll give it to you.";
			next;
			switch( select( "Request accept", "Reject request" ) ) {
			case 1:
				mes "[Gatekeeper]";
				mes "Thank you!";
				mes "Now I can relax and rest a bit!";
				mes "Then I'll ask you.";
				setquest 18086;
				close;
			case 2:
				end;
			}
		case 0:
		case 1:
			mes "[Gatekeeper]";
			mes "Can you kill only 30 monsters in the forest near here, of any kind?";
			mes "I have a piece of amethyst I picked up because it's beautiful, I'll give it to you.";
			close;
		case 2:
			end;
		}
	}
	end;

OnInit:
	// note: click me icon appears after talking to MARAM. Daily quest icon appears later on
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "ep18_1_main == 35" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep18_1_main > 35 && checkquest(18086,HUNTING) == -1 && (checkquest(18087,PLAYTIME) == -1 || checkquest(18087,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(18086,HUNTING) == 2" );
	end;
}
//-------------------------------------------------------------------

